!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process,global){__webpack_require__.d(__webpack_exports__,"d",(function(){return isWindows})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isMacintosh})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isWeb})),__webpack_require__.d(__webpack_exports__,"a",(function(){return globals})),__webpack_require__.d(__webpack_exports__,"e",(function(){return setImmediate}));let _isWindows=!1,_isMacintosh=!1,_isLinux=!1,_isNative=!1,_isWeb=!1,_isIOS=!1,_locale=void 0,_language="en",_translationsConfigFile=void 0,_userAgent=void 0;const isElectronRenderer=void 0!==process&&void 0!==process.versions&&void 0!==process.versions.electron&&"renderer"===process.type;if("object"!=typeof navigator||isElectronRenderer){if("object"==typeof process){_isWindows="win32"===process.platform,_isMacintosh="darwin"===process.platform,_isLinux="linux"===process.platform,_locale="en",_language="en";const rawNlsConfig=Object({NODE_ENV:"production",NODE_PATH:"",STORYBOOK:"true",PUBLIC_URL:"."}).VSCODE_NLS_CONFIG;if(rawNlsConfig)try{const nlsConfig=JSON.parse(rawNlsConfig),resolved=nlsConfig.availableLanguages["*"];_locale=nlsConfig.locale,_language=resolved||"en",_translationsConfigFile=nlsConfig._translationsConfigFile}catch(e){}_isNative=!0}}else _userAgent=navigator.userAgent,_isWindows=_userAgent.indexOf("Windows")>=0,_isMacintosh=_userAgent.indexOf("Macintosh")>=0,_isIOS=(_userAgent.indexOf("Macintosh")>=0||_userAgent.indexOf("iPad")>=0||_userAgent.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_isLinux=_userAgent.indexOf("Linux")>=0,_isWeb=!0,_locale=navigator.language,_language=_locale;let _platform=0;_isMacintosh?_platform=1:_isWindows?_platform=3:_isLinux&&(_platform=2);const isWindows=_isWindows,isMacintosh=_isMacintosh,isWeb=_isWeb,globals="object"==typeof self?self:"object"==typeof global?global:{},setImmediate=function defineSetImmediate(){if(globals.setImmediate)return globals.setImmediate.bind(globals);if("function"==typeof globals.postMessage&&!globals.importScripts){let pending=[];globals.addEventListener("message",e=>{if(e.data&&e.data.vscodeSetImmediateId)for(let i=0,len=pending.length;i<len;i++){const candidate=pending[i];if(candidate.id===e.data.vscodeSetImmediateId)return pending.splice(i,1),void candidate.callback()}});let lastId=0;return callback=>{const myId=++lastId;pending.push({id:myId,callback:callback}),globals.postMessage({vscodeSetImmediateId:myId},"*")}}if(void 0!==process&&"function"==typeof process.nextTick)return process.nextTick.bind(process);const _promise=Promise.resolve();return callback=>_promise.then(callback)}()}).call(this,__webpack_require__(3),__webpack_require__(4))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return cwd})),__webpack_require__.d(__webpack_exports__,"b",(function(){return env})),__webpack_require__.d(__webpack_exports__,"c",(function(){return platform}));var _platform_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const safeProcess=void 0===process?{cwd:()=>"/",env:Object.create(null),get platform(){return _platform_js__WEBPACK_IMPORTED_MODULE_0__.d?"win32":_platform_js__WEBPACK_IMPORTED_MODULE_0__.b?"darwin":"linux"},nextTick:callback=>Object(_platform_js__WEBPACK_IMPORTED_MODULE_0__.e)(callback)}:process,cwd=safeProcess.cwd,env=safeProcess.env,platform=safeProcess.platform}).call(this,__webpack_require__(3))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return URI}));var extendStatics,_a,isWindows,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});if("object"==typeof process)isWindows="win32"===process.platform;else if("object"==typeof navigator){var userAgent=navigator.userAgent;isWindows=userAgent.indexOf("Windows")>=0}var _schemePattern=/^\w[\w\d+.-]*$/,_singleSlashStart=/^\//,_doubleSlashStart=/^\/\//;var _slash="/",_regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,URI=function(){function URI(schemeOrData,authority,path,query,fragment,_strict){void 0===_strict&&(_strict=!1),"object"==typeof schemeOrData?(this.scheme=schemeOrData.scheme||"",this.authority=schemeOrData.authority||"",this.path=schemeOrData.path||"",this.query=schemeOrData.query||"",this.fragment=schemeOrData.fragment||""):(this.scheme=function _schemeFix(scheme,_strict){return scheme||_strict?scheme:"file"}(schemeOrData,_strict),this.authority=authority||"",this.path=function _referenceResolution(scheme,path){switch(scheme){case"https":case"http":case"file":path?path[0]!==_slash&&(path=_slash+path):path=_slash}return path}(this.scheme,path||""),this.query=query||"",this.fragment=fragment||"",function _validateUri(ret,_strict){if(!ret.scheme&&_strict)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+ret.authority+'", path: "'+ret.path+'", query: "'+ret.query+'", fragment: "'+ret.fragment+'"}');if(ret.scheme&&!_schemePattern.test(ret.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(ret.path)if(ret.authority){if(!_singleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(_doubleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,_strict))}return URI.isUri=function(thing){return thing instanceof URI||!!thing&&("string"==typeof thing.authority&&"string"==typeof thing.fragment&&"string"==typeof thing.path&&"string"==typeof thing.query&&"string"==typeof thing.scheme&&"function"==typeof thing.fsPath&&"function"==typeof thing.with&&"function"==typeof thing.toString)},Object.defineProperty(URI.prototype,"fsPath",{get:function(){return uriToFsPath(this,!1)},enumerable:!0,configurable:!0}),URI.prototype.with=function(change){if(!change)return this;var scheme=change.scheme,authority=change.authority,path=change.path,query=change.query,fragment=change.fragment;return void 0===scheme?scheme=this.scheme:null===scheme&&(scheme=""),void 0===authority?authority=this.authority:null===authority&&(authority=""),void 0===path?path=this.path:null===path&&(path=""),void 0===query?query=this.query:null===query&&(query=""),void 0===fragment?fragment=this.fragment:null===fragment&&(fragment=""),scheme===this.scheme&&authority===this.authority&&path===this.path&&query===this.query&&fragment===this.fragment?this:new _URI(scheme,authority,path,query,fragment)},URI.parse=function(value,_strict){void 0===_strict&&(_strict=!1);var match=_regexp.exec(value);return match?new _URI(match[2]||"",percentDecode(match[4]||""),percentDecode(match[5]||""),percentDecode(match[7]||""),percentDecode(match[9]||""),_strict):new _URI("","","","","")},URI.file=function(path){var authority="";if(isWindows&&(path=path.replace(/\\/g,_slash)),path[0]===_slash&&path[1]===_slash){var idx=path.indexOf(_slash,2);-1===idx?(authority=path.substring(2),path=_slash):(authority=path.substring(2,idx),path=path.substring(idx)||_slash)}return new _URI("file",authority,path,"","")},URI.from=function(components){return new _URI(components.scheme,components.authority,components.path,components.query,components.fragment)},URI.prototype.toString=function(skipEncoding){return void 0===skipEncoding&&(skipEncoding=!1),_asFormatted(this,skipEncoding)},URI.prototype.toJSON=function(){return this},URI.revive=function(data){if(data){if(data instanceof URI)return data;var result=new _URI(data);return result._formatted=data.external,result._fsPath=data._sep===_pathSepMarker?data.fsPath:null,result}return data},URI}(),_pathSepMarker=isWindows?1:void 0,_URI=function(_super){function _URI(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._formatted=null,_this._fsPath=null,_this}return __extends(_URI,_super),Object.defineProperty(_URI.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=uriToFsPath(this,!1)),this._fsPath},enumerable:!0,configurable:!0}),_URI.prototype.toString=function(skipEncoding){return void 0===skipEncoding&&(skipEncoding=!1),skipEncoding?_asFormatted(this,!0):(this._formatted||(this._formatted=_asFormatted(this,!1)),this._formatted)},_URI.prototype.toJSON=function(){var res={$mid:1};return this._fsPath&&(res.fsPath=this._fsPath,res._sep=_pathSepMarker),this._formatted&&(res.external=this._formatted),this.path&&(res.path=this.path),this.scheme&&(res.scheme=this.scheme),this.authority&&(res.authority=this.authority),this.query&&(res.query=this.query),this.fragment&&(res.fragment=this.fragment),res},_URI}(URI),encodeTable=((_a={})[58]="%3A",_a[47]="%2F",_a[63]="%3F",_a[35]="%23",_a[91]="%5B",_a[93]="%5D",_a[64]="%40",_a[33]="%21",_a[36]="%24",_a[38]="%26",_a[39]="%27",_a[40]="%28",_a[41]="%29",_a[42]="%2A",_a[43]="%2B",_a[44]="%2C",_a[59]="%3B",_a[61]="%3D",_a[32]="%20",_a);function encodeURIComponentFast(uriComponent,allowSlash){for(var res=void 0,nativeEncodePos=-1,pos=0;pos<uriComponent.length;pos++){var code=uriComponent.charCodeAt(pos);if(code>=97&&code<=122||code>=65&&code<=90||code>=48&&code<=57||45===code||46===code||95===code||126===code||allowSlash&&47===code)-1!==nativeEncodePos&&(res+=encodeURIComponent(uriComponent.substring(nativeEncodePos,pos)),nativeEncodePos=-1),void 0!==res&&(res+=uriComponent.charAt(pos));else{void 0===res&&(res=uriComponent.substr(0,pos));var escaped=encodeTable[code];void 0!==escaped?(-1!==nativeEncodePos&&(res+=encodeURIComponent(uriComponent.substring(nativeEncodePos,pos)),nativeEncodePos=-1),res+=escaped):-1===nativeEncodePos&&(nativeEncodePos=pos)}}return-1!==nativeEncodePos&&(res+=encodeURIComponent(uriComponent.substring(nativeEncodePos))),void 0!==res?res:uriComponent}function encodeURIComponentMinimal(path){for(var res=void 0,pos=0;pos<path.length;pos++){var code=path.charCodeAt(pos);35===code||63===code?(void 0===res&&(res=path.substr(0,pos)),res+=encodeTable[code]):void 0!==res&&(res+=path[pos])}return void 0!==res?res:path}function uriToFsPath(uri,keepDriveLetterCasing){var value;return value=uri.authority&&uri.path.length>1&&"file"===uri.scheme?"//"+uri.authority+uri.path:47===uri.path.charCodeAt(0)&&(uri.path.charCodeAt(1)>=65&&uri.path.charCodeAt(1)<=90||uri.path.charCodeAt(1)>=97&&uri.path.charCodeAt(1)<=122)&&58===uri.path.charCodeAt(2)?keepDriveLetterCasing?uri.path.substr(1):uri.path[1].toLowerCase()+uri.path.substr(2):uri.path,isWindows&&(value=value.replace(/\//g,"\\")),value}function _asFormatted(uri,skipEncoding){var encoder=skipEncoding?encodeURIComponentMinimal:encodeURIComponentFast,res="",scheme=uri.scheme,authority=uri.authority,path=uri.path,query=uri.query,fragment=uri.fragment;if(scheme&&(res+=scheme,res+=":"),(authority||"file"===scheme)&&(res+=_slash,res+=_slash),authority){var idx=authority.indexOf("@");if(-1!==idx){var userinfo=authority.substr(0,idx);authority=authority.substr(idx+1),-1===(idx=userinfo.indexOf(":"))?res+=encoder(userinfo,!1):(res+=encoder(userinfo.substr(0,idx),!1),res+=":",res+=encoder(userinfo.substr(idx+1),!1)),res+="@"}-1===(idx=(authority=authority.toLowerCase()).indexOf(":"))?res+=encoder(authority,!1):(res+=encoder(authority.substr(0,idx),!1),res+=authority.substr(idx))}if(path){if(path.length>=3&&47===path.charCodeAt(0)&&58===path.charCodeAt(2))(code=path.charCodeAt(1))>=65&&code<=90&&(path="/"+String.fromCharCode(code+32)+":"+path.substr(3));else if(path.length>=2&&58===path.charCodeAt(1)){var code;(code=path.charCodeAt(0))>=65&&code<=90&&(path=String.fromCharCode(code+32)+":"+path.substr(2))}res+=encoder(path,!0)}return query&&(res+="?",res+=encoder(query,!1)),fragment&&(res+="#",res+=skipEncoding?fragment:encodeURIComponentFast(fragment,!1)),res}var _rEncodedAsHex=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function percentDecode(str){return str.match(_rEncodedAsHex)?str.replace(_rEncodedAsHex,(function(match){return function decodeURIComponentGraceful(str){try{return decodeURIComponent(str)}catch(_a){return str.length>3?str.substr(0,3)+decodeURIComponentGraceful(str.substr(3)):str}}(match)})):str}}).call(this,__webpack_require__(3))},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);const errorHandler=new class ErrorHandler{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e},0)}}emit(e){this.listeners.forEach(listener=>{listener(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function onUnexpectedError(e){isPromiseCanceledError(e)||errorHandler.onUnexpectedError(e)}function transformErrorForSerialization(error){if(error instanceof Error){let{name:name,message:message}=error;return{$isError:!0,name:name,message:message,stack:error.stacktrace||error.stack}}return error}function isPromiseCanceledError(error){return error instanceof Error&&"Canceled"===error.name&&"Canceled"===error.message}var Iterable;!function(Iterable){Iterable.is=function is(thing){return thing&&"object"==typeof thing&&"function"==typeof thing[Symbol.iterator]};const _empty=Object.freeze([]);Iterable.empty=function empty(){return _empty},Iterable.single=function*single(element){yield element},Iterable.from=function from(iterable){return iterable||_empty},Iterable.first=function first(iterable){return iterable[Symbol.iterator]().next().value},Iterable.some=function some(iterable,predicate){for(const element of iterable)if(predicate(element))return!0;return!1},Iterable.filter=function*filter(iterable,predicate){for(const element of iterable)predicate(element)&&(yield element)},Iterable.map=function*map(iterable,fn){for(const element of iterable)yield fn(element)},Iterable.concat=function*concat(...iterables){for(const iterable of iterables)for(const element of iterable)yield element},Iterable.consume=function consume(iterable,atMost=Number.POSITIVE_INFINITY){const consumed=[];if(0===atMost)return[consumed,iterable];const iterator=iterable[Symbol.iterator]();for(let i=0;i<atMost;i++){const next=iterator.next();if(next.done)return[consumed,Iterable.empty()];consumed.push(next.value)}return[consumed,{[Symbol.iterator]:()=>iterator}]}}(Iterable||(Iterable={}));function markTracked(x){}class MultiDisposeError extends Error{constructor(errors){super(`Encounter errors while disposing of store. Errors: [${errors.join(", ")}]`),this.errors=errors}}function dispose(arg){if(Iterable.is(arg)){let errors=[];for(const d of arg)if(d)try{d.dispose()}catch(e){errors.push(e)}if(1===errors.length)throw errors[0];if(errors.length>1)throw new MultiDisposeError(errors);return Array.isArray(arg)?[]:arg}if(arg)return arg.dispose(),arg}class DisposableStore{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{dispose(this._toDispose.values())}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?DisposableStore.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}}DisposableStore.DISABLE_DISPOSED_WARNING=!1;class Disposable{constructor(){this._store=new DisposableStore}dispose(){this._store.dispose()}_register(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)}}Disposable.None=Object.freeze({dispose(){}});var platform=__webpack_require__(0);function getAllMethodNames(obj){const methods=[];for(const prop of function getAllPropertyNames(obj){let res=[],proto=Object.getPrototypeOf(obj);for(;Object.prototype!==proto;)res=res.concat(Object.getOwnPropertyNames(proto)),proto=Object.getPrototypeOf(proto);return res}(obj))"function"==typeof obj[prop]&&methods.push(prop);return methods}function createProxyObject(methodNames,invoke){const createProxyMethod=method=>function(){const args=Array.prototype.slice.call(arguments,0);return invoke(method,args)};let result={};for(const methodName of methodNames)result[methodName]=createProxyMethod(methodName);return result}class simpleWorker_SimpleWorkerProtocol{constructor(handler){this._workerId=-1,this._handler=handler,this._lastSentReq=0,this._pendingReplies=Object.create(null)}setWorkerId(workerId){this._workerId=workerId}sendMessage(method,args){let req=String(++this._lastSentReq);return new Promise((resolve,reject)=>{this._pendingReplies[req]={resolve:resolve,reject:reject},this._send({vsWorker:this._workerId,req:req,method:method,args:args})})}handleMessage(message){message&&message.vsWorker&&(-1!==this._workerId&&message.vsWorker!==this._workerId||this._handleMessage(message))}_handleMessage(msg){if(msg.seq){let replyMessage=msg;if(!this._pendingReplies[replyMessage.seq])return void console.warn("Got reply to unknown seq");let reply=this._pendingReplies[replyMessage.seq];if(delete this._pendingReplies[replyMessage.seq],replyMessage.err){let err=replyMessage.err;return replyMessage.err.$isError&&(err=new Error,err.name=replyMessage.err.name,err.message=replyMessage.err.message,err.stack=replyMessage.err.stack),void reply.reject(err)}return void reply.resolve(replyMessage.res)}let requestMessage=msg,req=requestMessage.req;this._handler.handleMessage(requestMessage.method,requestMessage.args).then(r=>{this._send({vsWorker:this._workerId,seq:req,res:r,err:void 0})},e=>{e.detail instanceof Error&&(e.detail=transformErrorForSerialization(e.detail)),this._send({vsWorker:this._workerId,seq:req,res:void 0,err:transformErrorForSerialization(e)})})}_send(msg){let transfer=[];if(msg.req){const m=msg;for(let i=0;i<m.args.length;i++)m.args[i]instanceof ArrayBuffer&&transfer.push(m.args[i])}else{const m=msg;m.res instanceof ArrayBuffer&&transfer.push(m.res)}this._handler.sendMessage(msg,transfer)}}class simpleWorker_SimpleWorkerServer{constructor(postMessage,requestHandlerFactory){this._requestHandlerFactory=requestHandlerFactory,this._requestHandler=null,this._protocol=new simpleWorker_SimpleWorkerProtocol({sendMessage:(msg,transfer)=>{postMessage(msg,transfer)},handleMessage:(method,args)=>this._handleMessage(method,args)})}onmessage(msg){this._protocol.handleMessage(msg)}_handleMessage(method,args){if("$initialize"===method)return this.initialize(args[0],args[1],args[2],args[3]);if(!this._requestHandler||"function"!=typeof this._requestHandler[method])return Promise.reject(new Error("Missing requestHandler or method: "+method));try{return Promise.resolve(this._requestHandler[method].apply(this._requestHandler,args))}catch(e){return Promise.reject(e)}}initialize(workerId,loaderConfig,moduleId,hostMethods){this._protocol.setWorkerId(workerId);const hostProxy=createProxyObject(hostMethods,(method,args)=>this._protocol.sendMessage(method,args));return this._requestHandlerFactory?(this._requestHandler=this._requestHandlerFactory(hostProxy),Promise.resolve(getAllMethodNames(this._requestHandler))):(loaderConfig&&(void 0!==loaderConfig.baseUrl&&delete loaderConfig.baseUrl,void 0!==loaderConfig.paths&&void 0!==loaderConfig.paths.vs&&delete loaderConfig.paths.vs,loaderConfig.catchError=!0,self.require.config(loaderConfig)),new Promise((resolve,reject)=>{self.require([moduleId],module=>{this._requestHandler=module.create(hostProxy),this._requestHandler?resolve(getAllMethodNames(this._requestHandler)):reject(new Error("No RequestHandler!"))},reject)}))}}function mergeSort(data,compare){return function _sort(a,compare,lo,hi,aux){if(hi<=lo)return;const mid=lo+(hi-lo)/2|0;if(_sort(a,compare,lo,mid,aux),_sort(a,compare,mid+1,hi,aux),compare(a[mid],a[mid+1])<=0)return;!function _merge(a,compare,lo,mid,hi,aux){let leftIdx=lo,rightIdx=mid+1;for(let i=lo;i<=hi;i++)aux[i]=a[i];for(let i=lo;i<=hi;i++)leftIdx>mid?a[i]=aux[rightIdx++]:rightIdx>hi?a[i]=aux[leftIdx++]:compare(aux[rightIdx],aux[leftIdx])<0?a[i]=aux[rightIdx++]:a[i]=aux[leftIdx++]}(a,compare,lo,mid,hi,aux)}(data,compare,0,data.length-1,[]),data}class DiffChange{constructor(originalStart,originalLength,modifiedStart,modifiedLength){this.originalStart=originalStart,this.originalLength=originalLength,this.modifiedStart=modifiedStart,this.modifiedLength=modifiedLength}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}function isHighSurrogate(charCode){return 55296<=charCode&&charCode<=56319}function isLowSurrogate(charCode){return 56320<=charCode&&charCode<=57343}function computeCodePoint(highSurrogate,lowSurrogate){return lowSurrogate-56320+(highSurrogate-55296<<10)+65536}String.fromCharCode(65279);class GraphemeBreakTree{constructor(){this._data=function getGraphemeBreakRawData(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}()}static getInstance(){return GraphemeBreakTree._INSTANCE||(GraphemeBreakTree._INSTANCE=new GraphemeBreakTree),GraphemeBreakTree._INSTANCE}getGraphemeBreakType(codePoint){if(codePoint<32)return 10===codePoint?3:13===codePoint?2:4;if(codePoint<127)return 0;const data=this._data,nodeCount=data.length/3;let nodeIndex=1;for(;nodeIndex<=nodeCount;)if(codePoint<data[3*nodeIndex])nodeIndex*=2;else{if(!(codePoint>data[3*nodeIndex+1]))return data[3*nodeIndex+2];nodeIndex=2*nodeIndex+1}return 0}}function numberHash(val,initialHashVal){return(initialHashVal<<5)-initialHashVal+val|0}function stringHash(s,hashVal){hashVal=numberHash(149417,hashVal);for(let i=0,length=s.length;i<length;i++)hashVal=numberHash(s.charCodeAt(i),hashVal);return hashVal}function leftRotate(value,bits,totalBits=32){const delta=totalBits-bits;return(value<<bits|(~((1<<delta)-1)&value)>>>delta)>>>0}function fill(dest,index=0,count=dest.byteLength,value=0){for(let i=0;i<count;i++)dest[index+i]=value}function toHexString(value,bitsize=32){return function leftPad(value,length,char="0"){for(;value.length<length;)value=char+value;return value}((value>>>0).toString(16),bitsize/4)}GraphemeBreakTree._INSTANCE=null;class hash_StringSHA1{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(str){const strLen=str.length;if(0===strLen)return;const buff=this._buff;let charCode,offset,buffLen=this._buffLen,leftoverHighSurrogate=this._leftoverHighSurrogate;for(0!==leftoverHighSurrogate?(charCode=leftoverHighSurrogate,offset=-1,leftoverHighSurrogate=0):(charCode=str.charCodeAt(0),offset=0);;){let codePoint=charCode;if(isHighSurrogate(charCode)){if(!(offset+1<strLen)){leftoverHighSurrogate=charCode;break}{const nextCharCode=str.charCodeAt(offset+1);isLowSurrogate(nextCharCode)?(offset++,codePoint=computeCodePoint(charCode,nextCharCode)):codePoint=65533}}else isLowSurrogate(charCode)&&(codePoint=65533);if(buffLen=this._push(buff,buffLen,codePoint),offset++,!(offset<strLen))break;charCode=str.charCodeAt(offset)}this._buffLen=buffLen,this._leftoverHighSurrogate=leftoverHighSurrogate}_push(buff,buffLen,codePoint){return codePoint<128?buff[buffLen++]=codePoint:codePoint<2048?(buff[buffLen++]=192|(1984&codePoint)>>>6,buff[buffLen++]=128|(63&codePoint)>>>0):codePoint<65536?(buff[buffLen++]=224|(61440&codePoint)>>>12,buff[buffLen++]=128|(4032&codePoint)>>>6,buff[buffLen++]=128|(63&codePoint)>>>0):(buff[buffLen++]=240|(1835008&codePoint)>>>18,buff[buffLen++]=128|(258048&codePoint)>>>12,buff[buffLen++]=128|(4032&codePoint)>>>6,buff[buffLen++]=128|(63&codePoint)>>>0),buffLen>=64&&(this._step(),buffLen-=64,this._totalLen+=64,buff[0]=buff[64],buff[1]=buff[65],buff[2]=buff[66]),buffLen}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),toHexString(this._h0)+toHexString(this._h1)+toHexString(this._h2)+toHexString(this._h3)+toHexString(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,fill(this._buff,this._buffLen),this._buffLen>56&&(this._step(),fill(this._buff));const ml=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(ml/4294967296),!1),this._buffDV.setUint32(60,ml%4294967296,!1),this._step()}_step(){const bigBlock32=hash_StringSHA1._bigBlock32,data=this._buffDV;for(let j=0;j<64;j+=4)bigBlock32.setUint32(j,data.getUint32(j,!1),!1);for(let j=64;j<320;j+=4)bigBlock32.setUint32(j,leftRotate(bigBlock32.getUint32(j-12,!1)^bigBlock32.getUint32(j-32,!1)^bigBlock32.getUint32(j-56,!1)^bigBlock32.getUint32(j-64,!1),1),!1);let f,k,temp,a=this._h0,b=this._h1,c=this._h2,d=this._h3,e=this._h4;for(let j=0;j<80;j++)j<20?(f=b&c|~b&d,k=1518500249):j<40?(f=b^c^d,k=1859775393):j<60?(f=b&c|b&d|c&d,k=2400959708):(f=b^c^d,k=3395469782),temp=leftRotate(a,5)+f+e+k+bigBlock32.getUint32(4*j,!1)&4294967295,e=d,d=c,c=leftRotate(b,30),b=a,a=temp;this._h0=this._h0+a&4294967295,this._h1=this._h1+b&4294967295,this._h2=this._h2+c&4294967295,this._h3=this._h3+d&4294967295,this._h4=this._h4+e&4294967295}}hash_StringSHA1._bigBlock32=new DataView(new ArrayBuffer(320));class StringDiffSequence{constructor(source){this.source=source}getElements(){const source=this.source,characters=new Int32Array(source.length);for(let i=0,len=source.length;i<len;i++)characters[i]=source.charCodeAt(i);return characters}}function stringDiff(original,modified,pretty){return new diff_LcsDiff(new StringDiffSequence(original),new StringDiffSequence(modified)).ComputeDiff(pretty).changes}class Debug{static Assert(condition,message){if(!condition)throw new Error(message)}}class MyArray{static Copy(sourceArray,sourceIndex,destinationArray,destinationIndex,length){for(let i=0;i<length;i++)destinationArray[destinationIndex+i]=sourceArray[sourceIndex+i]}static Copy2(sourceArray,sourceIndex,destinationArray,destinationIndex,length){for(let i=0;i<length;i++)destinationArray[destinationIndex+i]=sourceArray[sourceIndex+i]}}class diff_DiffChangeHelper{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(originalIndex,modifiedIndex){this.m_originalStart=Math.min(this.m_originalStart,originalIndex),this.m_modifiedStart=Math.min(this.m_modifiedStart,modifiedIndex),this.m_originalCount++}AddModifiedElement(originalIndex,modifiedIndex){this.m_originalStart=Math.min(this.m_originalStart,originalIndex),this.m_modifiedStart=Math.min(this.m_modifiedStart,modifiedIndex),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class diff_LcsDiff{constructor(originalSequence,modifiedSequence,continueProcessingPredicate=null){this.ContinueProcessingPredicate=continueProcessingPredicate;const[originalStringElements,originalElementsOrHash,originalHasStrings]=diff_LcsDiff._getElements(originalSequence),[modifiedStringElements,modifiedElementsOrHash,modifiedHasStrings]=diff_LcsDiff._getElements(modifiedSequence);this._hasStrings=originalHasStrings&&modifiedHasStrings,this._originalStringElements=originalStringElements,this._originalElementsOrHash=originalElementsOrHash,this._modifiedStringElements=modifiedStringElements,this._modifiedElementsOrHash=modifiedElementsOrHash,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(arr){return arr.length>0&&"string"==typeof arr[0]}static _getElements(sequence){const elements=sequence.getElements();if(diff_LcsDiff._isStringArray(elements)){const hashes=new Int32Array(elements.length);for(let i=0,len=elements.length;i<len;i++)hashes[i]=stringHash(elements[i],0);return[elements,hashes,!0]}return elements instanceof Int32Array?[[],elements,!1]:[[],new Int32Array(elements),!1]}ElementsAreEqual(originalIndex,newIndex){return this._originalElementsOrHash[originalIndex]===this._modifiedElementsOrHash[newIndex]&&(!this._hasStrings||this._originalStringElements[originalIndex]===this._modifiedStringElements[newIndex])}OriginalElementsAreEqual(index1,index2){return this._originalElementsOrHash[index1]===this._originalElementsOrHash[index2]&&(!this._hasStrings||this._originalStringElements[index1]===this._originalStringElements[index2])}ModifiedElementsAreEqual(index1,index2){return this._modifiedElementsOrHash[index1]===this._modifiedElementsOrHash[index2]&&(!this._hasStrings||this._modifiedStringElements[index1]===this._modifiedStringElements[index2])}ComputeDiff(pretty){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,pretty)}_ComputeDiff(originalStart,originalEnd,modifiedStart,modifiedEnd,pretty){const quitEarlyArr=[!1];let changes=this.ComputeDiffRecursive(originalStart,originalEnd,modifiedStart,modifiedEnd,quitEarlyArr);return pretty&&(changes=this.PrettifyChanges(changes)),{quitEarly:quitEarlyArr[0],changes:changes}}ComputeDiffRecursive(originalStart,originalEnd,modifiedStart,modifiedEnd,quitEarlyArr){for(quitEarlyArr[0]=!1;originalStart<=originalEnd&&modifiedStart<=modifiedEnd&&this.ElementsAreEqual(originalStart,modifiedStart);)originalStart++,modifiedStart++;for(;originalEnd>=originalStart&&modifiedEnd>=modifiedStart&&this.ElementsAreEqual(originalEnd,modifiedEnd);)originalEnd--,modifiedEnd--;if(originalStart>originalEnd||modifiedStart>modifiedEnd){let changes;return modifiedStart<=modifiedEnd?(Debug.Assert(originalStart===originalEnd+1,"originalStart should only be one more than originalEnd"),changes=[new DiffChange(originalStart,0,modifiedStart,modifiedEnd-modifiedStart+1)]):originalStart<=originalEnd?(Debug.Assert(modifiedStart===modifiedEnd+1,"modifiedStart should only be one more than modifiedEnd"),changes=[new DiffChange(originalStart,originalEnd-originalStart+1,modifiedStart,0)]):(Debug.Assert(originalStart===originalEnd+1,"originalStart should only be one more than originalEnd"),Debug.Assert(modifiedStart===modifiedEnd+1,"modifiedStart should only be one more than modifiedEnd"),changes=[]),changes}const midOriginalArr=[0],midModifiedArr=[0],result=this.ComputeRecursionPoint(originalStart,originalEnd,modifiedStart,modifiedEnd,midOriginalArr,midModifiedArr,quitEarlyArr),midOriginal=midOriginalArr[0],midModified=midModifiedArr[0];if(null!==result)return result;if(!quitEarlyArr[0]){const leftChanges=this.ComputeDiffRecursive(originalStart,midOriginal,modifiedStart,midModified,quitEarlyArr);let rightChanges=[];return rightChanges=quitEarlyArr[0]?[new DiffChange(midOriginal+1,originalEnd-(midOriginal+1)+1,midModified+1,modifiedEnd-(midModified+1)+1)]:this.ComputeDiffRecursive(midOriginal+1,originalEnd,midModified+1,modifiedEnd,quitEarlyArr),this.ConcatenateChanges(leftChanges,rightChanges)}return[new DiffChange(originalStart,originalEnd-originalStart+1,modifiedStart,modifiedEnd-modifiedStart+1)]}WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr){let forwardChanges=null,reverseChanges=null,changeHelper=new diff_DiffChangeHelper,diagonalMin=diagonalForwardStart,diagonalMax=diagonalForwardEnd,diagonalRelative=midOriginalArr[0]-midModifiedArr[0]-diagonalForwardOffset,lastOriginalIndex=-1073741824,historyIndex=this.m_forwardHistory.length-1;do{const diagonal=diagonalRelative+diagonalForwardBase;diagonal===diagonalMin||diagonal<diagonalMax&&forwardPoints[diagonal-1]<forwardPoints[diagonal+1]?(modifiedIndex=(originalIndex=forwardPoints[diagonal+1])-diagonalRelative-diagonalForwardOffset,originalIndex<lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex,changeHelper.AddModifiedElement(originalIndex+1,modifiedIndex),diagonalRelative=diagonal+1-diagonalForwardBase):(modifiedIndex=(originalIndex=forwardPoints[diagonal-1]+1)-diagonalRelative-diagonalForwardOffset,originalIndex<lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex-1,changeHelper.AddOriginalElement(originalIndex,modifiedIndex+1),diagonalRelative=diagonal-1-diagonalForwardBase),historyIndex>=0&&(diagonalForwardBase=(forwardPoints=this.m_forwardHistory[historyIndex])[0],diagonalMin=1,diagonalMax=forwardPoints.length-1)}while(--historyIndex>=-1);if(forwardChanges=changeHelper.getReverseChanges(),quitEarlyArr[0]){let originalStartPoint=midOriginalArr[0]+1,modifiedStartPoint=midModifiedArr[0]+1;if(null!==forwardChanges&&forwardChanges.length>0){const lastForwardChange=forwardChanges[forwardChanges.length-1];originalStartPoint=Math.max(originalStartPoint,lastForwardChange.getOriginalEnd()),modifiedStartPoint=Math.max(modifiedStartPoint,lastForwardChange.getModifiedEnd())}reverseChanges=[new DiffChange(originalStartPoint,originalEnd-originalStartPoint+1,modifiedStartPoint,modifiedEnd-modifiedStartPoint+1)]}else{changeHelper=new diff_DiffChangeHelper,diagonalMin=diagonalReverseStart,diagonalMax=diagonalReverseEnd,diagonalRelative=midOriginalArr[0]-midModifiedArr[0]-diagonalReverseOffset,lastOriginalIndex=1073741824,historyIndex=deltaIsEven?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const diagonal=diagonalRelative+diagonalReverseBase;diagonal===diagonalMin||diagonal<diagonalMax&&reversePoints[diagonal-1]>=reversePoints[diagonal+1]?(modifiedIndex=(originalIndex=reversePoints[diagonal+1]-1)-diagonalRelative-diagonalReverseOffset,originalIndex>lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex+1,changeHelper.AddOriginalElement(originalIndex+1,modifiedIndex+1),diagonalRelative=diagonal+1-diagonalReverseBase):(modifiedIndex=(originalIndex=reversePoints[diagonal-1])-diagonalRelative-diagonalReverseOffset,originalIndex>lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex,changeHelper.AddModifiedElement(originalIndex+1,modifiedIndex+1),diagonalRelative=diagonal-1-diagonalReverseBase),historyIndex>=0&&(diagonalReverseBase=(reversePoints=this.m_reverseHistory[historyIndex])[0],diagonalMin=1,diagonalMax=reversePoints.length-1)}while(--historyIndex>=-1);reverseChanges=changeHelper.getChanges()}return this.ConcatenateChanges(forwardChanges,reverseChanges)}ComputeRecursionPoint(originalStart,originalEnd,modifiedStart,modifiedEnd,midOriginalArr,midModifiedArr,quitEarlyArr){let originalIndex=0,modifiedIndex=0,diagonalForwardStart=0,diagonalForwardEnd=0,diagonalReverseStart=0,diagonalReverseEnd=0;originalStart--,modifiedStart--,midOriginalArr[0]=0,midModifiedArr[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const maxDifferences=originalEnd-originalStart+(modifiedEnd-modifiedStart),numDiagonals=maxDifferences+1,forwardPoints=new Int32Array(numDiagonals),reversePoints=new Int32Array(numDiagonals),diagonalForwardBase=modifiedEnd-modifiedStart,diagonalReverseBase=originalEnd-originalStart,diagonalForwardOffset=originalStart-modifiedStart,diagonalReverseOffset=originalEnd-modifiedEnd,deltaIsEven=(diagonalReverseBase-diagonalForwardBase)%2==0;forwardPoints[diagonalForwardBase]=originalStart,reversePoints[diagonalReverseBase]=originalEnd,quitEarlyArr[0]=!1;for(let numDifferences=1;numDifferences<=maxDifferences/2+1;numDifferences++){let furthestOriginalIndex=0,furthestModifiedIndex=0;diagonalForwardStart=this.ClipDiagonalBound(diagonalForwardBase-numDifferences,numDifferences,diagonalForwardBase,numDiagonals),diagonalForwardEnd=this.ClipDiagonalBound(diagonalForwardBase+numDifferences,numDifferences,diagonalForwardBase,numDiagonals);for(let diagonal=diagonalForwardStart;diagonal<=diagonalForwardEnd;diagonal+=2){originalIndex=diagonal===diagonalForwardStart||diagonal<diagonalForwardEnd&&forwardPoints[diagonal-1]<forwardPoints[diagonal+1]?forwardPoints[diagonal+1]:forwardPoints[diagonal-1]+1,modifiedIndex=originalIndex-(diagonal-diagonalForwardBase)-diagonalForwardOffset;const tempOriginalIndex=originalIndex;for(;originalIndex<originalEnd&&modifiedIndex<modifiedEnd&&this.ElementsAreEqual(originalIndex+1,modifiedIndex+1);)originalIndex++,modifiedIndex++;if(forwardPoints[diagonal]=originalIndex,originalIndex+modifiedIndex>furthestOriginalIndex+furthestModifiedIndex&&(furthestOriginalIndex=originalIndex,furthestModifiedIndex=modifiedIndex),!deltaIsEven&&Math.abs(diagonal-diagonalReverseBase)<=numDifferences-1&&originalIndex>=reversePoints[diagonal])return midOriginalArr[0]=originalIndex,midModifiedArr[0]=modifiedIndex,tempOriginalIndex<=reversePoints[diagonal]&&numDifferences<=1448?this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr):null}const matchLengthOfLongest=(furthestOriginalIndex-originalStart+(furthestModifiedIndex-modifiedStart)-numDifferences)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(furthestOriginalIndex,matchLengthOfLongest))return quitEarlyArr[0]=!0,midOriginalArr[0]=furthestOriginalIndex,midModifiedArr[0]=furthestModifiedIndex,matchLengthOfLongest>0&&numDifferences<=1448?this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr):(originalStart++,modifiedStart++,[new DiffChange(originalStart,originalEnd-originalStart+1,modifiedStart,modifiedEnd-modifiedStart+1)]);diagonalReverseStart=this.ClipDiagonalBound(diagonalReverseBase-numDifferences,numDifferences,diagonalReverseBase,numDiagonals),diagonalReverseEnd=this.ClipDiagonalBound(diagonalReverseBase+numDifferences,numDifferences,diagonalReverseBase,numDiagonals);for(let diagonal=diagonalReverseStart;diagonal<=diagonalReverseEnd;diagonal+=2){originalIndex=diagonal===diagonalReverseStart||diagonal<diagonalReverseEnd&&reversePoints[diagonal-1]>=reversePoints[diagonal+1]?reversePoints[diagonal+1]-1:reversePoints[diagonal-1],modifiedIndex=originalIndex-(diagonal-diagonalReverseBase)-diagonalReverseOffset;const tempOriginalIndex=originalIndex;for(;originalIndex>originalStart&&modifiedIndex>modifiedStart&&this.ElementsAreEqual(originalIndex,modifiedIndex);)originalIndex--,modifiedIndex--;if(reversePoints[diagonal]=originalIndex,deltaIsEven&&Math.abs(diagonal-diagonalForwardBase)<=numDifferences&&originalIndex<=forwardPoints[diagonal])return midOriginalArr[0]=originalIndex,midModifiedArr[0]=modifiedIndex,tempOriginalIndex>=forwardPoints[diagonal]&&numDifferences<=1448?this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr):null}if(numDifferences<=1447){let temp=new Int32Array(diagonalForwardEnd-diagonalForwardStart+2);temp[0]=diagonalForwardBase-diagonalForwardStart+1,MyArray.Copy2(forwardPoints,diagonalForwardStart,temp,1,diagonalForwardEnd-diagonalForwardStart+1),this.m_forwardHistory.push(temp),temp=new Int32Array(diagonalReverseEnd-diagonalReverseStart+2),temp[0]=diagonalReverseBase-diagonalReverseStart+1,MyArray.Copy2(reversePoints,diagonalReverseStart,temp,1,diagonalReverseEnd-diagonalReverseStart+1),this.m_reverseHistory.push(temp)}}return this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr)}PrettifyChanges(changes){for(let i=0;i<changes.length;i++){const change=changes[i],originalStop=i<changes.length-1?changes[i+1].originalStart:this._originalElementsOrHash.length,modifiedStop=i<changes.length-1?changes[i+1].modifiedStart:this._modifiedElementsOrHash.length,checkOriginal=change.originalLength>0,checkModified=change.modifiedLength>0;for(;change.originalStart+change.originalLength<originalStop&&change.modifiedStart+change.modifiedLength<modifiedStop&&(!checkOriginal||this.OriginalElementsAreEqual(change.originalStart,change.originalStart+change.originalLength))&&(!checkModified||this.ModifiedElementsAreEqual(change.modifiedStart,change.modifiedStart+change.modifiedLength));)change.originalStart++,change.modifiedStart++;let mergedChangeArr=[null];i<changes.length-1&&this.ChangesOverlap(changes[i],changes[i+1],mergedChangeArr)&&(changes[i]=mergedChangeArr[0],changes.splice(i+1,1),i--)}for(let i=changes.length-1;i>=0;i--){const change=changes[i];let originalStop=0,modifiedStop=0;if(i>0){const prevChange=changes[i-1];prevChange.originalLength>0&&(originalStop=prevChange.originalStart+prevChange.originalLength),prevChange.modifiedLength>0&&(modifiedStop=prevChange.modifiedStart+prevChange.modifiedLength)}const checkOriginal=change.originalLength>0,checkModified=change.modifiedLength>0;let bestDelta=0,bestScore=this._boundaryScore(change.originalStart,change.originalLength,change.modifiedStart,change.modifiedLength);for(let delta=1;;delta++){const originalStart=change.originalStart-delta,modifiedStart=change.modifiedStart-delta;if(originalStart<originalStop||modifiedStart<modifiedStop)break;if(checkOriginal&&!this.OriginalElementsAreEqual(originalStart,originalStart+change.originalLength))break;if(checkModified&&!this.ModifiedElementsAreEqual(modifiedStart,modifiedStart+change.modifiedLength))break;const score=this._boundaryScore(originalStart,change.originalLength,modifiedStart,change.modifiedLength);score>bestScore&&(bestScore=score,bestDelta=delta)}change.originalStart-=bestDelta,change.modifiedStart-=bestDelta}return changes}_OriginalIsBoundary(index){return index<=0||index>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[index])}_OriginalRegionIsBoundary(originalStart,originalLength){if(this._OriginalIsBoundary(originalStart)||this._OriginalIsBoundary(originalStart-1))return!0;if(originalLength>0){const originalEnd=originalStart+originalLength;if(this._OriginalIsBoundary(originalEnd-1)||this._OriginalIsBoundary(originalEnd))return!0}return!1}_ModifiedIsBoundary(index){return index<=0||index>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[index])}_ModifiedRegionIsBoundary(modifiedStart,modifiedLength){if(this._ModifiedIsBoundary(modifiedStart)||this._ModifiedIsBoundary(modifiedStart-1))return!0;if(modifiedLength>0){const modifiedEnd=modifiedStart+modifiedLength;if(this._ModifiedIsBoundary(modifiedEnd-1)||this._ModifiedIsBoundary(modifiedEnd))return!0}return!1}_boundaryScore(originalStart,originalLength,modifiedStart,modifiedLength){return(this._OriginalRegionIsBoundary(originalStart,originalLength)?1:0)+(this._ModifiedRegionIsBoundary(modifiedStart,modifiedLength)?1:0)}ConcatenateChanges(left,right){let mergedChangeArr=[];if(0===left.length||0===right.length)return right.length>0?right:left;if(this.ChangesOverlap(left[left.length-1],right[0],mergedChangeArr)){const result=new Array(left.length+right.length-1);return MyArray.Copy(left,0,result,0,left.length-1),result[left.length-1]=mergedChangeArr[0],MyArray.Copy(right,1,result,left.length,right.length-1),result}{const result=new Array(left.length+right.length);return MyArray.Copy(left,0,result,0,left.length),MyArray.Copy(right,0,result,left.length,right.length),result}}ChangesOverlap(left,right,mergedChangeArr){if(Debug.Assert(left.originalStart<=right.originalStart,"Left change is not less than or equal to right change"),Debug.Assert(left.modifiedStart<=right.modifiedStart,"Left change is not less than or equal to right change"),left.originalStart+left.originalLength>=right.originalStart||left.modifiedStart+left.modifiedLength>=right.modifiedStart){const originalStart=left.originalStart;let originalLength=left.originalLength;const modifiedStart=left.modifiedStart;let modifiedLength=left.modifiedLength;return left.originalStart+left.originalLength>=right.originalStart&&(originalLength=right.originalStart+right.originalLength-left.originalStart),left.modifiedStart+left.modifiedLength>=right.modifiedStart&&(modifiedLength=right.modifiedStart+right.modifiedLength-left.modifiedStart),mergedChangeArr[0]=new DiffChange(originalStart,originalLength,modifiedStart,modifiedLength),!0}return mergedChangeArr[0]=null,!1}ClipDiagonalBound(diagonal,numDifferences,diagonalBaseIndex,numDiagonals){if(diagonal>=0&&diagonal<numDiagonals)return diagonal;const diffEven=numDifferences%2==0;if(diagonal<0){return diffEven===(diagonalBaseIndex%2==0)?0:1}return diffEven===((numDiagonals-diagonalBaseIndex-1)%2==0)?numDiagonals-1:numDiagonals-2}}var process=__webpack_require__(1);class ErrorInvalidArgType extends Error{constructor(name,expected,actual){let determiner;"string"==typeof expected&&0===expected.indexOf("not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be";const type=-1!==name.indexOf(".")?"property":"argument";let msg=`The "${name}" ${type} ${determiner} of type ${expected}`;msg+=". Received type "+typeof actual,super(msg),this.code="ERR_INVALID_ARG_TYPE"}}function validateString(value,name){if("string"!=typeof value)throw new ErrorInvalidArgType(name,"string",value)}function isPathSeparator(code){return 47===code||92===code}function isPosixPathSeparator(code){return 47===code}function isWindowsDeviceRoot(code){return code>=65&&code<=90||code>=97&&code<=122}function normalizeString(path,allowAboveRoot,separator,isPathSeparator){let res="",lastSegmentLength=0,lastSlash=-1,dots=0,code=0;for(let i=0;i<=path.length;++i){if(i<path.length)code=path.charCodeAt(i);else{if(isPathSeparator(code))break;code=47}if(isPathSeparator(code)){if(lastSlash===i-1||1===dots);else if(2===dots){if(res.length<2||2!==lastSegmentLength||46!==res.charCodeAt(res.length-1)||46!==res.charCodeAt(res.length-2)){if(res.length>2){const lastSlashIndex=res.lastIndexOf(separator);-1===lastSlashIndex?(res="",lastSegmentLength=0):(res=res.slice(0,lastSlashIndex),lastSegmentLength=res.length-1-res.lastIndexOf(separator)),lastSlash=i,dots=0;continue}if(0!==res.length){res="",lastSegmentLength=0,lastSlash=i,dots=0;continue}}allowAboveRoot&&(res+=res.length>0?separator+"..":"..",lastSegmentLength=2)}else res.length>0?res+=`${separator}${path.slice(lastSlash+1,i)}`:res=path.slice(lastSlash+1,i),lastSegmentLength=i-lastSlash-1;lastSlash=i,dots=0}else 46===code&&-1!==dots?++dots:dots=-1}return res}function _format(sep,pathObject){if(null===pathObject||"object"!=typeof pathObject)throw new ErrorInvalidArgType("pathObject","Object",pathObject);const dir=pathObject.dir||pathObject.root,base=pathObject.base||`${pathObject.name||""}${pathObject.ext||""}`;return dir?dir===pathObject.root?`${dir}${base}`:`${dir}${sep}${base}`:base}const win32={resolve(...pathSegments){let resolvedDevice="",resolvedTail="",resolvedAbsolute=!1;for(let i=pathSegments.length-1;i>=-1;i--){let path;if(i>=0){if(path=pathSegments[i],validateString(path,"path"),0===path.length)continue}else 0===resolvedDevice.length?path=process.a():(path=process.b["="+resolvedDevice]||process.a(),(void 0===path||path.slice(0,2).toLowerCase()!==resolvedDevice.toLowerCase()&&92===path.charCodeAt(2))&&(path=resolvedDevice+"\\"));const len=path.length;let rootEnd=0,device="",isAbsolute=!1;const code=path.charCodeAt(0);if(1===len)isPathSeparator(code)&&(rootEnd=1,isAbsolute=!0);else if(isPathSeparator(code))if(isAbsolute=!0,isPathSeparator(path.charCodeAt(1))){let j=2,last=j;for(;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){const firstPart=path.slice(last,j);for(last=j;j<len&&isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){for(last=j;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;j!==len&&j===last||(device=`\\\\${firstPart}\\${path.slice(last,j)}`,rootEnd=j)}}}else rootEnd=1;else isWindowsDeviceRoot(code)&&58===path.charCodeAt(1)&&(device=path.slice(0,2),rootEnd=2,len>2&&isPathSeparator(path.charCodeAt(2))&&(isAbsolute=!0,rootEnd=3));if(device.length>0)if(resolvedDevice.length>0){if(device.toLowerCase()!==resolvedDevice.toLowerCase())continue}else resolvedDevice=device;if(resolvedAbsolute){if(resolvedDevice.length>0)break}else if(resolvedTail=`${path.slice(rootEnd)}\\${resolvedTail}`,resolvedAbsolute=isAbsolute,isAbsolute&&resolvedDevice.length>0)break}return resolvedTail=normalizeString(resolvedTail,!resolvedAbsolute,"\\",isPathSeparator),resolvedAbsolute?`${resolvedDevice}\\${resolvedTail}`:`${resolvedDevice}${resolvedTail}`||"."},normalize(path){validateString(path,"path");const len=path.length;if(0===len)return".";let device,rootEnd=0,isAbsolute=!1;const code=path.charCodeAt(0);if(1===len)return isPosixPathSeparator(code)?"\\":path;if(isPathSeparator(code))if(isAbsolute=!0,isPathSeparator(path.charCodeAt(1))){let j=2,last=j;for(;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){const firstPart=path.slice(last,j);for(last=j;j<len&&isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){for(last=j;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;if(j===len)return`\\\\${firstPart}\\${path.slice(last)}\\`;j!==last&&(device=`\\\\${firstPart}\\${path.slice(last,j)}`,rootEnd=j)}}}else rootEnd=1;else isWindowsDeviceRoot(code)&&58===path.charCodeAt(1)&&(device=path.slice(0,2),rootEnd=2,len>2&&isPathSeparator(path.charCodeAt(2))&&(isAbsolute=!0,rootEnd=3));let tail=rootEnd<len?normalizeString(path.slice(rootEnd),!isAbsolute,"\\",isPathSeparator):"";return 0!==tail.length||isAbsolute||(tail="."),tail.length>0&&isPathSeparator(path.charCodeAt(len-1))&&(tail+="\\"),void 0===device?isAbsolute?"\\"+tail:tail:isAbsolute?`${device}\\${tail}`:`${device}${tail}`},isAbsolute(path){validateString(path,"path");const len=path.length;if(0===len)return!1;const code=path.charCodeAt(0);return isPathSeparator(code)||len>2&&isWindowsDeviceRoot(code)&&58===path.charCodeAt(1)&&isPathSeparator(path.charCodeAt(2))},join(...paths){if(0===paths.length)return".";let joined,firstPart;for(let i=0;i<paths.length;++i){const arg=paths[i];validateString(arg,"path"),arg.length>0&&(void 0===joined?joined=firstPart=arg:joined+="\\"+arg)}if(void 0===joined)return".";let needsReplace=!0,slashCount=0;if("string"==typeof firstPart&&isPathSeparator(firstPart.charCodeAt(0))){++slashCount;const firstLen=firstPart.length;firstLen>1&&isPathSeparator(firstPart.charCodeAt(1))&&(++slashCount,firstLen>2&&(isPathSeparator(firstPart.charCodeAt(2))?++slashCount:needsReplace=!1))}if(needsReplace){for(;slashCount<joined.length&&isPathSeparator(joined.charCodeAt(slashCount));)slashCount++;slashCount>=2&&(joined="\\"+joined.slice(slashCount))}return win32.normalize(joined)},relative(from,to){if(validateString(from,"from"),validateString(to,"to"),from===to)return"";const fromOrig=win32.resolve(from),toOrig=win32.resolve(to);if(fromOrig===toOrig)return"";if((from=fromOrig.toLowerCase())===(to=toOrig.toLowerCase()))return"";let fromStart=0;for(;fromStart<from.length&&92===from.charCodeAt(fromStart);)fromStart++;let fromEnd=from.length;for(;fromEnd-1>fromStart&&92===from.charCodeAt(fromEnd-1);)fromEnd--;const fromLen=fromEnd-fromStart;let toStart=0;for(;toStart<to.length&&92===to.charCodeAt(toStart);)toStart++;let toEnd=to.length;for(;toEnd-1>toStart&&92===to.charCodeAt(toEnd-1);)toEnd--;const toLen=toEnd-toStart,length=fromLen<toLen?fromLen:toLen;let lastCommonSep=-1,i=0;for(;i<length;i++){const fromCode=from.charCodeAt(fromStart+i);if(fromCode!==to.charCodeAt(toStart+i))break;92===fromCode&&(lastCommonSep=i)}if(i!==length){if(-1===lastCommonSep)return toOrig}else{if(toLen>length){if(92===to.charCodeAt(toStart+i))return toOrig.slice(toStart+i+1);if(2===i)return toOrig.slice(toStart+i)}fromLen>length&&(92===from.charCodeAt(fromStart+i)?lastCommonSep=i:2===i&&(lastCommonSep=3)),-1===lastCommonSep&&(lastCommonSep=0)}let out="";for(i=fromStart+lastCommonSep+1;i<=fromEnd;++i)i!==fromEnd&&92!==from.charCodeAt(i)||(out+=0===out.length?"..":"\\..");return toStart+=lastCommonSep,out.length>0?`${out}${toOrig.slice(toStart,toEnd)}`:(92===toOrig.charCodeAt(toStart)&&++toStart,toOrig.slice(toStart,toEnd))},toNamespacedPath(path){if("string"!=typeof path)return path;if(0===path.length)return"";const resolvedPath=win32.resolve(path);if(resolvedPath.length<=2)return path;if(92===resolvedPath.charCodeAt(0)){if(92===resolvedPath.charCodeAt(1)){const code=resolvedPath.charCodeAt(2);if(63!==code&&46!==code)return"\\\\?\\UNC\\"+resolvedPath.slice(2)}}else if(isWindowsDeviceRoot(resolvedPath.charCodeAt(0))&&58===resolvedPath.charCodeAt(1)&&92===resolvedPath.charCodeAt(2))return"\\\\?\\"+resolvedPath;return path},dirname(path){validateString(path,"path");const len=path.length;if(0===len)return".";let rootEnd=-1,offset=0;const code=path.charCodeAt(0);if(1===len)return isPathSeparator(code)?path:".";if(isPathSeparator(code)){if(rootEnd=offset=1,isPathSeparator(path.charCodeAt(1))){let j=2,last=j;for(;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){for(last=j;j<len&&isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){for(last=j;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;if(j===len)return path;j!==last&&(rootEnd=offset=j+1)}}}}else isWindowsDeviceRoot(code)&&58===path.charCodeAt(1)&&(rootEnd=len>2&&isPathSeparator(path.charCodeAt(2))?3:2,offset=rootEnd);let end=-1,matchedSlash=!0;for(let i=len-1;i>=offset;--i)if(isPathSeparator(path.charCodeAt(i))){if(!matchedSlash){end=i;break}}else matchedSlash=!1;if(-1===end){if(-1===rootEnd)return".";end=rootEnd}return path.slice(0,end)},basename(path,ext){void 0!==ext&&validateString(ext,"ext"),validateString(path,"path");let i,start=0,end=-1,matchedSlash=!0;if(path.length>=2&&isWindowsDeviceRoot(path.charCodeAt(0))&&58===path.charCodeAt(1)&&(start=2),void 0!==ext&&ext.length>0&&ext.length<=path.length){if(ext===path)return"";let extIdx=ext.length-1,firstNonSlashEnd=-1;for(i=path.length-1;i>=start;--i){const code=path.charCodeAt(i);if(isPathSeparator(code)){if(!matchedSlash){start=i+1;break}}else-1===firstNonSlashEnd&&(matchedSlash=!1,firstNonSlashEnd=i+1),extIdx>=0&&(code===ext.charCodeAt(extIdx)?-1==--extIdx&&(end=i):(extIdx=-1,end=firstNonSlashEnd))}return start===end?end=firstNonSlashEnd:-1===end&&(end=path.length),path.slice(start,end)}for(i=path.length-1;i>=start;--i)if(isPathSeparator(path.charCodeAt(i))){if(!matchedSlash){start=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1);return-1===end?"":path.slice(start,end)},extname(path){validateString(path,"path");let start=0,startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0;path.length>=2&&58===path.charCodeAt(1)&&isWindowsDeviceRoot(path.charCodeAt(0))&&(start=startPart=2);for(let i=path.length-1;i>=start;--i){const code=path.charCodeAt(i);if(isPathSeparator(code)){if(!matchedSlash){startPart=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1)}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?"":path.slice(startDot,end)},format:_format.bind(null,"\\"),parse(path){validateString(path,"path");const ret={root:"",dir:"",base:"",ext:"",name:""};if(0===path.length)return ret;const len=path.length;let rootEnd=0,code=path.charCodeAt(0);if(1===len)return isPathSeparator(code)?(ret.root=ret.dir=path,ret):(ret.base=ret.name=path,ret);if(isPathSeparator(code)){if(rootEnd=1,isPathSeparator(path.charCodeAt(1))){let j=2,last=j;for(;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){for(last=j;j<len&&isPathSeparator(path.charCodeAt(j));)j++;if(j<len&&j!==last){for(last=j;j<len&&!isPathSeparator(path.charCodeAt(j));)j++;j===len?rootEnd=j:j!==last&&(rootEnd=j+1)}}}}else if(isWindowsDeviceRoot(code)&&58===path.charCodeAt(1)){if(len<=2)return ret.root=ret.dir=path,ret;if(rootEnd=2,isPathSeparator(path.charCodeAt(2))){if(3===len)return ret.root=ret.dir=path,ret;rootEnd=3}}rootEnd>0&&(ret.root=path.slice(0,rootEnd));let startDot=-1,startPart=rootEnd,end=-1,matchedSlash=!0,i=path.length-1,preDotState=0;for(;i>=rootEnd;--i)if(code=path.charCodeAt(i),isPathSeparator(code)){if(!matchedSlash){startPart=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);return-1!==end&&(-1===startDot||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?ret.base=ret.name=path.slice(startPart,end):(ret.name=path.slice(startPart,startDot),ret.base=path.slice(startPart,end),ret.ext=path.slice(startDot,end))),ret.dir=startPart>0&&startPart!==rootEnd?path.slice(0,startPart-1):ret.root,ret},sep:"\\",delimiter:";",win32:null,posix:null},posix={resolve(...pathSegments){let resolvedPath="",resolvedAbsolute=!1;for(let i=pathSegments.length-1;i>=-1&&!resolvedAbsolute;i--){const path=i>=0?pathSegments[i]:process.a();validateString(path,"path"),0!==path.length&&(resolvedPath=`${path}/${resolvedPath}`,resolvedAbsolute=47===path.charCodeAt(0))}return resolvedPath=normalizeString(resolvedPath,!resolvedAbsolute,"/",isPosixPathSeparator),resolvedAbsolute?"/"+resolvedPath:resolvedPath.length>0?resolvedPath:"."},normalize(path){if(validateString(path,"path"),0===path.length)return".";const isAbsolute=47===path.charCodeAt(0),trailingSeparator=47===path.charCodeAt(path.length-1);return 0===(path=normalizeString(path,!isAbsolute,"/",isPosixPathSeparator)).length?isAbsolute?"/":trailingSeparator?"./":".":(trailingSeparator&&(path+="/"),isAbsolute?"/"+path:path)},isAbsolute:path=>(validateString(path,"path"),path.length>0&&47===path.charCodeAt(0)),join(...paths){if(0===paths.length)return".";let joined;for(let i=0;i<paths.length;++i){const arg=paths[i];validateString(arg,"path"),arg.length>0&&(void 0===joined?joined=arg:joined+="/"+arg)}return void 0===joined?".":posix.normalize(joined)},relative(from,to){if(validateString(from,"from"),validateString(to,"to"),from===to)return"";if((from=posix.resolve(from))===(to=posix.resolve(to)))return"";const fromEnd=from.length,fromLen=fromEnd-1,toLen=to.length-1,length=fromLen<toLen?fromLen:toLen;let lastCommonSep=-1,i=0;for(;i<length;i++){const fromCode=from.charCodeAt(1+i);if(fromCode!==to.charCodeAt(1+i))break;47===fromCode&&(lastCommonSep=i)}if(i===length)if(toLen>length){if(47===to.charCodeAt(1+i))return to.slice(1+i+1);if(0===i)return to.slice(1+i)}else fromLen>length&&(47===from.charCodeAt(1+i)?lastCommonSep=i:0===i&&(lastCommonSep=0));let out="";for(i=1+lastCommonSep+1;i<=fromEnd;++i)i!==fromEnd&&47!==from.charCodeAt(i)||(out+=0===out.length?"..":"/..");return`${out}${to.slice(1+lastCommonSep)}`},toNamespacedPath:path=>path,dirname(path){if(validateString(path,"path"),0===path.length)return".";const hasRoot=47===path.charCodeAt(0);let end=-1,matchedSlash=!0;for(let i=path.length-1;i>=1;--i)if(47===path.charCodeAt(i)){if(!matchedSlash){end=i;break}}else matchedSlash=!1;return-1===end?hasRoot?"/":".":hasRoot&&1===end?"//":path.slice(0,end)},basename(path,ext){void 0!==ext&&validateString(ext,"ext"),validateString(path,"path");let i,start=0,end=-1,matchedSlash=!0;if(void 0!==ext&&ext.length>0&&ext.length<=path.length){if(ext===path)return"";let extIdx=ext.length-1,firstNonSlashEnd=-1;for(i=path.length-1;i>=0;--i){const code=path.charCodeAt(i);if(47===code){if(!matchedSlash){start=i+1;break}}else-1===firstNonSlashEnd&&(matchedSlash=!1,firstNonSlashEnd=i+1),extIdx>=0&&(code===ext.charCodeAt(extIdx)?-1==--extIdx&&(end=i):(extIdx=-1,end=firstNonSlashEnd))}return start===end?end=firstNonSlashEnd:-1===end&&(end=path.length),path.slice(start,end)}for(i=path.length-1;i>=0;--i)if(47===path.charCodeAt(i)){if(!matchedSlash){start=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1);return-1===end?"":path.slice(start,end)},extname(path){validateString(path,"path");let startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0;for(let i=path.length-1;i>=0;--i){const code=path.charCodeAt(i);if(47!==code)-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?"":path.slice(startDot,end)},format:_format.bind(null,"/"),parse(path){validateString(path,"path");const ret={root:"",dir:"",base:"",ext:"",name:""};if(0===path.length)return ret;const isAbsolute=47===path.charCodeAt(0);let start;isAbsolute?(ret.root="/",start=1):start=0;let startDot=-1,startPart=0,end=-1,matchedSlash=!0,i=path.length-1,preDotState=0;for(;i>=start;--i){const code=path.charCodeAt(i);if(47!==code)-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}}if(-1!==end){const start=0===startPart&&isAbsolute?1:startPart;-1===startDot||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?ret.base=ret.name=path.slice(start,end):(ret.name=path.slice(start,startDot),ret.base=path.slice(start,end),ret.ext=path.slice(startDot,end))}return startPart>0?ret.dir=path.slice(0,startPart-1):isAbsolute&&(ret.dir="/"),ret},sep:"/",delimiter:":",win32:null,posix:null};posix.win32=win32.win32=win32,posix.posix=win32.posix=posix;"win32"===process.c?win32.normalize:posix.normalize,"win32"===process.c?win32.resolve:posix.resolve,"win32"===process.c?win32.relative:posix.relative,"win32"===process.c?win32.dirname:posix.dirname,"win32"===process.c?win32.basename:posix.basename,"win32"===process.c?win32.extname:posix.extname,"win32"===process.c?win32.sep:posix.sep;const _schemePattern=/^\w[\w\d+.-]*$/,_singleSlashStart=/^\//,_doubleSlashStart=/^\/\//;const _slash="/",_regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class uri_URI{constructor(schemeOrData,authority,path,query,fragment,_strict=!1){"object"==typeof schemeOrData?(this.scheme=schemeOrData.scheme||"",this.authority=schemeOrData.authority||"",this.path=schemeOrData.path||"",this.query=schemeOrData.query||"",this.fragment=schemeOrData.fragment||""):(this.scheme=function _schemeFix(scheme,_strict){return scheme||_strict?scheme:"file"}(schemeOrData,_strict),this.authority=authority||"",this.path=function _referenceResolution(scheme,path){switch(scheme){case"https":case"http":case"file":path?path[0]!==_slash&&(path=_slash+path):path=_slash}return path}(this.scheme,path||""),this.query=query||"",this.fragment=fragment||"",function _validateUri(ret,_strict){if(!ret.scheme&&_strict)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${ret.authority}", path: "${ret.path}", query: "${ret.query}", fragment: "${ret.fragment}"}`);if(ret.scheme&&!_schemePattern.test(ret.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(ret.path)if(ret.authority){if(!_singleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(_doubleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,_strict))}static isUri(thing){return thing instanceof uri_URI||!!thing&&("string"==typeof thing.authority&&"string"==typeof thing.fragment&&"string"==typeof thing.path&&"string"==typeof thing.query&&"string"==typeof thing.scheme&&"function"==typeof thing.fsPath&&"function"==typeof thing.with&&"function"==typeof thing.toString)}get fsPath(){return uriToFsPath(this,!1)}with(change){if(!change)return this;let{scheme:scheme,authority:authority,path:path,query:query,fragment:fragment}=change;return void 0===scheme?scheme=this.scheme:null===scheme&&(scheme=""),void 0===authority?authority=this.authority:null===authority&&(authority=""),void 0===path?path=this.path:null===path&&(path=""),void 0===query?query=this.query:null===query&&(query=""),void 0===fragment?fragment=this.fragment:null===fragment&&(fragment=""),scheme===this.scheme&&authority===this.authority&&path===this.path&&query===this.query&&fragment===this.fragment?this:new Uri(scheme,authority,path,query,fragment)}static parse(value,_strict=!1){const match=_regexp.exec(value);return match?new Uri(match[2]||"",percentDecode(match[4]||""),percentDecode(match[5]||""),percentDecode(match[7]||""),percentDecode(match[9]||""),_strict):new Uri("","","","","")}static file(path){let authority="";if(platform.d&&(path=path.replace(/\\/g,_slash)),path[0]===_slash&&path[1]===_slash){const idx=path.indexOf(_slash,2);-1===idx?(authority=path.substring(2),path=_slash):(authority=path.substring(2,idx),path=path.substring(idx)||_slash)}return new Uri("file",authority,path,"","")}static from(components){return new Uri(components.scheme,components.authority,components.path,components.query,components.fragment)}static joinPath(uri,...pathFragment){if(!uri.path)throw new Error("[UriError]: cannot call joinPaths on URI without path");let newPath;return newPath=platform.d&&"file"===uri.scheme?uri_URI.file(win32.join(uriToFsPath(uri,!0),...pathFragment)).path:posix.join(uri.path,...pathFragment),uri.with({path:newPath})}toString(skipEncoding=!1){return _asFormatted(this,skipEncoding)}toJSON(){return this}static revive(data){if(data){if(data instanceof uri_URI)return data;{const result=new Uri(data);return result._formatted=data.external,result._fsPath=data._sep===_pathSepMarker?data.fsPath:null,result}}return data}}const _pathSepMarker=platform.d?1:void 0;class Uri extends uri_URI{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=uriToFsPath(this,!1)),this._fsPath}toString(skipEncoding=!1){return skipEncoding?_asFormatted(this,!0):(this._formatted||(this._formatted=_asFormatted(this,!1)),this._formatted)}toJSON(){const res={$mid:1};return this._fsPath&&(res.fsPath=this._fsPath,res._sep=_pathSepMarker),this._formatted&&(res.external=this._formatted),this.path&&(res.path=this.path),this.scheme&&(res.scheme=this.scheme),this.authority&&(res.authority=this.authority),this.query&&(res.query=this.query),this.fragment&&(res.fragment=this.fragment),res}}const encodeTable={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function encodeURIComponentFast(uriComponent,allowSlash){let res=void 0,nativeEncodePos=-1;for(let pos=0;pos<uriComponent.length;pos++){const code=uriComponent.charCodeAt(pos);if(code>=97&&code<=122||code>=65&&code<=90||code>=48&&code<=57||45===code||46===code||95===code||126===code||allowSlash&&47===code)-1!==nativeEncodePos&&(res+=encodeURIComponent(uriComponent.substring(nativeEncodePos,pos)),nativeEncodePos=-1),void 0!==res&&(res+=uriComponent.charAt(pos));else{void 0===res&&(res=uriComponent.substr(0,pos));const escaped=encodeTable[code];void 0!==escaped?(-1!==nativeEncodePos&&(res+=encodeURIComponent(uriComponent.substring(nativeEncodePos,pos)),nativeEncodePos=-1),res+=escaped):-1===nativeEncodePos&&(nativeEncodePos=pos)}}return-1!==nativeEncodePos&&(res+=encodeURIComponent(uriComponent.substring(nativeEncodePos))),void 0!==res?res:uriComponent}function encodeURIComponentMinimal(path){let res=void 0;for(let pos=0;pos<path.length;pos++){const code=path.charCodeAt(pos);35===code||63===code?(void 0===res&&(res=path.substr(0,pos)),res+=encodeTable[code]):void 0!==res&&(res+=path[pos])}return void 0!==res?res:path}function uriToFsPath(uri,keepDriveLetterCasing){let value;return value=uri.authority&&uri.path.length>1&&"file"===uri.scheme?`//${uri.authority}${uri.path}`:47===uri.path.charCodeAt(0)&&(uri.path.charCodeAt(1)>=65&&uri.path.charCodeAt(1)<=90||uri.path.charCodeAt(1)>=97&&uri.path.charCodeAt(1)<=122)&&58===uri.path.charCodeAt(2)?keepDriveLetterCasing?uri.path.substr(1):uri.path[1].toLowerCase()+uri.path.substr(2):uri.path,platform.d&&(value=value.replace(/\//g,"\\")),value}function _asFormatted(uri,skipEncoding){const encoder=skipEncoding?encodeURIComponentMinimal:encodeURIComponentFast;let res="",{scheme:scheme,authority:authority,path:path,query:query,fragment:fragment}=uri;if(scheme&&(res+=scheme,res+=":"),(authority||"file"===scheme)&&(res+=_slash,res+=_slash),authority){let idx=authority.indexOf("@");if(-1!==idx){const userinfo=authority.substr(0,idx);authority=authority.substr(idx+1),idx=userinfo.indexOf(":"),-1===idx?res+=encoder(userinfo,!1):(res+=encoder(userinfo.substr(0,idx),!1),res+=":",res+=encoder(userinfo.substr(idx+1),!1)),res+="@"}authority=authority.toLowerCase(),idx=authority.indexOf(":"),-1===idx?res+=encoder(authority,!1):(res+=encoder(authority.substr(0,idx),!1),res+=authority.substr(idx))}if(path){if(path.length>=3&&47===path.charCodeAt(0)&&58===path.charCodeAt(2)){const code=path.charCodeAt(1);code>=65&&code<=90&&(path=`/${String.fromCharCode(code+32)}:${path.substr(3)}`)}else if(path.length>=2&&58===path.charCodeAt(1)){const code=path.charCodeAt(0);code>=65&&code<=90&&(path=`${String.fromCharCode(code+32)}:${path.substr(2)}`)}res+=encoder(path,!0)}return query&&(res+="?",res+=encoder(query,!1)),fragment&&(res+="#",res+=skipEncoding?fragment:encodeURIComponentFast(fragment,!1)),res}const _rEncodedAsHex=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function percentDecode(str){return str.match(_rEncodedAsHex)?str.replace(_rEncodedAsHex,match=>function decodeURIComponentGraceful(str){try{return decodeURIComponent(str)}catch(_a){return str.length>3?str.substr(0,3)+decodeURIComponentGraceful(str.substr(3)):str}}(match)):str}class Position{constructor(lineNumber,column){this.lineNumber=lineNumber,this.column=column}with(newLineNumber=this.lineNumber,newColumn=this.column){return newLineNumber===this.lineNumber&&newColumn===this.column?this:new Position(newLineNumber,newColumn)}delta(deltaLineNumber=0,deltaColumn=0){return this.with(this.lineNumber+deltaLineNumber,this.column+deltaColumn)}equals(other){return Position.equals(this,other)}static equals(a,b){return!a&&!b||!!a&&!!b&&a.lineNumber===b.lineNumber&&a.column===b.column}isBefore(other){return Position.isBefore(this,other)}static isBefore(a,b){return a.lineNumber<b.lineNumber||!(b.lineNumber<a.lineNumber)&&a.column<b.column}isBeforeOrEqual(other){return Position.isBeforeOrEqual(this,other)}static isBeforeOrEqual(a,b){return a.lineNumber<b.lineNumber||!(b.lineNumber<a.lineNumber)&&a.column<=b.column}static compare(a,b){let aLineNumber=0|a.lineNumber,bLineNumber=0|b.lineNumber;if(aLineNumber===bLineNumber){return(0|a.column)-(0|b.column)}return aLineNumber-bLineNumber}clone(){return new Position(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(pos){return new Position(pos.lineNumber,pos.column)}static isIPosition(obj){return obj&&"number"==typeof obj.lineNumber&&"number"==typeof obj.column}}class range_Range{constructor(startLineNumber,startColumn,endLineNumber,endColumn){startLineNumber>endLineNumber||startLineNumber===endLineNumber&&startColumn>endColumn?(this.startLineNumber=endLineNumber,this.startColumn=endColumn,this.endLineNumber=startLineNumber,this.endColumn=startColumn):(this.startLineNumber=startLineNumber,this.startColumn=startColumn,this.endLineNumber=endLineNumber,this.endColumn=endColumn)}isEmpty(){return range_Range.isEmpty(this)}static isEmpty(range){return range.startLineNumber===range.endLineNumber&&range.startColumn===range.endColumn}containsPosition(position){return range_Range.containsPosition(this,position)}static containsPosition(range,position){return!(position.lineNumber<range.startLineNumber||position.lineNumber>range.endLineNumber)&&(!(position.lineNumber===range.startLineNumber&&position.column<range.startColumn)&&!(position.lineNumber===range.endLineNumber&&position.column>range.endColumn))}containsRange(range){return range_Range.containsRange(this,range)}static containsRange(range,otherRange){return!(otherRange.startLineNumber<range.startLineNumber||otherRange.endLineNumber<range.startLineNumber)&&(!(otherRange.startLineNumber>range.endLineNumber||otherRange.endLineNumber>range.endLineNumber)&&(!(otherRange.startLineNumber===range.startLineNumber&&otherRange.startColumn<range.startColumn)&&!(otherRange.endLineNumber===range.endLineNumber&&otherRange.endColumn>range.endColumn)))}strictContainsRange(range){return range_Range.strictContainsRange(this,range)}static strictContainsRange(range,otherRange){return!(otherRange.startLineNumber<range.startLineNumber||otherRange.endLineNumber<range.startLineNumber)&&(!(otherRange.startLineNumber>range.endLineNumber||otherRange.endLineNumber>range.endLineNumber)&&(!(otherRange.startLineNumber===range.startLineNumber&&otherRange.startColumn<=range.startColumn)&&!(otherRange.endLineNumber===range.endLineNumber&&otherRange.endColumn>=range.endColumn)))}plusRange(range){return range_Range.plusRange(this,range)}static plusRange(a,b){let startLineNumber,startColumn,endLineNumber,endColumn;return b.startLineNumber<a.startLineNumber?(startLineNumber=b.startLineNumber,startColumn=b.startColumn):b.startLineNumber===a.startLineNumber?(startLineNumber=b.startLineNumber,startColumn=Math.min(b.startColumn,a.startColumn)):(startLineNumber=a.startLineNumber,startColumn=a.startColumn),b.endLineNumber>a.endLineNumber?(endLineNumber=b.endLineNumber,endColumn=b.endColumn):b.endLineNumber===a.endLineNumber?(endLineNumber=b.endLineNumber,endColumn=Math.max(b.endColumn,a.endColumn)):(endLineNumber=a.endLineNumber,endColumn=a.endColumn),new range_Range(startLineNumber,startColumn,endLineNumber,endColumn)}intersectRanges(range){return range_Range.intersectRanges(this,range)}static intersectRanges(a,b){let resultStartLineNumber=a.startLineNumber,resultStartColumn=a.startColumn,resultEndLineNumber=a.endLineNumber,resultEndColumn=a.endColumn,otherStartLineNumber=b.startLineNumber,otherStartColumn=b.startColumn,otherEndLineNumber=b.endLineNumber,otherEndColumn=b.endColumn;return resultStartLineNumber<otherStartLineNumber?(resultStartLineNumber=otherStartLineNumber,resultStartColumn=otherStartColumn):resultStartLineNumber===otherStartLineNumber&&(resultStartColumn=Math.max(resultStartColumn,otherStartColumn)),resultEndLineNumber>otherEndLineNumber?(resultEndLineNumber=otherEndLineNumber,resultEndColumn=otherEndColumn):resultEndLineNumber===otherEndLineNumber&&(resultEndColumn=Math.min(resultEndColumn,otherEndColumn)),resultStartLineNumber>resultEndLineNumber||resultStartLineNumber===resultEndLineNumber&&resultStartColumn>resultEndColumn?null:new range_Range(resultStartLineNumber,resultStartColumn,resultEndLineNumber,resultEndColumn)}equalsRange(other){return range_Range.equalsRange(this,other)}static equalsRange(a,b){return!!a&&!!b&&a.startLineNumber===b.startLineNumber&&a.startColumn===b.startColumn&&a.endLineNumber===b.endLineNumber&&a.endColumn===b.endColumn}getEndPosition(){return range_Range.getEndPosition(this)}static getEndPosition(range){return new Position(range.endLineNumber,range.endColumn)}getStartPosition(){return range_Range.getStartPosition(this)}static getStartPosition(range){return new Position(range.startLineNumber,range.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(endLineNumber,endColumn){return new range_Range(this.startLineNumber,this.startColumn,endLineNumber,endColumn)}setStartPosition(startLineNumber,startColumn){return new range_Range(startLineNumber,startColumn,this.endLineNumber,this.endColumn)}collapseToStart(){return range_Range.collapseToStart(this)}static collapseToStart(range){return new range_Range(range.startLineNumber,range.startColumn,range.startLineNumber,range.startColumn)}static fromPositions(start,end=start){return new range_Range(start.lineNumber,start.column,end.lineNumber,end.column)}static lift(range){return range?new range_Range(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn):null}static isIRange(obj){return obj&&"number"==typeof obj.startLineNumber&&"number"==typeof obj.startColumn&&"number"==typeof obj.endLineNumber&&"number"==typeof obj.endColumn}static areIntersectingOrTouching(a,b){return!(a.endLineNumber<b.startLineNumber||a.endLineNumber===b.startLineNumber&&a.endColumn<b.startColumn)&&!(b.endLineNumber<a.startLineNumber||b.endLineNumber===a.startLineNumber&&b.endColumn<a.startColumn)}static areIntersecting(a,b){return!(a.endLineNumber<b.startLineNumber||a.endLineNumber===b.startLineNumber&&a.endColumn<=b.startColumn)&&!(b.endLineNumber<a.startLineNumber||b.endLineNumber===a.startLineNumber&&b.endColumn<=a.startColumn)}static compareRangesUsingStarts(a,b){if(a&&b){const aStartLineNumber=0|a.startLineNumber,bStartLineNumber=0|b.startLineNumber;if(aStartLineNumber===bStartLineNumber){const aStartColumn=0|a.startColumn,bStartColumn=0|b.startColumn;if(aStartColumn===bStartColumn){const aEndLineNumber=0|a.endLineNumber,bEndLineNumber=0|b.endLineNumber;if(aEndLineNumber===bEndLineNumber){return(0|a.endColumn)-(0|b.endColumn)}return aEndLineNumber-bEndLineNumber}return aStartColumn-bStartColumn}return aStartLineNumber-bStartLineNumber}return(a?1:0)-(b?1:0)}static compareRangesUsingEnds(a,b){return a.endLineNumber===b.endLineNumber?a.endColumn===b.endColumn?a.startLineNumber===b.startLineNumber?a.startColumn-b.startColumn:a.startLineNumber-b.startLineNumber:a.endColumn-b.endColumn:a.endLineNumber-b.endLineNumber}static spansMultipleLines(range){return range.endLineNumber>range.startLineNumber}}function computeDiff(originalSequence,modifiedSequence,continueProcessingPredicate,pretty){return new diff_LcsDiff(originalSequence,modifiedSequence,continueProcessingPredicate).ComputeDiff(pretty)}class LineSequence{constructor(lines){const startColumns=[],endColumns=[];for(let i=0,length=lines.length;i<length;i++)startColumns[i]=getFirstNonBlankColumn(lines[i],1),endColumns[i]=getLastNonBlankColumn(lines[i],1);this.lines=lines,this._startColumns=startColumns,this._endColumns=endColumns}getElements(){const elements=[];for(let i=0,len=this.lines.length;i<len;i++)elements[i]=this.lines[i].substring(this._startColumns[i]-1,this._endColumns[i]-1);return elements}getStartLineNumber(i){return i+1}getEndLineNumber(i){return i+1}createCharSequence(shouldIgnoreTrimWhitespace,startIndex,endIndex){const charCodes=[],lineNumbers=[],columns=[];let len=0;for(let index=startIndex;index<=endIndex;index++){const lineContent=this.lines[index],startColumn=shouldIgnoreTrimWhitespace?this._startColumns[index]:1,endColumn=shouldIgnoreTrimWhitespace?this._endColumns[index]:lineContent.length+1;for(let col=startColumn;col<endColumn;col++)charCodes[len]=lineContent.charCodeAt(col-1),lineNumbers[len]=index+1,columns[len]=col,len++}return new CharSequence(charCodes,lineNumbers,columns)}}class CharSequence{constructor(charCodes,lineNumbers,columns){this._charCodes=charCodes,this._lineNumbers=lineNumbers,this._columns=columns}getElements(){return this._charCodes}getStartLineNumber(i){return this._lineNumbers[i]}getStartColumn(i){return this._columns[i]}getEndLineNumber(i){return this._lineNumbers[i]}getEndColumn(i){return this._columns[i]+1}}class CharChange{constructor(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn){this.originalStartLineNumber=originalStartLineNumber,this.originalStartColumn=originalStartColumn,this.originalEndLineNumber=originalEndLineNumber,this.originalEndColumn=originalEndColumn,this.modifiedStartLineNumber=modifiedStartLineNumber,this.modifiedStartColumn=modifiedStartColumn,this.modifiedEndLineNumber=modifiedEndLineNumber,this.modifiedEndColumn=modifiedEndColumn}static createFromDiffChange(diffChange,originalCharSequence,modifiedCharSequence){let originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn;return 0===diffChange.originalLength?(originalStartLineNumber=0,originalStartColumn=0,originalEndLineNumber=0,originalEndColumn=0):(originalStartLineNumber=originalCharSequence.getStartLineNumber(diffChange.originalStart),originalStartColumn=originalCharSequence.getStartColumn(diffChange.originalStart),originalEndLineNumber=originalCharSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1),originalEndColumn=originalCharSequence.getEndColumn(diffChange.originalStart+diffChange.originalLength-1)),0===diffChange.modifiedLength?(modifiedStartLineNumber=0,modifiedStartColumn=0,modifiedEndLineNumber=0,modifiedEndColumn=0):(modifiedStartLineNumber=modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart),modifiedStartColumn=modifiedCharSequence.getStartColumn(diffChange.modifiedStart),modifiedEndLineNumber=modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1),modifiedEndColumn=modifiedCharSequence.getEndColumn(diffChange.modifiedStart+diffChange.modifiedLength-1)),new CharChange(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn)}}class LineChange{constructor(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges){this.originalStartLineNumber=originalStartLineNumber,this.originalEndLineNumber=originalEndLineNumber,this.modifiedStartLineNumber=modifiedStartLineNumber,this.modifiedEndLineNumber=modifiedEndLineNumber,this.charChanges=charChanges}static createFromDiffResult(shouldIgnoreTrimWhitespace,diffChange,originalLineSequence,modifiedLineSequence,continueCharDiff,shouldComputeCharChanges,shouldPostProcessCharChanges){let originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges=void 0;if(0===diffChange.originalLength?(originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart)-1,originalEndLineNumber=0):(originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart),originalEndLineNumber=originalLineSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1)),0===diffChange.modifiedLength?(modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart)-1,modifiedEndLineNumber=0):(modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart),modifiedEndLineNumber=modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1)),shouldComputeCharChanges&&diffChange.originalLength>0&&diffChange.originalLength<20&&diffChange.modifiedLength>0&&diffChange.modifiedLength<20&&continueCharDiff()){const originalCharSequence=originalLineSequence.createCharSequence(shouldIgnoreTrimWhitespace,diffChange.originalStart,diffChange.originalStart+diffChange.originalLength-1),modifiedCharSequence=modifiedLineSequence.createCharSequence(shouldIgnoreTrimWhitespace,diffChange.modifiedStart,diffChange.modifiedStart+diffChange.modifiedLength-1);let rawChanges=computeDiff(originalCharSequence,modifiedCharSequence,continueCharDiff,!0).changes;shouldPostProcessCharChanges&&(rawChanges=function postProcessCharChanges(rawChanges){if(rawChanges.length<=1)return rawChanges;const result=[rawChanges[0]];let prevChange=result[0];for(let i=1,len=rawChanges.length;i<len;i++){const currChange=rawChanges[i],originalMatchingLength=currChange.originalStart-(prevChange.originalStart+prevChange.originalLength),modifiedMatchingLength=currChange.modifiedStart-(prevChange.modifiedStart+prevChange.modifiedLength);Math.min(originalMatchingLength,modifiedMatchingLength)<3?(prevChange.originalLength=currChange.originalStart+currChange.originalLength-prevChange.originalStart,prevChange.modifiedLength=currChange.modifiedStart+currChange.modifiedLength-prevChange.modifiedStart):(result.push(currChange),prevChange=currChange)}return result}(rawChanges)),charChanges=[];for(let i=0,length=rawChanges.length;i<length;i++)charChanges.push(CharChange.createFromDiffChange(rawChanges[i],originalCharSequence,modifiedCharSequence))}return new LineChange(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges)}}class DiffComputer{constructor(originalLines,modifiedLines,opts){this.shouldComputeCharChanges=opts.shouldComputeCharChanges,this.shouldPostProcessCharChanges=opts.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=opts.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=opts.shouldMakePrettyDiff,this.originalLines=originalLines,this.modifiedLines=modifiedLines,this.original=new LineSequence(originalLines),this.modified=new LineSequence(modifiedLines),this.continueLineDiff=createContinueProcessingPredicate(opts.maxComputationTime),this.continueCharDiff=createContinueProcessingPredicate(0===opts.maxComputationTime?0:Math.min(opts.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const diffResult=computeDiff(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),rawChanges=diffResult.changes,quitEarly=diffResult.quitEarly;if(this.shouldIgnoreTrimWhitespace){const lineChanges=[];for(let i=0,length=rawChanges.length;i<length;i++)lineChanges.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,rawChanges[i],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:quitEarly,changes:lineChanges}}const result=[];let originalLineIndex=0,modifiedLineIndex=0;for(let i=-1,len=rawChanges.length;i<len;i++){const nextChange=i+1<len?rawChanges[i+1]:null,originalStop=nextChange?nextChange.originalStart:this.originalLines.length,modifiedStop=nextChange?nextChange.modifiedStart:this.modifiedLines.length;for(;originalLineIndex<originalStop&&modifiedLineIndex<modifiedStop;){const originalLine=this.originalLines[originalLineIndex],modifiedLine=this.modifiedLines[modifiedLineIndex];if(originalLine!==modifiedLine){{let originalStartColumn=getFirstNonBlankColumn(originalLine,1),modifiedStartColumn=getFirstNonBlankColumn(modifiedLine,1);for(;originalStartColumn>1&&modifiedStartColumn>1;){if(originalLine.charCodeAt(originalStartColumn-2)!==modifiedLine.charCodeAt(modifiedStartColumn-2))break;originalStartColumn--,modifiedStartColumn--}(originalStartColumn>1||modifiedStartColumn>1)&&this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,1,originalStartColumn,modifiedLineIndex+1,1,modifiedStartColumn)}{let originalEndColumn=getLastNonBlankColumn(originalLine,1),modifiedEndColumn=getLastNonBlankColumn(modifiedLine,1);const originalMaxColumn=originalLine.length+1,modifiedMaxColumn=modifiedLine.length+1;for(;originalEndColumn<originalMaxColumn&&modifiedEndColumn<modifiedMaxColumn;){if(originalLine.charCodeAt(originalEndColumn-1)!==originalLine.charCodeAt(modifiedEndColumn-1))break;originalEndColumn++,modifiedEndColumn++}(originalEndColumn<originalMaxColumn||modifiedEndColumn<modifiedMaxColumn)&&this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,originalEndColumn,originalMaxColumn,modifiedLineIndex+1,modifiedEndColumn,modifiedMaxColumn)}}originalLineIndex++,modifiedLineIndex++}nextChange&&(result.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,nextChange,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),originalLineIndex+=nextChange.originalLength,modifiedLineIndex+=nextChange.modifiedLength)}return{quitEarly:quitEarly,changes:result}}_pushTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){if(this._mergeTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn))return;let charChanges=void 0;this.shouldComputeCharChanges&&(charChanges=[new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn)]),result.push(new LineChange(originalLineNumber,originalLineNumber,modifiedLineNumber,modifiedLineNumber,charChanges))}_mergeTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){const len=result.length;if(0===len)return!1;const prevChange=result[len-1];return 0!==prevChange.originalEndLineNumber&&0!==prevChange.modifiedEndLineNumber&&(prevChange.originalEndLineNumber+1===originalLineNumber&&prevChange.modifiedEndLineNumber+1===modifiedLineNumber&&(prevChange.originalEndLineNumber=originalLineNumber,prevChange.modifiedEndLineNumber=modifiedLineNumber,this.shouldComputeCharChanges&&prevChange.charChanges&&prevChange.charChanges.push(new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn)),!0))}}function getFirstNonBlankColumn(txt,defaultValue){const r=function firstNonWhitespaceIndex(str){for(let i=0,len=str.length;i<len;i++){const chCode=str.charCodeAt(i);if(32!==chCode&&9!==chCode)return i}return-1}(txt);return-1===r?defaultValue:r+1}function getLastNonBlankColumn(txt,defaultValue){const r=function lastNonWhitespaceIndex(str,startIndex=str.length-1){for(let i=startIndex;i>=0;i--){const chCode=str.charCodeAt(i);if(32!==chCode&&9!==chCode)return i}return-1}(txt);return-1===r?defaultValue:r+2}function createContinueProcessingPredicate(maximumRuntime){if(0===maximumRuntime)return()=>!0;const startTime=Date.now();return()=>Date.now()-startTime<maximumRuntime}function toUint8(v){return v<0?0:v>255?255:0|v}function toUint32(v){return v<0?0:v>4294967295?4294967295:0|v}class PrefixSumIndexOfResult{constructor(index,remainder){this.index=index,this.remainder=remainder}}class prefixSumComputer_PrefixSumComputer{constructor(values){this.values=values,this.prefixSum=new Uint32Array(values.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(insertIndex,insertValues){insertIndex=toUint32(insertIndex);const oldValues=this.values,oldPrefixSum=this.prefixSum,insertValuesLen=insertValues.length;return 0!==insertValuesLen&&(this.values=new Uint32Array(oldValues.length+insertValuesLen),this.values.set(oldValues.subarray(0,insertIndex),0),this.values.set(oldValues.subarray(insertIndex),insertIndex+insertValuesLen),this.values.set(insertValues,insertIndex),insertIndex-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=insertIndex-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(index,value){return index=toUint32(index),value=toUint32(value),this.values[index]!==value&&(this.values[index]=value,index-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=index-1),!0)}removeValues(startIndex,cnt){startIndex=toUint32(startIndex),cnt=toUint32(cnt);const oldValues=this.values,oldPrefixSum=this.prefixSum;if(startIndex>=oldValues.length)return!1;let maxCnt=oldValues.length-startIndex;return cnt>=maxCnt&&(cnt=maxCnt),0!==cnt&&(this.values=new Uint32Array(oldValues.length-cnt),this.values.set(oldValues.subarray(0,startIndex),0),this.values.set(oldValues.subarray(startIndex+cnt),startIndex),this.prefixSum=new Uint32Array(this.values.length),startIndex-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=startIndex-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalValue(){return 0===this.values.length?0:this._getAccumulatedValue(this.values.length-1)}getAccumulatedValue(index){return index<0?0:(index=toUint32(index),this._getAccumulatedValue(index))}_getAccumulatedValue(index){if(index<=this.prefixSumValidIndex[0])return this.prefixSum[index];let startIndex=this.prefixSumValidIndex[0]+1;0===startIndex&&(this.prefixSum[0]=this.values[0],startIndex++),index>=this.values.length&&(index=this.values.length-1);for(let i=startIndex;i<=index;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],index),this.prefixSum[index]}getIndexOf(accumulatedValue){accumulatedValue=Math.floor(accumulatedValue),this.getTotalValue();let low=0,high=this.values.length-1,mid=0,midStop=0,midStart=0;for(;low<=high;)if(mid=low+(high-low)/2|0,midStop=this.prefixSum[mid],midStart=midStop-this.values[mid],accumulatedValue<midStart)high=mid-1;else{if(!(accumulatedValue>=midStop))break;low=mid+1}return new PrefixSumIndexOfResult(mid,accumulatedValue-midStart)}}const DEFAULT_WORD_REGEXP=function createWordRegExp(allowInWords=""){let source="(-?\\d*\\.\\d\\w*)|([^";for(const sep of"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?")allowInWords.indexOf(sep)>=0||(source+="\\"+sep);return source+="\\s]+)",new RegExp(source,"g")}();const _defaultConfig={maxLen:1e3,windowSize:15,timeBudget:150};function _findRegexMatchEnclosingPosition(wordDefinition,text,pos,stopPos){let match;for(;match=wordDefinition.exec(text);){const matchIndex=match.index||0;if(matchIndex<=pos&&wordDefinition.lastIndex>=pos)return match;if(stopPos>0&&matchIndex>stopPos)return null}return null}class characterClassifier_CharacterClassifier{constructor(_defaultValue){let defaultValue=toUint8(_defaultValue);this._defaultValue=defaultValue,this._asciiMap=characterClassifier_CharacterClassifier._createAsciiMap(defaultValue),this._map=new Map}static _createAsciiMap(defaultValue){let asciiMap=new Uint8Array(256);for(let i=0;i<256;i++)asciiMap[i]=defaultValue;return asciiMap}set(charCode,_value){let value=toUint8(_value);charCode>=0&&charCode<256?this._asciiMap[charCode]=value:this._map.set(charCode,value)}get(charCode){return charCode>=0&&charCode<256?this._asciiMap[charCode]:this._map.get(charCode)||this._defaultValue}}class Uint8Matrix{constructor(rows,cols,defaultValue){const data=new Uint8Array(rows*cols);for(let i=0,len=rows*cols;i<len;i++)data[i]=defaultValue;this._data=data,this.rows=rows,this.cols=cols}get(row,col){return this._data[row*this.cols+col]}set(row,col,value){this._data[row*this.cols+col]=value}}class StateMachine{constructor(edges){let maxCharCode=0,maxState=0;for(let i=0,len=edges.length;i<len;i++){let[from,chCode,to]=edges[i];chCode>maxCharCode&&(maxCharCode=chCode),from>maxState&&(maxState=from),to>maxState&&(maxState=to)}maxCharCode++,maxState++;let states=new Uint8Matrix(maxState,maxCharCode,0);for(let i=0,len=edges.length;i<len;i++){let[from,chCode,to]=edges[i];states.set(from,chCode,to)}this._states=states,this._maxCharCode=maxCharCode}nextState(currentState,chCode){return chCode<0||chCode>=this._maxCharCode?0:this._states.get(currentState,chCode)}}let _stateMachine=null;let _classifier=null;class LinkComputer{static _createLink(classifier,line,lineNumber,linkBeginIndex,linkEndIndex){let lastIncludedCharIndex=linkEndIndex-1;do{const chCode=line.charCodeAt(lastIncludedCharIndex);if(2!==classifier.get(chCode))break;lastIncludedCharIndex--}while(lastIncludedCharIndex>linkBeginIndex);if(linkBeginIndex>0){const charCodeBeforeLink=line.charCodeAt(linkBeginIndex-1),lastCharCodeInLink=line.charCodeAt(lastIncludedCharIndex);(40===charCodeBeforeLink&&41===lastCharCodeInLink||91===charCodeBeforeLink&&93===lastCharCodeInLink||123===charCodeBeforeLink&&125===lastCharCodeInLink)&&lastIncludedCharIndex--}return{range:{startLineNumber:lineNumber,startColumn:linkBeginIndex+1,endLineNumber:lineNumber,endColumn:lastIncludedCharIndex+2},url:line.substring(linkBeginIndex,lastIncludedCharIndex+1)}}static computeLinks(model,stateMachine=function getStateMachine(){return null===_stateMachine&&(_stateMachine=new StateMachine([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),_stateMachine}()){const classifier=function getClassifier(){if(null===_classifier){_classifier=new characterClassifier_CharacterClassifier(0);const FORCE_TERMINATION_CHARACTERS=" \t<>'\"";for(let i=0;i<FORCE_TERMINATION_CHARACTERS.length;i++)_classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i),1);const CANNOT_END_WITH_CHARACTERS=".,;";for(let i=0;i<CANNOT_END_WITH_CHARACTERS.length;i++)_classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i),2)}return _classifier}();let result=[];for(let i=1,lineCount=model.getLineCount();i<=lineCount;i++){const line=model.getLineContent(i),len=line.length;let j=0,linkBeginIndex=0,linkBeginChCode=0,state=1,hasOpenParens=!1,hasOpenSquareBracket=!1,inSquareBrackets=!1,hasOpenCurlyBracket=!1;for(;j<len;){let resetStateMachine=!1;const chCode=line.charCodeAt(j);if(13===state){let chClass;switch(chCode){case 40:hasOpenParens=!0,chClass=0;break;case 41:chClass=hasOpenParens?0:1;break;case 91:inSquareBrackets=!0,hasOpenSquareBracket=!0,chClass=0;break;case 93:inSquareBrackets=!1,chClass=hasOpenSquareBracket?0:1;break;case 123:hasOpenCurlyBracket=!0,chClass=0;break;case 125:chClass=hasOpenCurlyBracket?0:1;break;case 39:chClass=34===linkBeginChCode||96===linkBeginChCode?0:1;break;case 34:chClass=39===linkBeginChCode||96===linkBeginChCode?0:1;break;case 96:chClass=39===linkBeginChCode||34===linkBeginChCode?0:1;break;case 42:chClass=42===linkBeginChCode?1:0;break;case 124:chClass=124===linkBeginChCode?1:0;break;case 32:chClass=inSquareBrackets?0:1;break;default:chClass=classifier.get(chCode)}1===chClass&&(result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,j)),resetStateMachine=!0)}else if(12===state){let chClass;91===chCode?(hasOpenSquareBracket=!0,chClass=0):chClass=classifier.get(chCode),1===chClass?resetStateMachine=!0:state=13}else state=stateMachine.nextState(state,chCode),0===state&&(resetStateMachine=!0);resetStateMachine&&(state=1,hasOpenParens=!1,hasOpenSquareBracket=!1,hasOpenCurlyBracket=!1,linkBeginIndex=j+1,linkBeginChCode=chCode),j++}13===state&&result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,len))}return result}}class BasicInplaceReplace{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(range1,text1,range2,text2,up){if(range1&&text1){let result=this.doNavigateValueSet(text1,up);if(result)return{range:range1,value:result}}if(range2&&text2){let result=this.doNavigateValueSet(text2,up);if(result)return{range:range2,value:result}}return null}doNavigateValueSet(text,up){let numberResult=this.numberReplace(text,up);return null!==numberResult?numberResult:this.textReplace(text,up)}numberReplace(value,up){let precision=Math.pow(10,value.length-(value.lastIndexOf(".")+1)),n1=Number(value),n2=parseFloat(value);return isNaN(n1)||isNaN(n2)||n1!==n2?null:0!==n1||up?(n1=Math.floor(n1*precision),n1+=up?precision:-precision,String(n1/precision)):null}textReplace(value,up){return this.valueSetsReplace(this._defaultValueSet,value,up)}valueSetsReplace(valueSets,value,up){let result=null;for(let i=0,len=valueSets.length;null===result&&i<len;i++)result=this.valueSetReplace(valueSets[i],value,up);return result}valueSetReplace(valueSet,value,up){let idx=valueSet.indexOf(value);return idx>=0?(idx+=up?1:-1,idx<0?idx=valueSet.length-1:idx%=valueSet.length,valueSet[idx]):null}}BasicInplaceReplace.INSTANCE=new BasicInplaceReplace;class Node{constructor(element){this.element=element,this.next=Node.Undefined,this.prev=Node.Undefined}}Node.Undefined=new Node(void 0);class LinkedList{constructor(){this._first=Node.Undefined,this._last=Node.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Node.Undefined}clear(){this._first=Node.Undefined,this._last=Node.Undefined,this._size=0}unshift(element){return this._insert(element,!1)}push(element){return this._insert(element,!0)}_insert(element,atTheEnd){const newNode=new Node(element);if(this._first===Node.Undefined)this._first=newNode,this._last=newNode;else if(atTheEnd){const oldLast=this._last;this._last=newNode,newNode.prev=oldLast,oldLast.next=newNode}else{const oldFirst=this._first;this._first=newNode,newNode.next=oldFirst,oldFirst.prev=newNode}this._size+=1;let didRemove=!1;return()=>{didRemove||(didRemove=!0,this._remove(newNode))}}shift(){if(this._first!==Node.Undefined){const res=this._first.element;return this._remove(this._first),res}}pop(){if(this._last!==Node.Undefined){const res=this._last.element;return this._remove(this._last),res}}_remove(node){if(node.prev!==Node.Undefined&&node.next!==Node.Undefined){const anchor=node.prev;anchor.next=node.next,node.next.prev=anchor}else node.prev===Node.Undefined&&node.next===Node.Undefined?(this._first=Node.Undefined,this._last=Node.Undefined):node.next===Node.Undefined?(this._last=this._last.prev,this._last.next=Node.Undefined):node.prev===Node.Undefined&&(this._first=this._first.next,this._first.prev=Node.Undefined);this._size-=1}*[Symbol.iterator](){let node=this._first;for(;node!==Node.Undefined;)yield node.element,node=node.next}toArray(){const result=[];for(let node=this._first;node!==Node.Undefined;node=node.next)result.push(node.element);return result}}var event_Event;!function(Event){function once(event){return(listener,thisArgs=null,disposables)=>{let result,didFire=!1;return result=event(e=>{if(!didFire)return result?result.dispose():didFire=!0,listener.call(thisArgs,e)},null,disposables),didFire&&result.dispose(),result}}function map(event,map){return snapshot((listener,thisArgs=null,disposables)=>event(i=>listener.call(thisArgs,map(i)),null,disposables))}function forEach(event,each){return snapshot((listener,thisArgs=null,disposables)=>event(i=>{each(i),listener.call(thisArgs,i)},null,disposables))}function filter(event,filter){return snapshot((listener,thisArgs=null,disposables)=>event(e=>filter(e)&&listener.call(thisArgs,e),null,disposables))}function reduce(event,merge,initial){let output=initial;return map(event,e=>(output=merge(output,e),output))}function snapshot(event){let listener;const emitter=new event_Emitter({onFirstListenerAdd(){listener=event(emitter.fire,emitter)},onLastListenerRemove(){listener.dispose()}});return emitter.event}function debounce(event,merge,delay=100,leading=!1,leakWarningThreshold){let subscription,output=void 0,handle=void 0,numDebouncedCalls=0;const emitter=new event_Emitter({leakWarningThreshold:leakWarningThreshold,onFirstListenerAdd(){subscription=event(cur=>{numDebouncedCalls++,output=merge(output,cur),leading&&!handle&&(emitter.fire(output),output=void 0),clearTimeout(handle),handle=setTimeout(()=>{const _output=output;output=void 0,handle=void 0,(!leading||numDebouncedCalls>1)&&emitter.fire(_output),numDebouncedCalls=0},delay)})},onLastListenerRemove(){subscription.dispose()}});return emitter.event}function latch(event){let cache,firstCall=!0;return filter(event,value=>{const shouldEmit=firstCall||value!==cache;return firstCall=!1,cache=value,shouldEmit})}Event.None=()=>Disposable.None,Event.once=once,Event.map=map,Event.forEach=forEach,Event.filter=filter,Event.signal=function signal(event){return event},Event.any=function any(...events){return(listener,thisArgs=null,disposables)=>function combinedDisposable(...disposables){return disposables.forEach(markTracked),{dispose:()=>dispose(disposables)}}(...events.map(event=>event(e=>listener.call(thisArgs,e),null,disposables)))},Event.reduce=reduce,Event.snapshot=snapshot,Event.debounce=debounce,Event.stopwatch=function stopwatch(event){const start=(new Date).getTime();return map(once(event),_=>(new Date).getTime()-start)},Event.latch=latch,Event.buffer=function buffer(event,nextTick=!1,_buffer=[]){let buffer=_buffer.slice(),listener=event(e=>{buffer?buffer.push(e):emitter.fire(e)});const flush=()=>{buffer&&buffer.forEach(e=>emitter.fire(e)),buffer=null},emitter=new event_Emitter({onFirstListenerAdd(){listener||(listener=event(e=>emitter.fire(e)))},onFirstListenerDidAdd(){buffer&&(nextTick?setTimeout(flush):flush())},onLastListenerRemove(){listener&&listener.dispose(),listener=null}});return emitter.event};class ChainableEvent{constructor(event){this.event=event}map(fn){return new ChainableEvent(map(this.event,fn))}forEach(fn){return new ChainableEvent(forEach(this.event,fn))}filter(fn){return new ChainableEvent(filter(this.event,fn))}reduce(merge,initial){return new ChainableEvent(reduce(this.event,merge,initial))}latch(){return new ChainableEvent(latch(this.event))}debounce(merge,delay=100,leading=!1,leakWarningThreshold){return new ChainableEvent(debounce(this.event,merge,delay,leading,leakWarningThreshold))}on(listener,thisArgs,disposables){return this.event(listener,thisArgs,disposables)}once(listener,thisArgs,disposables){return once(this.event)(listener,thisArgs,disposables)}}Event.chain=function chain(event){return new ChainableEvent(event)},Event.fromNodeEventEmitter=function fromNodeEventEmitter(emitter,eventName,map=(id=>id)){const fn=(...args)=>result.fire(map(...args)),result=new event_Emitter({onFirstListenerAdd:()=>emitter.on(eventName,fn),onLastListenerRemove:()=>emitter.removeListener(eventName,fn)});return result.event},Event.fromDOMEventEmitter=function fromDOMEventEmitter(emitter,eventName,map=(id=>id)){const fn=(...args)=>result.fire(map(...args)),result=new event_Emitter({onFirstListenerAdd:()=>emitter.addEventListener(eventName,fn),onLastListenerRemove:()=>emitter.removeEventListener(eventName,fn)});return result.event},Event.fromPromise=function fromPromise(promise){const emitter=new event_Emitter;let shouldEmit=!1;return promise.then(void 0,()=>null).then(()=>{shouldEmit?emitter.fire(void 0):setTimeout(()=>emitter.fire(void 0),0)}),shouldEmit=!0,emitter.event},Event.toPromise=function toPromise(event){return new Promise(c=>once(event)(c))}}(event_Event||(event_Event={}));class event_Emitter{constructor(options){this._disposed=!1,this._options=options,this._leakageMon=void 0}get event(){return this._event||(this._event=(listener,thisArgs,disposables)=>{this._listeners||(this._listeners=new LinkedList);const firstListener=this._listeners.isEmpty();firstListener&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const remove=this._listeners.push(thisArgs?[listener,thisArgs]:listener);let removeMonitor,result;return firstListener&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,listener,thisArgs),this._leakageMon&&(removeMonitor=this._leakageMon.check(this._listeners.size)),result={dispose:()=>{if(removeMonitor&&removeMonitor(),result.dispose=event_Emitter._noop,!this._disposed&&(remove(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}},disposables instanceof DisposableStore?disposables.add(result):Array.isArray(disposables)&&disposables.push(result),result}),this._event}fire(event){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new LinkedList);for(let listener of this._listeners)this._deliveryQueue.push([listener,event]);for(;this._deliveryQueue.size>0;){const[listener,event]=this._deliveryQueue.shift();try{"function"==typeof listener?listener.call(void 0,event):listener[0].call(listener[1],event)}catch(e){onUnexpectedError(e)}}}}dispose(){this._listeners&&this._listeners.clear(),this._deliveryQueue&&this._deliveryQueue.clear(),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0}}event_Emitter._noop=function(){};const shortcutEvent=Object.freeze((function(callback,context){const handle=setTimeout(callback.bind(context),0);return{dispose(){clearTimeout(handle)}}}));var cancellation_CancellationToken,CancellationToken;(CancellationToken=cancellation_CancellationToken||(cancellation_CancellationToken={})).isCancellationToken=function isCancellationToken(thing){return thing===CancellationToken.None||thing===CancellationToken.Cancelled||thing instanceof cancellation_MutableToken||!(!thing||"object"!=typeof thing)&&"boolean"==typeof thing.isCancellationRequested&&"function"==typeof thing.onCancellationRequested},CancellationToken.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:event_Event.None}),CancellationToken.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:shortcutEvent});class cancellation_MutableToken{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?shortcutEvent:(this._emitter||(this._emitter=new event_Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class CancellationTokenSource{constructor(parent){this._token=void 0,this._parentListener=void 0,this._parentListener=parent&&parent.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new cancellation_MutableToken),this._token}cancel(){this._token?this._token instanceof cancellation_MutableToken&&this._token.cancel():this._token=cancellation_CancellationToken.Cancelled}dispose(cancel=!1){cancel&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof cancellation_MutableToken&&this._token.dispose():this._token=cancellation_CancellationToken.None}}class KeyCodeStrMap{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(keyCode,str){this._keyCodeToStr[keyCode]=str,this._strToKeyCode[str.toLowerCase()]=keyCode}keyCodeToStr(keyCode){return this._keyCodeToStr[keyCode]}strToKeyCode(str){return this._strToKeyCode[str.toLowerCase()]||0}}const uiMap=new KeyCodeStrMap,userSettingsUSMap=new KeyCodeStrMap,userSettingsGeneralMap=new KeyCodeStrMap;var KeyCodeUtils,AccessibilitySupport,CompletionItemInsertTextRule,CompletionItemKind,CompletionItemTag,CompletionTriggerKind,ContentWidgetPositionPreference,CursorChangeReason,DefaultEndOfLine,DocumentHighlightKind,EditorAutoIndentStrategy,EditorOption,EndOfLinePreference,EndOfLineSequence,IndentAction,KeyCode,MarkerSeverity,MarkerTag,MinimapPosition,MouseTargetType,OverlayWidgetPositionPreference,OverviewRulerLane,RenderLineNumbersType,RenderMinimap,ScrollType,ScrollbarVisibility,SelectionDirection,SignatureHelpTriggerKind,SymbolKind,SymbolTag,TextEditorCursorBlinkingStyle,TextEditorCursorStyle,TrackedRangeStickiness,WrappingIndent;!function(){function define(keyCode,uiLabel,usUserSettingsLabel=uiLabel,generalUserSettingsLabel=usUserSettingsLabel){uiMap.define(keyCode,uiLabel),userSettingsUSMap.define(keyCode,usUserSettingsLabel),userSettingsGeneralMap.define(keyCode,generalUserSettingsLabel)}define(0,"unknown"),define(1,"Backspace"),define(2,"Tab"),define(3,"Enter"),define(4,"Shift"),define(5,"Ctrl"),define(6,"Alt"),define(7,"PauseBreak"),define(8,"CapsLock"),define(9,"Escape"),define(10,"Space"),define(11,"PageUp"),define(12,"PageDown"),define(13,"End"),define(14,"Home"),define(15,"LeftArrow","Left"),define(16,"UpArrow","Up"),define(17,"RightArrow","Right"),define(18,"DownArrow","Down"),define(19,"Insert"),define(20,"Delete"),define(21,"0"),define(22,"1"),define(23,"2"),define(24,"3"),define(25,"4"),define(26,"5"),define(27,"6"),define(28,"7"),define(29,"8"),define(30,"9"),define(31,"A"),define(32,"B"),define(33,"C"),define(34,"D"),define(35,"E"),define(36,"F"),define(37,"G"),define(38,"H"),define(39,"I"),define(40,"J"),define(41,"K"),define(42,"L"),define(43,"M"),define(44,"N"),define(45,"O"),define(46,"P"),define(47,"Q"),define(48,"R"),define(49,"S"),define(50,"T"),define(51,"U"),define(52,"V"),define(53,"W"),define(54,"X"),define(55,"Y"),define(56,"Z"),define(57,"Meta"),define(58,"ContextMenu"),define(59,"F1"),define(60,"F2"),define(61,"F3"),define(62,"F4"),define(63,"F5"),define(64,"F6"),define(65,"F7"),define(66,"F8"),define(67,"F9"),define(68,"F10"),define(69,"F11"),define(70,"F12"),define(71,"F13"),define(72,"F14"),define(73,"F15"),define(74,"F16"),define(75,"F17"),define(76,"F18"),define(77,"F19"),define(78,"NumLock"),define(79,"ScrollLock"),define(80,";",";","OEM_1"),define(81,"=","=","OEM_PLUS"),define(82,",",",","OEM_COMMA"),define(83,"-","-","OEM_MINUS"),define(84,".",".","OEM_PERIOD"),define(85,"/","/","OEM_2"),define(86,"`","`","OEM_3"),define(110,"ABNT_C1"),define(111,"ABNT_C2"),define(87,"[","[","OEM_4"),define(88,"\\","\\","OEM_5"),define(89,"]","]","OEM_6"),define(90,"'","'","OEM_7"),define(91,"OEM_8"),define(92,"OEM_102"),define(93,"NumPad0"),define(94,"NumPad1"),define(95,"NumPad2"),define(96,"NumPad3"),define(97,"NumPad4"),define(98,"NumPad5"),define(99,"NumPad6"),define(100,"NumPad7"),define(101,"NumPad8"),define(102,"NumPad9"),define(103,"NumPad_Multiply"),define(104,"NumPad_Add"),define(105,"NumPad_Separator"),define(106,"NumPad_Subtract"),define(107,"NumPad_Decimal"),define(108,"NumPad_Divide")}(),function(KeyCodeUtils){KeyCodeUtils.toString=function toString(keyCode){return uiMap.keyCodeToStr(keyCode)},KeyCodeUtils.fromString=function fromString(key){return uiMap.strToKeyCode(key)},KeyCodeUtils.toUserSettingsUS=function toUserSettingsUS(keyCode){return userSettingsUSMap.keyCodeToStr(keyCode)},KeyCodeUtils.toUserSettingsGeneral=function toUserSettingsGeneral(keyCode){return userSettingsGeneralMap.keyCodeToStr(keyCode)},KeyCodeUtils.fromUserSettings=function fromUserSettings(key){return userSettingsUSMap.strToKeyCode(key)||userSettingsGeneralMap.strToKeyCode(key)}}(KeyCodeUtils||(KeyCodeUtils={}));class selection_Selection extends range_Range{constructor(selectionStartLineNumber,selectionStartColumn,positionLineNumber,positionColumn){super(selectionStartLineNumber,selectionStartColumn,positionLineNumber,positionColumn),this.selectionStartLineNumber=selectionStartLineNumber,this.selectionStartColumn=selectionStartColumn,this.positionLineNumber=positionLineNumber,this.positionColumn=positionColumn}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(other){return selection_Selection.selectionsEqual(this,other)}static selectionsEqual(a,b){return a.selectionStartLineNumber===b.selectionStartLineNumber&&a.selectionStartColumn===b.selectionStartColumn&&a.positionLineNumber===b.positionLineNumber&&a.positionColumn===b.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(endLineNumber,endColumn){return 0===this.getDirection()?new selection_Selection(this.startLineNumber,this.startColumn,endLineNumber,endColumn):new selection_Selection(endLineNumber,endColumn,this.startLineNumber,this.startColumn)}getPosition(){return new Position(this.positionLineNumber,this.positionColumn)}setStartPosition(startLineNumber,startColumn){return 0===this.getDirection()?new selection_Selection(startLineNumber,startColumn,this.endLineNumber,this.endColumn):new selection_Selection(this.endLineNumber,this.endColumn,startLineNumber,startColumn)}static fromPositions(start,end=start){return new selection_Selection(start.lineNumber,start.column,end.lineNumber,end.column)}static liftSelection(sel){return new selection_Selection(sel.selectionStartLineNumber,sel.selectionStartColumn,sel.positionLineNumber,sel.positionColumn)}static selectionsArrEqual(a,b){if(a&&!b||!a&&b)return!1;if(!a&&!b)return!0;if(a.length!==b.length)return!1;for(let i=0,len=a.length;i<len;i++)if(!this.selectionsEqual(a[i],b[i]))return!1;return!0}static isISelection(obj){return obj&&"number"==typeof obj.selectionStartLineNumber&&"number"==typeof obj.selectionStartColumn&&"number"==typeof obj.positionLineNumber&&"number"==typeof obj.positionColumn}static createWithDirection(startLineNumber,startColumn,endLineNumber,endColumn,direction){return 0===direction?new selection_Selection(startLineNumber,startColumn,endLineNumber,endColumn):new selection_Selection(endLineNumber,endColumn,startLineNumber,startColumn)}}class Token{constructor(offset,type,language){this.offset=0|offset,this.type=type,this.language=language}toString(){return"("+this.offset+", "+this.type+")"}}!function(AccessibilitySupport){AccessibilitySupport[AccessibilitySupport.Unknown=0]="Unknown",AccessibilitySupport[AccessibilitySupport.Disabled=1]="Disabled",AccessibilitySupport[AccessibilitySupport.Enabled=2]="Enabled"}(AccessibilitySupport||(AccessibilitySupport={})),function(CompletionItemInsertTextRule){CompletionItemInsertTextRule[CompletionItemInsertTextRule.KeepWhitespace=1]="KeepWhitespace",CompletionItemInsertTextRule[CompletionItemInsertTextRule.InsertAsSnippet=4]="InsertAsSnippet"}(CompletionItemInsertTextRule||(CompletionItemInsertTextRule={})),function(CompletionItemKind){CompletionItemKind[CompletionItemKind.Method=0]="Method",CompletionItemKind[CompletionItemKind.Function=1]="Function",CompletionItemKind[CompletionItemKind.Constructor=2]="Constructor",CompletionItemKind[CompletionItemKind.Field=3]="Field",CompletionItemKind[CompletionItemKind.Variable=4]="Variable",CompletionItemKind[CompletionItemKind.Class=5]="Class",CompletionItemKind[CompletionItemKind.Struct=6]="Struct",CompletionItemKind[CompletionItemKind.Interface=7]="Interface",CompletionItemKind[CompletionItemKind.Module=8]="Module",CompletionItemKind[CompletionItemKind.Property=9]="Property",CompletionItemKind[CompletionItemKind.Event=10]="Event",CompletionItemKind[CompletionItemKind.Operator=11]="Operator",CompletionItemKind[CompletionItemKind.Unit=12]="Unit",CompletionItemKind[CompletionItemKind.Value=13]="Value",CompletionItemKind[CompletionItemKind.Constant=14]="Constant",CompletionItemKind[CompletionItemKind.Enum=15]="Enum",CompletionItemKind[CompletionItemKind.EnumMember=16]="EnumMember",CompletionItemKind[CompletionItemKind.Keyword=17]="Keyword",CompletionItemKind[CompletionItemKind.Text=18]="Text",CompletionItemKind[CompletionItemKind.Color=19]="Color",CompletionItemKind[CompletionItemKind.File=20]="File",CompletionItemKind[CompletionItemKind.Reference=21]="Reference",CompletionItemKind[CompletionItemKind.Customcolor=22]="Customcolor",CompletionItemKind[CompletionItemKind.Folder=23]="Folder",CompletionItemKind[CompletionItemKind.TypeParameter=24]="TypeParameter",CompletionItemKind[CompletionItemKind.User=25]="User",CompletionItemKind[CompletionItemKind.Issue=26]="Issue",CompletionItemKind[CompletionItemKind.Snippet=27]="Snippet"}(CompletionItemKind||(CompletionItemKind={})),function(CompletionItemTag){CompletionItemTag[CompletionItemTag.Deprecated=1]="Deprecated"}(CompletionItemTag||(CompletionItemTag={})),function(CompletionTriggerKind){CompletionTriggerKind[CompletionTriggerKind.Invoke=0]="Invoke",CompletionTriggerKind[CompletionTriggerKind.TriggerCharacter=1]="TriggerCharacter",CompletionTriggerKind[CompletionTriggerKind.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(CompletionTriggerKind||(CompletionTriggerKind={})),function(ContentWidgetPositionPreference){ContentWidgetPositionPreference[ContentWidgetPositionPreference.EXACT=0]="EXACT",ContentWidgetPositionPreference[ContentWidgetPositionPreference.ABOVE=1]="ABOVE",ContentWidgetPositionPreference[ContentWidgetPositionPreference.BELOW=2]="BELOW"}(ContentWidgetPositionPreference||(ContentWidgetPositionPreference={})),function(CursorChangeReason){CursorChangeReason[CursorChangeReason.NotSet=0]="NotSet",CursorChangeReason[CursorChangeReason.ContentFlush=1]="ContentFlush",CursorChangeReason[CursorChangeReason.RecoverFromMarkers=2]="RecoverFromMarkers",CursorChangeReason[CursorChangeReason.Explicit=3]="Explicit",CursorChangeReason[CursorChangeReason.Paste=4]="Paste",CursorChangeReason[CursorChangeReason.Undo=5]="Undo",CursorChangeReason[CursorChangeReason.Redo=6]="Redo"}(CursorChangeReason||(CursorChangeReason={})),function(DefaultEndOfLine){DefaultEndOfLine[DefaultEndOfLine.LF=1]="LF",DefaultEndOfLine[DefaultEndOfLine.CRLF=2]="CRLF"}(DefaultEndOfLine||(DefaultEndOfLine={})),function(DocumentHighlightKind){DocumentHighlightKind[DocumentHighlightKind.Text=0]="Text",DocumentHighlightKind[DocumentHighlightKind.Read=1]="Read",DocumentHighlightKind[DocumentHighlightKind.Write=2]="Write"}(DocumentHighlightKind||(DocumentHighlightKind={})),function(EditorAutoIndentStrategy){EditorAutoIndentStrategy[EditorAutoIndentStrategy.None=0]="None",EditorAutoIndentStrategy[EditorAutoIndentStrategy.Keep=1]="Keep",EditorAutoIndentStrategy[EditorAutoIndentStrategy.Brackets=2]="Brackets",EditorAutoIndentStrategy[EditorAutoIndentStrategy.Advanced=3]="Advanced",EditorAutoIndentStrategy[EditorAutoIndentStrategy.Full=4]="Full"}(EditorAutoIndentStrategy||(EditorAutoIndentStrategy={})),function(EditorOption){EditorOption[EditorOption.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",EditorOption[EditorOption.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",EditorOption[EditorOption.accessibilitySupport=2]="accessibilitySupport",EditorOption[EditorOption.accessibilityPageSize=3]="accessibilityPageSize",EditorOption[EditorOption.ariaLabel=4]="ariaLabel",EditorOption[EditorOption.autoClosingBrackets=5]="autoClosingBrackets",EditorOption[EditorOption.autoClosingOvertype=6]="autoClosingOvertype",EditorOption[EditorOption.autoClosingQuotes=7]="autoClosingQuotes",EditorOption[EditorOption.autoIndent=8]="autoIndent",EditorOption[EditorOption.automaticLayout=9]="automaticLayout",EditorOption[EditorOption.autoSurround=10]="autoSurround",EditorOption[EditorOption.codeLens=11]="codeLens",EditorOption[EditorOption.colorDecorators=12]="colorDecorators",EditorOption[EditorOption.columnSelection=13]="columnSelection",EditorOption[EditorOption.comments=14]="comments",EditorOption[EditorOption.contextmenu=15]="contextmenu",EditorOption[EditorOption.copyWithSyntaxHighlighting=16]="copyWithSyntaxHighlighting",EditorOption[EditorOption.cursorBlinking=17]="cursorBlinking",EditorOption[EditorOption.cursorSmoothCaretAnimation=18]="cursorSmoothCaretAnimation",EditorOption[EditorOption.cursorStyle=19]="cursorStyle",EditorOption[EditorOption.cursorSurroundingLines=20]="cursorSurroundingLines",EditorOption[EditorOption.cursorSurroundingLinesStyle=21]="cursorSurroundingLinesStyle",EditorOption[EditorOption.cursorWidth=22]="cursorWidth",EditorOption[EditorOption.disableLayerHinting=23]="disableLayerHinting",EditorOption[EditorOption.disableMonospaceOptimizations=24]="disableMonospaceOptimizations",EditorOption[EditorOption.dragAndDrop=25]="dragAndDrop",EditorOption[EditorOption.emptySelectionClipboard=26]="emptySelectionClipboard",EditorOption[EditorOption.extraEditorClassName=27]="extraEditorClassName",EditorOption[EditorOption.fastScrollSensitivity=28]="fastScrollSensitivity",EditorOption[EditorOption.find=29]="find",EditorOption[EditorOption.fixedOverflowWidgets=30]="fixedOverflowWidgets",EditorOption[EditorOption.folding=31]="folding",EditorOption[EditorOption.foldingStrategy=32]="foldingStrategy",EditorOption[EditorOption.foldingHighlight=33]="foldingHighlight",EditorOption[EditorOption.unfoldOnClickAfterEndOfLine=34]="unfoldOnClickAfterEndOfLine",EditorOption[EditorOption.fontFamily=35]="fontFamily",EditorOption[EditorOption.fontInfo=36]="fontInfo",EditorOption[EditorOption.fontLigatures=37]="fontLigatures",EditorOption[EditorOption.fontSize=38]="fontSize",EditorOption[EditorOption.fontWeight=39]="fontWeight",EditorOption[EditorOption.formatOnPaste=40]="formatOnPaste",EditorOption[EditorOption.formatOnType=41]="formatOnType",EditorOption[EditorOption.glyphMargin=42]="glyphMargin",EditorOption[EditorOption.gotoLocation=43]="gotoLocation",EditorOption[EditorOption.hideCursorInOverviewRuler=44]="hideCursorInOverviewRuler",EditorOption[EditorOption.highlightActiveIndentGuide=45]="highlightActiveIndentGuide",EditorOption[EditorOption.hover=46]="hover",EditorOption[EditorOption.inDiffEditor=47]="inDiffEditor",EditorOption[EditorOption.letterSpacing=48]="letterSpacing",EditorOption[EditorOption.lightbulb=49]="lightbulb",EditorOption[EditorOption.lineDecorationsWidth=50]="lineDecorationsWidth",EditorOption[EditorOption.lineHeight=51]="lineHeight",EditorOption[EditorOption.lineNumbers=52]="lineNumbers",EditorOption[EditorOption.lineNumbersMinChars=53]="lineNumbersMinChars",EditorOption[EditorOption.links=54]="links",EditorOption[EditorOption.matchBrackets=55]="matchBrackets",EditorOption[EditorOption.minimap=56]="minimap",EditorOption[EditorOption.mouseStyle=57]="mouseStyle",EditorOption[EditorOption.mouseWheelScrollSensitivity=58]="mouseWheelScrollSensitivity",EditorOption[EditorOption.mouseWheelZoom=59]="mouseWheelZoom",EditorOption[EditorOption.multiCursorMergeOverlapping=60]="multiCursorMergeOverlapping",EditorOption[EditorOption.multiCursorModifier=61]="multiCursorModifier",EditorOption[EditorOption.multiCursorPaste=62]="multiCursorPaste",EditorOption[EditorOption.occurrencesHighlight=63]="occurrencesHighlight",EditorOption[EditorOption.overviewRulerBorder=64]="overviewRulerBorder",EditorOption[EditorOption.overviewRulerLanes=65]="overviewRulerLanes",EditorOption[EditorOption.padding=66]="padding",EditorOption[EditorOption.parameterHints=67]="parameterHints",EditorOption[EditorOption.peekWidgetDefaultFocus=68]="peekWidgetDefaultFocus",EditorOption[EditorOption.definitionLinkOpensInPeek=69]="definitionLinkOpensInPeek",EditorOption[EditorOption.quickSuggestions=70]="quickSuggestions",EditorOption[EditorOption.quickSuggestionsDelay=71]="quickSuggestionsDelay",EditorOption[EditorOption.readOnly=72]="readOnly",EditorOption[EditorOption.renameOnType=73]="renameOnType",EditorOption[EditorOption.renderControlCharacters=74]="renderControlCharacters",EditorOption[EditorOption.renderIndentGuides=75]="renderIndentGuides",EditorOption[EditorOption.renderFinalNewline=76]="renderFinalNewline",EditorOption[EditorOption.renderLineHighlight=77]="renderLineHighlight",EditorOption[EditorOption.renderLineHighlightOnlyWhenFocus=78]="renderLineHighlightOnlyWhenFocus",EditorOption[EditorOption.renderValidationDecorations=79]="renderValidationDecorations",EditorOption[EditorOption.renderWhitespace=80]="renderWhitespace",EditorOption[EditorOption.revealHorizontalRightPadding=81]="revealHorizontalRightPadding",EditorOption[EditorOption.roundedSelection=82]="roundedSelection",EditorOption[EditorOption.rulers=83]="rulers",EditorOption[EditorOption.scrollbar=84]="scrollbar",EditorOption[EditorOption.scrollBeyondLastColumn=85]="scrollBeyondLastColumn",EditorOption[EditorOption.scrollBeyondLastLine=86]="scrollBeyondLastLine",EditorOption[EditorOption.scrollPredominantAxis=87]="scrollPredominantAxis",EditorOption[EditorOption.selectionClipboard=88]="selectionClipboard",EditorOption[EditorOption.selectionHighlight=89]="selectionHighlight",EditorOption[EditorOption.selectOnLineNumbers=90]="selectOnLineNumbers",EditorOption[EditorOption.showFoldingControls=91]="showFoldingControls",EditorOption[EditorOption.showUnused=92]="showUnused",EditorOption[EditorOption.snippetSuggestions=93]="snippetSuggestions",EditorOption[EditorOption.smoothScrolling=94]="smoothScrolling",EditorOption[EditorOption.stopRenderingLineAfter=95]="stopRenderingLineAfter",EditorOption[EditorOption.suggest=96]="suggest",EditorOption[EditorOption.suggestFontSize=97]="suggestFontSize",EditorOption[EditorOption.suggestLineHeight=98]="suggestLineHeight",EditorOption[EditorOption.suggestOnTriggerCharacters=99]="suggestOnTriggerCharacters",EditorOption[EditorOption.suggestSelection=100]="suggestSelection",EditorOption[EditorOption.tabCompletion=101]="tabCompletion",EditorOption[EditorOption.tabIndex=102]="tabIndex",EditorOption[EditorOption.unusualLineTerminators=103]="unusualLineTerminators",EditorOption[EditorOption.useTabStops=104]="useTabStops",EditorOption[EditorOption.wordSeparators=105]="wordSeparators",EditorOption[EditorOption.wordWrap=106]="wordWrap",EditorOption[EditorOption.wordWrapBreakAfterCharacters=107]="wordWrapBreakAfterCharacters",EditorOption[EditorOption.wordWrapBreakBeforeCharacters=108]="wordWrapBreakBeforeCharacters",EditorOption[EditorOption.wordWrapColumn=109]="wordWrapColumn",EditorOption[EditorOption.wordWrapMinified=110]="wordWrapMinified",EditorOption[EditorOption.wrappingIndent=111]="wrappingIndent",EditorOption[EditorOption.wrappingStrategy=112]="wrappingStrategy",EditorOption[EditorOption.showDeprecated=113]="showDeprecated",EditorOption[EditorOption.editorClassName=114]="editorClassName",EditorOption[EditorOption.pixelRatio=115]="pixelRatio",EditorOption[EditorOption.tabFocusMode=116]="tabFocusMode",EditorOption[EditorOption.layoutInfo=117]="layoutInfo",EditorOption[EditorOption.wrappingInfo=118]="wrappingInfo"}(EditorOption||(EditorOption={})),function(EndOfLinePreference){EndOfLinePreference[EndOfLinePreference.TextDefined=0]="TextDefined",EndOfLinePreference[EndOfLinePreference.LF=1]="LF",EndOfLinePreference[EndOfLinePreference.CRLF=2]="CRLF"}(EndOfLinePreference||(EndOfLinePreference={})),function(EndOfLineSequence){EndOfLineSequence[EndOfLineSequence.LF=0]="LF",EndOfLineSequence[EndOfLineSequence.CRLF=1]="CRLF"}(EndOfLineSequence||(EndOfLineSequence={})),function(IndentAction){IndentAction[IndentAction.None=0]="None",IndentAction[IndentAction.Indent=1]="Indent",IndentAction[IndentAction.IndentOutdent=2]="IndentOutdent",IndentAction[IndentAction.Outdent=3]="Outdent"}(IndentAction||(IndentAction={})),function(KeyCode){KeyCode[KeyCode.Unknown=0]="Unknown",KeyCode[KeyCode.Backspace=1]="Backspace",KeyCode[KeyCode.Tab=2]="Tab",KeyCode[KeyCode.Enter=3]="Enter",KeyCode[KeyCode.Shift=4]="Shift",KeyCode[KeyCode.Ctrl=5]="Ctrl",KeyCode[KeyCode.Alt=6]="Alt",KeyCode[KeyCode.PauseBreak=7]="PauseBreak",KeyCode[KeyCode.CapsLock=8]="CapsLock",KeyCode[KeyCode.Escape=9]="Escape",KeyCode[KeyCode.Space=10]="Space",KeyCode[KeyCode.PageUp=11]="PageUp",KeyCode[KeyCode.PageDown=12]="PageDown",KeyCode[KeyCode.End=13]="End",KeyCode[KeyCode.Home=14]="Home",KeyCode[KeyCode.LeftArrow=15]="LeftArrow",KeyCode[KeyCode.UpArrow=16]="UpArrow",KeyCode[KeyCode.RightArrow=17]="RightArrow",KeyCode[KeyCode.DownArrow=18]="DownArrow",KeyCode[KeyCode.Insert=19]="Insert",KeyCode[KeyCode.Delete=20]="Delete",KeyCode[KeyCode.KEY_0=21]="KEY_0",KeyCode[KeyCode.KEY_1=22]="KEY_1",KeyCode[KeyCode.KEY_2=23]="KEY_2",KeyCode[KeyCode.KEY_3=24]="KEY_3",KeyCode[KeyCode.KEY_4=25]="KEY_4",KeyCode[KeyCode.KEY_5=26]="KEY_5",KeyCode[KeyCode.KEY_6=27]="KEY_6",KeyCode[KeyCode.KEY_7=28]="KEY_7",KeyCode[KeyCode.KEY_8=29]="KEY_8",KeyCode[KeyCode.KEY_9=30]="KEY_9",KeyCode[KeyCode.KEY_A=31]="KEY_A",KeyCode[KeyCode.KEY_B=32]="KEY_B",KeyCode[KeyCode.KEY_C=33]="KEY_C",KeyCode[KeyCode.KEY_D=34]="KEY_D",KeyCode[KeyCode.KEY_E=35]="KEY_E",KeyCode[KeyCode.KEY_F=36]="KEY_F",KeyCode[KeyCode.KEY_G=37]="KEY_G",KeyCode[KeyCode.KEY_H=38]="KEY_H",KeyCode[KeyCode.KEY_I=39]="KEY_I",KeyCode[KeyCode.KEY_J=40]="KEY_J",KeyCode[KeyCode.KEY_K=41]="KEY_K",KeyCode[KeyCode.KEY_L=42]="KEY_L",KeyCode[KeyCode.KEY_M=43]="KEY_M",KeyCode[KeyCode.KEY_N=44]="KEY_N",KeyCode[KeyCode.KEY_O=45]="KEY_O",KeyCode[KeyCode.KEY_P=46]="KEY_P",KeyCode[KeyCode.KEY_Q=47]="KEY_Q",KeyCode[KeyCode.KEY_R=48]="KEY_R",KeyCode[KeyCode.KEY_S=49]="KEY_S",KeyCode[KeyCode.KEY_T=50]="KEY_T",KeyCode[KeyCode.KEY_U=51]="KEY_U",KeyCode[KeyCode.KEY_V=52]="KEY_V",KeyCode[KeyCode.KEY_W=53]="KEY_W",KeyCode[KeyCode.KEY_X=54]="KEY_X",KeyCode[KeyCode.KEY_Y=55]="KEY_Y",KeyCode[KeyCode.KEY_Z=56]="KEY_Z",KeyCode[KeyCode.Meta=57]="Meta",KeyCode[KeyCode.ContextMenu=58]="ContextMenu",KeyCode[KeyCode.F1=59]="F1",KeyCode[KeyCode.F2=60]="F2",KeyCode[KeyCode.F3=61]="F3",KeyCode[KeyCode.F4=62]="F4",KeyCode[KeyCode.F5=63]="F5",KeyCode[KeyCode.F6=64]="F6",KeyCode[KeyCode.F7=65]="F7",KeyCode[KeyCode.F8=66]="F8",KeyCode[KeyCode.F9=67]="F9",KeyCode[KeyCode.F10=68]="F10",KeyCode[KeyCode.F11=69]="F11",KeyCode[KeyCode.F12=70]="F12",KeyCode[KeyCode.F13=71]="F13",KeyCode[KeyCode.F14=72]="F14",KeyCode[KeyCode.F15=73]="F15",KeyCode[KeyCode.F16=74]="F16",KeyCode[KeyCode.F17=75]="F17",KeyCode[KeyCode.F18=76]="F18",KeyCode[KeyCode.F19=77]="F19",KeyCode[KeyCode.NumLock=78]="NumLock",KeyCode[KeyCode.ScrollLock=79]="ScrollLock",KeyCode[KeyCode.US_SEMICOLON=80]="US_SEMICOLON",KeyCode[KeyCode.US_EQUAL=81]="US_EQUAL",KeyCode[KeyCode.US_COMMA=82]="US_COMMA",KeyCode[KeyCode.US_MINUS=83]="US_MINUS",KeyCode[KeyCode.US_DOT=84]="US_DOT",KeyCode[KeyCode.US_SLASH=85]="US_SLASH",KeyCode[KeyCode.US_BACKTICK=86]="US_BACKTICK",KeyCode[KeyCode.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",KeyCode[KeyCode.US_BACKSLASH=88]="US_BACKSLASH",KeyCode[KeyCode.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",KeyCode[KeyCode.US_QUOTE=90]="US_QUOTE",KeyCode[KeyCode.OEM_8=91]="OEM_8",KeyCode[KeyCode.OEM_102=92]="OEM_102",KeyCode[KeyCode.NUMPAD_0=93]="NUMPAD_0",KeyCode[KeyCode.NUMPAD_1=94]="NUMPAD_1",KeyCode[KeyCode.NUMPAD_2=95]="NUMPAD_2",KeyCode[KeyCode.NUMPAD_3=96]="NUMPAD_3",KeyCode[KeyCode.NUMPAD_4=97]="NUMPAD_4",KeyCode[KeyCode.NUMPAD_5=98]="NUMPAD_5",KeyCode[KeyCode.NUMPAD_6=99]="NUMPAD_6",KeyCode[KeyCode.NUMPAD_7=100]="NUMPAD_7",KeyCode[KeyCode.NUMPAD_8=101]="NUMPAD_8",KeyCode[KeyCode.NUMPAD_9=102]="NUMPAD_9",KeyCode[KeyCode.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",KeyCode[KeyCode.NUMPAD_ADD=104]="NUMPAD_ADD",KeyCode[KeyCode.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",KeyCode[KeyCode.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",KeyCode[KeyCode.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",KeyCode[KeyCode.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",KeyCode[KeyCode.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",KeyCode[KeyCode.ABNT_C1=110]="ABNT_C1",KeyCode[KeyCode.ABNT_C2=111]="ABNT_C2",KeyCode[KeyCode.MAX_VALUE=112]="MAX_VALUE"}(KeyCode||(KeyCode={})),function(MarkerSeverity){MarkerSeverity[MarkerSeverity.Hint=1]="Hint",MarkerSeverity[MarkerSeverity.Info=2]="Info",MarkerSeverity[MarkerSeverity.Warning=4]="Warning",MarkerSeverity[MarkerSeverity.Error=8]="Error"}(MarkerSeverity||(MarkerSeverity={})),function(MarkerTag){MarkerTag[MarkerTag.Unnecessary=1]="Unnecessary",MarkerTag[MarkerTag.Deprecated=2]="Deprecated"}(MarkerTag||(MarkerTag={})),function(MinimapPosition){MinimapPosition[MinimapPosition.Inline=1]="Inline",MinimapPosition[MinimapPosition.Gutter=2]="Gutter"}(MinimapPosition||(MinimapPosition={})),function(MouseTargetType){MouseTargetType[MouseTargetType.UNKNOWN=0]="UNKNOWN",MouseTargetType[MouseTargetType.TEXTAREA=1]="TEXTAREA",MouseTargetType[MouseTargetType.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",MouseTargetType[MouseTargetType.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",MouseTargetType[MouseTargetType.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",MouseTargetType[MouseTargetType.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",MouseTargetType[MouseTargetType.CONTENT_TEXT=6]="CONTENT_TEXT",MouseTargetType[MouseTargetType.CONTENT_EMPTY=7]="CONTENT_EMPTY",MouseTargetType[MouseTargetType.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",MouseTargetType[MouseTargetType.CONTENT_WIDGET=9]="CONTENT_WIDGET",MouseTargetType[MouseTargetType.OVERVIEW_RULER=10]="OVERVIEW_RULER",MouseTargetType[MouseTargetType.SCROLLBAR=11]="SCROLLBAR",MouseTargetType[MouseTargetType.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",MouseTargetType[MouseTargetType.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(MouseTargetType||(MouseTargetType={})),function(OverlayWidgetPositionPreference){OverlayWidgetPositionPreference[OverlayWidgetPositionPreference.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",OverlayWidgetPositionPreference[OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",OverlayWidgetPositionPreference[OverlayWidgetPositionPreference.TOP_CENTER=2]="TOP_CENTER"}(OverlayWidgetPositionPreference||(OverlayWidgetPositionPreference={})),function(OverviewRulerLane){OverviewRulerLane[OverviewRulerLane.Left=1]="Left",OverviewRulerLane[OverviewRulerLane.Center=2]="Center",OverviewRulerLane[OverviewRulerLane.Right=4]="Right",OverviewRulerLane[OverviewRulerLane.Full=7]="Full"}(OverviewRulerLane||(OverviewRulerLane={})),function(RenderLineNumbersType){RenderLineNumbersType[RenderLineNumbersType.Off=0]="Off",RenderLineNumbersType[RenderLineNumbersType.On=1]="On",RenderLineNumbersType[RenderLineNumbersType.Relative=2]="Relative",RenderLineNumbersType[RenderLineNumbersType.Interval=3]="Interval",RenderLineNumbersType[RenderLineNumbersType.Custom=4]="Custom"}(RenderLineNumbersType||(RenderLineNumbersType={})),function(RenderMinimap){RenderMinimap[RenderMinimap.None=0]="None",RenderMinimap[RenderMinimap.Text=1]="Text",RenderMinimap[RenderMinimap.Blocks=2]="Blocks"}(RenderMinimap||(RenderMinimap={})),function(ScrollType){ScrollType[ScrollType.Smooth=0]="Smooth",ScrollType[ScrollType.Immediate=1]="Immediate"}(ScrollType||(ScrollType={})),function(ScrollbarVisibility){ScrollbarVisibility[ScrollbarVisibility.Auto=1]="Auto",ScrollbarVisibility[ScrollbarVisibility.Hidden=2]="Hidden",ScrollbarVisibility[ScrollbarVisibility.Visible=3]="Visible"}(ScrollbarVisibility||(ScrollbarVisibility={})),function(SelectionDirection){SelectionDirection[SelectionDirection.LTR=0]="LTR",SelectionDirection[SelectionDirection.RTL=1]="RTL"}(SelectionDirection||(SelectionDirection={})),function(SignatureHelpTriggerKind){SignatureHelpTriggerKind[SignatureHelpTriggerKind.Invoke=1]="Invoke",SignatureHelpTriggerKind[SignatureHelpTriggerKind.TriggerCharacter=2]="TriggerCharacter",SignatureHelpTriggerKind[SignatureHelpTriggerKind.ContentChange=3]="ContentChange"}(SignatureHelpTriggerKind||(SignatureHelpTriggerKind={})),function(SymbolKind){SymbolKind[SymbolKind.File=0]="File",SymbolKind[SymbolKind.Module=1]="Module",SymbolKind[SymbolKind.Namespace=2]="Namespace",SymbolKind[SymbolKind.Package=3]="Package",SymbolKind[SymbolKind.Class=4]="Class",SymbolKind[SymbolKind.Method=5]="Method",SymbolKind[SymbolKind.Property=6]="Property",SymbolKind[SymbolKind.Field=7]="Field",SymbolKind[SymbolKind.Constructor=8]="Constructor",SymbolKind[SymbolKind.Enum=9]="Enum",SymbolKind[SymbolKind.Interface=10]="Interface",SymbolKind[SymbolKind.Function=11]="Function",SymbolKind[SymbolKind.Variable=12]="Variable",SymbolKind[SymbolKind.Constant=13]="Constant",SymbolKind[SymbolKind.String=14]="String",SymbolKind[SymbolKind.Number=15]="Number",SymbolKind[SymbolKind.Boolean=16]="Boolean",SymbolKind[SymbolKind.Array=17]="Array",SymbolKind[SymbolKind.Object=18]="Object",SymbolKind[SymbolKind.Key=19]="Key",SymbolKind[SymbolKind.Null=20]="Null",SymbolKind[SymbolKind.EnumMember=21]="EnumMember",SymbolKind[SymbolKind.Struct=22]="Struct",SymbolKind[SymbolKind.Event=23]="Event",SymbolKind[SymbolKind.Operator=24]="Operator",SymbolKind[SymbolKind.TypeParameter=25]="TypeParameter"}(SymbolKind||(SymbolKind={})),function(SymbolTag){SymbolTag[SymbolTag.Deprecated=1]="Deprecated"}(SymbolTag||(SymbolTag={})),function(TextEditorCursorBlinkingStyle){TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle.Hidden=0]="Hidden",TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle.Blink=1]="Blink",TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle.Smooth=2]="Smooth",TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle.Phase=3]="Phase",TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle.Expand=4]="Expand",TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle.Solid=5]="Solid"}(TextEditorCursorBlinkingStyle||(TextEditorCursorBlinkingStyle={})),function(TextEditorCursorStyle){TextEditorCursorStyle[TextEditorCursorStyle.Line=1]="Line",TextEditorCursorStyle[TextEditorCursorStyle.Block=2]="Block",TextEditorCursorStyle[TextEditorCursorStyle.Underline=3]="Underline",TextEditorCursorStyle[TextEditorCursorStyle.LineThin=4]="LineThin",TextEditorCursorStyle[TextEditorCursorStyle.BlockOutline=5]="BlockOutline",TextEditorCursorStyle[TextEditorCursorStyle.UnderlineThin=6]="UnderlineThin"}(TextEditorCursorStyle||(TextEditorCursorStyle={})),function(TrackedRangeStickiness){TrackedRangeStickiness[TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",TrackedRangeStickiness[TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",TrackedRangeStickiness[TrackedRangeStickiness.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",TrackedRangeStickiness[TrackedRangeStickiness.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(TrackedRangeStickiness||(TrackedRangeStickiness={})),function(WrappingIndent){WrappingIndent[WrappingIndent.None=0]="None",WrappingIndent[WrappingIndent.Same=1]="Same",WrappingIndent[WrappingIndent.Indent=2]="Indent",WrappingIndent[WrappingIndent.DeepIndent=3]="DeepIndent"}(WrappingIndent||(WrappingIndent={}));class standaloneBase_KeyMod{static chord(firstPart,secondPart){return function KeyChord(firstPart,secondPart){return(firstPart|(65535&secondPart)<<16>>>0)>>>0}(firstPart,secondPart)}}standaloneBase_KeyMod.CtrlCmd=2048,standaloneBase_KeyMod.Shift=1024,standaloneBase_KeyMod.Alt=512,standaloneBase_KeyMod.WinCtrl=256;var __awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class editorSimpleWorker_MirrorModel extends class mirrorTextModel_MirrorTextModel{constructor(uri,lines,eol,versionId){this._uri=uri,this._lines=lines,this._eol=eol,this._versionId=versionId,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const changes=e.changes;for(const change of changes)this._acceptDeleteRange(change.range),this._acceptInsertText(new Position(change.range.startLineNumber,change.range.startColumn),change.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const eolLength=this._eol.length,linesLength=this._lines.length,lineStartValues=new Uint32Array(linesLength);for(let i=0;i<linesLength;i++)lineStartValues[i]=this._lines[i].length+eolLength;this._lineStarts=new prefixSumComputer_PrefixSumComputer(lineStartValues)}}_setLineText(lineIndex,newValue){this._lines[lineIndex]=newValue,this._lineStarts&&this._lineStarts.changeValue(lineIndex,this._lines[lineIndex].length+this._eol.length)}_acceptDeleteRange(range){if(range.startLineNumber!==range.endLineNumber)this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.endLineNumber-1].substring(range.endColumn-1)),this._lines.splice(range.startLineNumber,range.endLineNumber-range.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(range.startLineNumber,range.endLineNumber-range.startLineNumber);else{if(range.startColumn===range.endColumn)return;this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.startLineNumber-1].substring(range.endColumn-1))}}_acceptInsertText(position,insertText){if(0===insertText.length)return;let insertLines=insertText.split(/\r\n|\r|\n/);if(1===insertLines.length)return void this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]+this._lines[position.lineNumber-1].substring(position.column-1));insertLines[insertLines.length-1]+=this._lines[position.lineNumber-1].substring(position.column-1),this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]);let newLengths=new Uint32Array(insertLines.length-1);for(let i=1;i<insertLines.length;i++)this._lines.splice(position.lineNumber+i-1,0,insertLines[i]),newLengths[i-1]=insertLines[i].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(position.lineNumber,newLengths)}}{get uri(){return this._uri}get version(){return this._versionId}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(lineNumber){return this._lines[lineNumber-1]}getWordAtPosition(position,wordDefinition){let wordAtText=function getWordAtText(column,wordDefinition,text,textOffset,config=_defaultConfig){if(text.length>config.maxLen){let start=column-config.maxLen/2;return start<0?(textOffset+=column,start=0):textOffset+=start,getWordAtText(column,wordDefinition,text=text.substring(start,column+config.maxLen/2),textOffset,config)}Date.now();const pos=column-1-textOffset;let prevRegexIndex=-1,match=null;for(let i=1;;i++){Date.now(),config.timeBudget;const regexIndex=pos-config.windowSize*i;wordDefinition.lastIndex=Math.max(0,regexIndex);const thisMatch=_findRegexMatchEnclosingPosition(wordDefinition,text,pos,prevRegexIndex);if(!thisMatch&&match)break;if(match=thisMatch,regexIndex<=0)break;prevRegexIndex=regexIndex}if(match){let result={word:match[0],startColumn:textOffset+1+match.index,endColumn:textOffset+1+match.index+match[0].length};return wordDefinition.lastIndex=0,result}return null}(position.column,function ensureValidWordDefinition(wordDefinition){let result=DEFAULT_WORD_REGEXP;if(wordDefinition&&wordDefinition instanceof RegExp)if(wordDefinition.global)result=wordDefinition;else{let flags="g";wordDefinition.ignoreCase&&(flags+="i"),wordDefinition.multiline&&(flags+="m"),wordDefinition.unicode&&(flags+="u"),result=new RegExp(wordDefinition.source,flags)}return result.lastIndex=0,result}(wordDefinition),this._lines[position.lineNumber-1],0);return wordAtText?new range_Range(position.lineNumber,wordAtText.startColumn,position.lineNumber,wordAtText.endColumn):null}words(wordDefinition){const lines=this._lines,wordenize=this._wordenize.bind(this);let lineNumber=0,lineText="",wordRangesIdx=0,wordRanges=[];return{*[Symbol.iterator](){for(;;)if(wordRangesIdx<wordRanges.length){const value=lineText.substring(wordRanges[wordRangesIdx].start,wordRanges[wordRangesIdx].end);wordRangesIdx+=1,yield value}else{if(!(lineNumber<lines.length))break;lineText=lines[lineNumber],wordRanges=wordenize(lineText,wordDefinition),wordRangesIdx=0,lineNumber+=1}}}}getLineWords(lineNumber,wordDefinition){let content=this._lines[lineNumber-1],ranges=this._wordenize(content,wordDefinition),words=[];for(const range of ranges)words.push({word:content.substring(range.start,range.end),startColumn:range.start+1,endColumn:range.end+1});return words}_wordenize(content,wordDefinition){const result=[];let match;for(wordDefinition.lastIndex=0;(match=wordDefinition.exec(content))&&0!==match[0].length;)result.push({start:match.index,end:match.index+match[0].length});return result}getValueInRange(range){if((range=this._validateRange(range)).startLineNumber===range.endLineNumber)return this._lines[range.startLineNumber-1].substring(range.startColumn-1,range.endColumn-1);let lineEnding=this._eol,startLineIndex=range.startLineNumber-1,endLineIndex=range.endLineNumber-1,resultLines=[];resultLines.push(this._lines[startLineIndex].substring(range.startColumn-1));for(let i=startLineIndex+1;i<endLineIndex;i++)resultLines.push(this._lines[i]);return resultLines.push(this._lines[endLineIndex].substring(0,range.endColumn-1)),resultLines.join(lineEnding)}offsetAt(position){return position=this._validatePosition(position),this._ensureLineStarts(),this._lineStarts.getAccumulatedValue(position.lineNumber-2)+(position.column-1)}positionAt(offset){offset=Math.floor(offset),offset=Math.max(0,offset),this._ensureLineStarts();let out=this._lineStarts.getIndexOf(offset),lineLength=this._lines[out.index].length;return{lineNumber:1+out.index,column:1+Math.min(out.remainder,lineLength)}}_validateRange(range){const start=this._validatePosition({lineNumber:range.startLineNumber,column:range.startColumn}),end=this._validatePosition({lineNumber:range.endLineNumber,column:range.endColumn});return start.lineNumber!==range.startLineNumber||start.column!==range.startColumn||end.lineNumber!==range.endLineNumber||end.column!==range.endColumn?{startLineNumber:start.lineNumber,startColumn:start.column,endLineNumber:end.lineNumber,endColumn:end.column}:range}_validatePosition(position){if(!Position.isIPosition(position))throw new Error("bad position");let{lineNumber:lineNumber,column:column}=position,hasChanged=!1;if(lineNumber<1)lineNumber=1,column=1,hasChanged=!0;else if(lineNumber>this._lines.length)lineNumber=this._lines.length,column=this._lines[lineNumber-1].length+1,hasChanged=!0;else{let maxCharacter=this._lines[lineNumber-1].length+1;column<1?(column=1,hasChanged=!0):column>maxCharacter&&(column=maxCharacter,hasChanged=!0)}return hasChanged?{lineNumber:lineNumber,column:column}:position}}class editorSimpleWorker_EditorSimpleWorker{constructor(host,foreignModuleFactory){this._host=host,this._models=Object.create(null),this._foreignModuleFactory=foreignModuleFactory,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(uri){return this._models[uri]}_getModels(){let all=[];return Object.keys(this._models).forEach(key=>all.push(this._models[key])),all}acceptNewModel(data){this._models[data.url]=new editorSimpleWorker_MirrorModel(uri_URI.parse(data.url),data.lines,data.EOL,data.versionId)}acceptModelChanged(strURL,e){if(!this._models[strURL])return;this._models[strURL].onEvents(e)}acceptRemovedModel(strURL){this._models[strURL]&&delete this._models[strURL]}computeDiff(originalUrl,modifiedUrl,ignoreTrimWhitespace,maxComputationTime){return __awaiter(this,void 0,void 0,(function*(){const original=this._getModel(originalUrl),modified=this._getModel(modifiedUrl);if(!original||!modified)return null;const originalLines=original.getLinesContent(),modifiedLines=modified.getLinesContent(),diffResult=new DiffComputer(originalLines,modifiedLines,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:ignoreTrimWhitespace,shouldMakePrettyDiff:!0,maxComputationTime:maxComputationTime}).computeDiff(),identical=!(diffResult.changes.length>0)&&this._modelsAreIdentical(original,modified);return{quitEarly:diffResult.quitEarly,identical:identical,changes:diffResult.changes}}))}_modelsAreIdentical(original,modified){const originalLineCount=original.getLineCount();if(originalLineCount!==modified.getLineCount())return!1;for(let line=1;line<=originalLineCount;line++){if(original.getLineContent(line)!==modified.getLineContent(line))return!1}return!0}computeMoreMinimalEdits(modelUrl,edits){return __awaiter(this,void 0,void 0,(function*(){const model=this._getModel(modelUrl);if(!model)return edits;const result=[];let lastEol=void 0;edits=mergeSort(edits,(a,b)=>{if(a.range&&b.range)return range_Range.compareRangesUsingStarts(a.range,b.range);return(a.range?0:1)-(b.range?0:1)});for(let{range:range,text:text,eol:eol}of edits){if("number"==typeof eol&&(lastEol=eol),range_Range.isEmpty(range)&&!text)continue;const original=model.getValueInRange(range);if(text=text.replace(/\r\n|\n|\r/g,model.eol),original===text)continue;if(Math.max(text.length,original.length)>editorSimpleWorker_EditorSimpleWorker._diffLimit){result.push({range:range,text:text});continue}const changes=stringDiff(original,text,!1),editOffset=model.offsetAt(range_Range.lift(range).getStartPosition());for(const change of changes){const start=model.positionAt(editOffset+change.originalStart),end=model.positionAt(editOffset+change.originalStart+change.originalLength),newEdit={text:text.substr(change.modifiedStart,change.modifiedLength),range:{startLineNumber:start.lineNumber,startColumn:start.column,endLineNumber:end.lineNumber,endColumn:end.column}};model.getValueInRange(newEdit.range)!==newEdit.text&&result.push(newEdit)}}return"number"==typeof lastEol&&result.push({eol:lastEol,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),result}))}computeLinks(modelUrl){return __awaiter(this,void 0,void 0,(function*(){let model=this._getModel(modelUrl);return model?function computeLinks(model){return model&&"function"==typeof model.getLineCount&&"function"==typeof model.getLineContent?LinkComputer.computeLinks(model):[]}(model):null}))}textualSuggest(modelUrl,position,wordDef,wordDefFlags){return __awaiter(this,void 0,void 0,(function*(){const model=this._getModel(modelUrl);if(!model)return null;const words=[],seen=new Set,wordDefRegExp=new RegExp(wordDef,wordDefFlags),wordAt=model.getWordAtPosition(position,wordDefRegExp);wordAt&&seen.add(model.getValueInRange(wordAt));for(let word of model.words(wordDefRegExp))if(!seen.has(word)&&(seen.add(word),isNaN(Number(word))&&(words.push(word),seen.size>editorSimpleWorker_EditorSimpleWorker._suggestionsLimit)))break;return words}))}computeWordRanges(modelUrl,range,wordDef,wordDefFlags){return __awaiter(this,void 0,void 0,(function*(){let model=this._getModel(modelUrl);if(!model)return Object.create(null);const wordDefRegExp=new RegExp(wordDef,wordDefFlags),result=Object.create(null);for(let line=range.startLineNumber;line<range.endLineNumber;line++){let words=model.getLineWords(line,wordDefRegExp);for(const word of words){if(!isNaN(Number(word.word)))continue;let array=result[word.word];array||(array=[],result[word.word]=array),array.push({startLineNumber:line,startColumn:word.startColumn,endLineNumber:line,endColumn:word.endColumn})}}return result}))}navigateValueSet(modelUrl,range,up,wordDef,wordDefFlags){return __awaiter(this,void 0,void 0,(function*(){let model=this._getModel(modelUrl);if(!model)return null;let wordDefRegExp=new RegExp(wordDef,wordDefFlags);range.startColumn===range.endColumn&&(range={startLineNumber:range.startLineNumber,startColumn:range.startColumn,endLineNumber:range.endLineNumber,endColumn:range.endColumn+1});let selectionText=model.getValueInRange(range),wordRange=model.getWordAtPosition({lineNumber:range.startLineNumber,column:range.startColumn},wordDefRegExp);if(!wordRange)return null;let word=model.getValueInRange(wordRange);return BasicInplaceReplace.INSTANCE.navigateValueSet(range,selectionText,wordRange,word,up)}))}loadForeignModule(moduleId,createData,foreignHostMethods){let ctx={host:createProxyObject(foreignHostMethods,(method,args)=>this._host.fhr(method,args)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(ctx,createData),Promise.resolve(getAllMethodNames(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(method,args){if(!this._foreignModule||"function"!=typeof this._foreignModule[method])return Promise.reject(new Error("Missing requestHandler or method: "+method));try{return Promise.resolve(this._foreignModule[method].apply(this._foreignModule,args))}catch(e){return Promise.reject(e)}}}editorSimpleWorker_EditorSimpleWorker._diffLimit=1e5,editorSimpleWorker_EditorSimpleWorker._suggestionsLimit=1e4,"function"==typeof importScripts&&(platform.a.monaco=function createMonacoBaseAPI(){return{editor:void 0,languages:void 0,CancellationTokenSource:CancellationTokenSource,Emitter:event_Emitter,KeyCode:KeyCode,KeyMod:standaloneBase_KeyMod,Position:Position,Range:range_Range,Selection:selection_Selection,SelectionDirection:SelectionDirection,MarkerSeverity:MarkerSeverity,MarkerTag:MarkerTag,Uri:uri_URI,Token:Token}}());let initialized=!1;function initialize(foreignModule){if(initialized)return;initialized=!0;const simpleWorker=new simpleWorker_SimpleWorkerServer(msg=>{self.postMessage(msg)},host=>new editorSimpleWorker_EditorSimpleWorker(host,foreignModule));self.onmessage=e=>{simpleWorker.onmessage(e.data)}}function createScanner(text,ignoreTrivia){void 0===ignoreTrivia&&(ignoreTrivia=!1);var len=text.length,pos=0,value="",tokenOffset=0,token=16,lineNumber=0,lineStartOffset=0,tokenLineStartOffset=0,prevTokenLineStartOffset=0,scanError=0;function scanHexDigits(count,exact){for(var digits=0,value=0;digits<count||!exact;){var ch=text.charCodeAt(pos);if(ch>=48&&ch<=57)value=16*value+ch-48;else if(ch>=65&&ch<=70)value=16*value+ch-65+10;else{if(!(ch>=97&&ch<=102))break;value=16*value+ch-97+10}pos++,digits++}return digits<count&&(value=-1),value}function scanNext(){if(value="",scanError=0,tokenOffset=pos,lineStartOffset=lineNumber,prevTokenLineStartOffset=tokenLineStartOffset,pos>=len)return tokenOffset=len,token=17;var code=text.charCodeAt(pos);if(isWhiteSpace(code)){do{pos++,value+=String.fromCharCode(code),code=text.charCodeAt(pos)}while(isWhiteSpace(code));return token=15}if(isLineBreak(code))return pos++,value+=String.fromCharCode(code),13===code&&10===text.charCodeAt(pos)&&(pos++,value+="\n"),lineNumber++,tokenLineStartOffset=pos,token=14;switch(code){case 123:return pos++,token=1;case 125:return pos++,token=2;case 91:return pos++,token=3;case 93:return pos++,token=4;case 58:return pos++,token=6;case 44:return pos++,token=5;case 34:return pos++,value=function scanString(){for(var result="",start=pos;;){if(pos>=len){result+=text.substring(start,pos),scanError=2;break}var ch=text.charCodeAt(pos);if(34===ch){result+=text.substring(start,pos),pos++;break}if(92!==ch){if(ch>=0&&ch<=31){if(isLineBreak(ch)){result+=text.substring(start,pos),scanError=2;break}scanError=6}pos++}else{if(result+=text.substring(start,pos),++pos>=len){scanError=2;break}switch(text.charCodeAt(pos++)){case 34:result+='"';break;case 92:result+="\\";break;case 47:result+="/";break;case 98:result+="\b";break;case 102:result+="\f";break;case 110:result+="\n";break;case 114:result+="\r";break;case 116:result+="\t";break;case 117:var ch3=scanHexDigits(4,!0);ch3>=0?result+=String.fromCharCode(ch3):scanError=4;break;default:scanError=5}start=pos}}return result}(),token=10;case 47:var start=pos-1;if(47===text.charCodeAt(pos+1)){for(pos+=2;pos<len&&!isLineBreak(text.charCodeAt(pos));)pos++;return value=text.substring(start,pos),token=12}if(42===text.charCodeAt(pos+1)){pos+=2;for(var safeLength=len-1,commentClosed=!1;pos<safeLength;){var ch=text.charCodeAt(pos);if(42===ch&&47===text.charCodeAt(pos+1)){pos+=2,commentClosed=!0;break}pos++,isLineBreak(ch)&&(13===ch&&10===text.charCodeAt(pos)&&pos++,lineNumber++,tokenLineStartOffset=pos)}return commentClosed||(pos++,scanError=1),value=text.substring(start,pos),token=13}return value+=String.fromCharCode(code),pos++,token=16;case 45:if(value+=String.fromCharCode(code),++pos===len||!isDigit(text.charCodeAt(pos)))return token=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return value+=function scanNumber(){var start=pos;if(48===text.charCodeAt(pos))pos++;else for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++;if(pos<text.length&&46===text.charCodeAt(pos)){if(!(++pos<text.length&&isDigit(text.charCodeAt(pos))))return scanError=3,text.substring(start,pos);for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++}var end=pos;if(pos<text.length&&(69===text.charCodeAt(pos)||101===text.charCodeAt(pos)))if((++pos<text.length&&43===text.charCodeAt(pos)||45===text.charCodeAt(pos))&&pos++,pos<text.length&&isDigit(text.charCodeAt(pos))){for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++;end=pos}else scanError=3;return text.substring(start,end)}(),token=11;default:for(;pos<len&&isUnknownContentCharacter(code);)pos++,code=text.charCodeAt(pos);if(tokenOffset!==pos){switch(value=text.substring(tokenOffset,pos)){case"true":return token=8;case"false":return token=9;case"null":return token=7}return token=16}return value+=String.fromCharCode(code),pos++,token=16}}function isUnknownContentCharacter(code){if(isWhiteSpace(code)||isLineBreak(code))return!1;switch(code){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function setPosition(newPosition){pos=newPosition,value="",tokenOffset=0,token=16,scanError=0},getPosition:function(){return pos},scan:ignoreTrivia?function scanNextNonTrivia(){var result;do{result=scanNext()}while(result>=12&&result<=15);return result}:scanNext,getToken:function(){return token},getTokenValue:function(){return value},getTokenOffset:function(){return tokenOffset},getTokenLength:function(){return pos-tokenOffset},getTokenStartLine:function(){return lineStartOffset},getTokenStartCharacter:function(){return tokenOffset-prevTokenLineStartOffset},getTokenError:function(){return scanError}}}function isWhiteSpace(ch){return 32===ch||9===ch||11===ch||12===ch||160===ch||5760===ch||ch>=8192&&ch<=8203||8239===ch||8287===ch||12288===ch||65279===ch}function isLineBreak(ch){return 10===ch||13===ch||8232===ch||8233===ch}function isDigit(ch){return ch>=48&&ch<=57}function format_format(documentText,range,options){var initialIndentLevel,formatText,formatTextStart,rangeStart,rangeEnd;if(range){for(rangeStart=range.offset,rangeEnd=rangeStart+range.length,formatTextStart=rangeStart;formatTextStart>0&&!isEOL(documentText,formatTextStart-1);)formatTextStart--;for(var endOffset=rangeEnd;endOffset<documentText.length&&!isEOL(documentText,endOffset);)endOffset++;formatText=documentText.substring(formatTextStart,endOffset),initialIndentLevel=function computeIndentLevel(content,options){var i=0,nChars=0,tabSize=options.tabSize||4;for(;i<content.length;){var ch=content.charAt(i);if(" "===ch)nChars++;else{if("\t"!==ch)break;nChars+=tabSize}i++}return Math.floor(nChars/tabSize)}(formatText,options)}else formatText=documentText,initialIndentLevel=0,formatTextStart=0,rangeStart=0,rangeEnd=documentText.length;var indentValue,eol=function getEOL(options,text){for(var i=0;i<text.length;i++){var ch=text.charAt(i);if("\r"===ch)return i+1<text.length&&"\n"===text.charAt(i+1)?"\r\n":"\r";if("\n"===ch)return"\n"}return options&&options.eol||"\n"}(options,documentText),lineBreak=!1,indentLevel=0;indentValue=options.insertSpaces?repeat(" ",options.tabSize||4):"\t";var scanner=createScanner(formatText,!1),hasError=!1;function newLineAndIndent(){return eol+repeat(indentValue,initialIndentLevel+indentLevel)}function scanNext(){var token=scanner.scan();for(lineBreak=!1;15===token||14===token;)lineBreak=lineBreak||14===token,token=scanner.scan();return hasError=16===token||0!==scanner.getTokenError(),token}var editOperations=[];function addEdit(text,startOffset,endOffset){!hasError&&startOffset<rangeEnd&&endOffset>rangeStart&&documentText.substring(startOffset,endOffset)!==text&&editOperations.push({offset:startOffset,length:endOffset-startOffset,content:text})}var firstToken=scanNext();if(17!==firstToken){var firstTokenStart=scanner.getTokenOffset()+formatTextStart;addEdit(repeat(indentValue,initialIndentLevel),formatTextStart,firstTokenStart)}for(;17!==firstToken;){for(var firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart,secondToken=scanNext(),replaceContent="";!lineBreak&&(12===secondToken||13===secondToken);){addEdit(" ",firstTokenEnd,scanner.getTokenOffset()+formatTextStart),firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart,replaceContent=12===secondToken?newLineAndIndent():"",secondToken=scanNext()}if(2===secondToken)1!==firstToken&&(indentLevel--,replaceContent=newLineAndIndent());else if(4===secondToken)3!==firstToken&&(indentLevel--,replaceContent=newLineAndIndent());else{switch(firstToken){case 3:case 1:indentLevel++,replaceContent=newLineAndIndent();break;case 5:case 12:replaceContent=newLineAndIndent();break;case 13:replaceContent=lineBreak?newLineAndIndent():" ";break;case 6:replaceContent=" ";break;case 10:if(6===secondToken){replaceContent="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===secondToken||13===secondToken?replaceContent=" ":5!==secondToken&&17!==secondToken&&(hasError=!0);break;case 16:hasError=!0}!lineBreak||12!==secondToken&&13!==secondToken||(replaceContent=newLineAndIndent())}addEdit(replaceContent,firstTokenEnd,scanner.getTokenOffset()+formatTextStart),firstToken=secondToken}return editOperations}function repeat(s,count){for(var result="",i=0;i<count;i++)result+=s;return result}function isEOL(text,offset){return-1!=="\r\n".indexOf(text.charAt(offset))}var ParseOptions;function visit(text,visitor,options){void 0===options&&(options=ParseOptions.DEFAULT);var _scanner=createScanner(text,!1);function toNoArgVisit(visitFunction){return visitFunction?function(){return visitFunction(_scanner.getTokenOffset(),_scanner.getTokenLength(),_scanner.getTokenStartLine(),_scanner.getTokenStartCharacter())}:function(){return!0}}function toOneArgVisit(visitFunction){return visitFunction?function(arg){return visitFunction(arg,_scanner.getTokenOffset(),_scanner.getTokenLength(),_scanner.getTokenStartLine(),_scanner.getTokenStartCharacter())}:function(){return!0}}var onObjectBegin=toNoArgVisit(visitor.onObjectBegin),onObjectProperty=toOneArgVisit(visitor.onObjectProperty),onObjectEnd=toNoArgVisit(visitor.onObjectEnd),onArrayBegin=toNoArgVisit(visitor.onArrayBegin),onArrayEnd=toNoArgVisit(visitor.onArrayEnd),onLiteralValue=toOneArgVisit(visitor.onLiteralValue),onSeparator=toOneArgVisit(visitor.onSeparator),onComment=toNoArgVisit(visitor.onComment),onError=toOneArgVisit(visitor.onError),disallowComments=options&&options.disallowComments,allowTrailingComma=options&&options.allowTrailingComma;function scanNext(){for(;;){var token=_scanner.scan();switch(_scanner.getTokenError()){case 4:handleError(14);break;case 5:handleError(15);break;case 3:handleError(13);break;case 1:disallowComments||handleError(11);break;case 2:handleError(12);break;case 6:handleError(16)}switch(token){case 12:case 13:disallowComments?handleError(10):onComment();break;case 16:handleError(1);break;case 15:case 14:break;default:return token}}}function handleError(error,skipUntilAfter,skipUntil){if(void 0===skipUntilAfter&&(skipUntilAfter=[]),void 0===skipUntil&&(skipUntil=[]),onError(error),skipUntilAfter.length+skipUntil.length>0)for(var token=_scanner.getToken();17!==token;){if(-1!==skipUntilAfter.indexOf(token)){scanNext();break}if(-1!==skipUntil.indexOf(token))break;token=scanNext()}}function parseString(isValue){var value=_scanner.getTokenValue();return isValue?onLiteralValue(value):onObjectProperty(value),scanNext(),!0}function parseValue(){switch(_scanner.getToken()){case 3:return function parseArray(){onArrayBegin(),scanNext();for(var needsComma=!1;4!==_scanner.getToken()&&17!==_scanner.getToken();){if(5===_scanner.getToken()){if(needsComma||handleError(4,[],[]),onSeparator(","),scanNext(),4===_scanner.getToken()&&allowTrailingComma)break}else needsComma&&handleError(6,[],[]);parseValue()||handleError(4,[],[4,5]),needsComma=!0}return onArrayEnd(),4!==_scanner.getToken()?handleError(8,[4],[]):scanNext(),!0}();case 1:return function parseObject(){onObjectBegin(),scanNext();for(var needsComma=!1;2!==_scanner.getToken()&&17!==_scanner.getToken();){if(5===_scanner.getToken()){if(needsComma||handleError(4,[],[]),onSeparator(","),scanNext(),2===_scanner.getToken()&&allowTrailingComma)break}else needsComma&&handleError(6,[],[]);(10!==_scanner.getToken()?(handleError(3,[],[2,5]),0):(parseString(!1),6===_scanner.getToken()?(onSeparator(":"),scanNext(),parseValue()||handleError(4,[],[2,5])):handleError(5,[],[2,5]),1))||handleError(4,[],[2,5]),needsComma=!0}return onObjectEnd(),2!==_scanner.getToken()?handleError(7,[2],[]):scanNext(),!0}();case 10:return parseString(!0);default:return function parseLiteral(){switch(_scanner.getToken()){case 11:var value=0;try{"number"!=typeof(value=JSON.parse(_scanner.getTokenValue()))&&(handleError(2),value=0)}catch(e){handleError(2)}onLiteralValue(value);break;case 7:onLiteralValue(null);break;case 8:onLiteralValue(!0);break;case 9:onLiteralValue(!1);break;default:return!1}return scanNext(),!0}()}}return scanNext(),17===_scanner.getToken()?!!options.allowEmptyContent||(handleError(4,[],[]),!1):parseValue()?(17!==_scanner.getToken()&&handleError(9,[],[]),!0):(handleError(4,[],[]),!1)}self.onmessage=e=>{initialized||initialize(null)},function(ParseOptions){ParseOptions.DEFAULT={allowTrailingComma:!1}}(ParseOptions||(ParseOptions={}));var main_Position,main_Range,Range,Location,LocationLink,Color,ColorInformation,ColorPresentation,FoldingRangeKind,FoldingRange,DiagnosticRelatedInformation,DiagnosticSeverity,DiagnosticTag,Diagnostic,Command,TextEdit,TextDocumentEdit,CreateFile,RenameFile,DeleteFile,WorkspaceEdit,main_createScanner=createScanner,main_parse=function parse(text,errors,options){void 0===errors&&(errors=[]),void 0===options&&(options=ParseOptions.DEFAULT);var currentProperty=null,currentParent=[],previousParents=[];function onValue(value){Array.isArray(currentParent)?currentParent.push(value):null!==currentProperty&&(currentParent[currentProperty]=value)}return visit(text,{onObjectBegin:function(){var object={};onValue(object),previousParents.push(currentParent),currentParent=object,currentProperty=null},onObjectProperty:function(name){currentProperty=name},onObjectEnd:function(){currentParent=previousParents.pop()},onArrayBegin:function(){var array=[];onValue(array),previousParents.push(currentParent),currentParent=array,currentProperty=null},onArrayEnd:function(){currentParent=previousParents.pop()},onLiteralValue:onValue,onError:function(error,offset,length){errors.push({error:error,offset:offset,length:length})}},options),currentParent[0]},main_findNodeAtOffset=function findNodeAtOffset(node,offset,includeRightBound){if(void 0===includeRightBound&&(includeRightBound=!1),function contains(node,offset,includeRightBound){return void 0===includeRightBound&&(includeRightBound=!1),offset>=node.offset&&offset<node.offset+node.length||includeRightBound&&offset===node.offset+node.length}(node,offset,includeRightBound)){var children=node.children;if(Array.isArray(children))for(var i=0;i<children.length&&children[i].offset<=offset;i++){var item=findNodeAtOffset(children[i],offset,includeRightBound);if(item)return item}return node}},main_getNodePath=function getNodePath(node){if(!node.parent||!node.parent.children)return[];var path=getNodePath(node.parent);if("property"===node.parent.type){var key=node.parent.children[0].value;path.push(key)}else if("array"===node.parent.type){var index=node.parent.children.indexOf(node);-1!==index&&path.push(index)}return path},main_getNodeValue=function getNodeValue(node){switch(node.type){case"array":return node.children.map(getNodeValue);case"object":for(var obj=Object.create(null),_i=0,_a=node.children;_i<_a.length;_i++){var prop=_a[_i],valueNode=prop.children[1];valueNode&&(obj[prop.children[0].value]=getNodeValue(valueNode))}return obj;case"null":case"string":case"number":case"boolean":return node.value;default:return}};function objects_equals(one,other){if(one===other)return!0;if(null==one||null==other)return!1;if(typeof one!=typeof other)return!1;if("object"!=typeof one)return!1;if(Array.isArray(one)!==Array.isArray(other))return!1;var i,key;if(Array.isArray(one)){if(one.length!==other.length)return!1;for(i=0;i<one.length;i++)if(!objects_equals(one[i],other[i]))return!1}else{var oneKeys=[];for(key in one)oneKeys.push(key);oneKeys.sort();var otherKeys=[];for(key in other)otherKeys.push(key);if(otherKeys.sort(),!objects_equals(oneKeys,otherKeys))return!1;for(i=0;i<oneKeys.length;i++)if(!objects_equals(one[oneKeys[i]],other[oneKeys[i]]))return!1}return!0}function objects_isNumber(val){return"number"==typeof val}function isDefined(val){return void 0!==val}function objects_isBoolean(val){return"boolean"==typeof val}!function(Position){Position.create=function create(line,character){return{line:line,character:character}},Position.is=function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.number(candidate.line)&&Is.number(candidate.character)}}(main_Position||(main_Position={})),(Range=main_Range||(main_Range={})).create=function create(one,two,three,four){if(Is.number(one)&&Is.number(two)&&Is.number(three)&&Is.number(four))return{start:main_Position.create(one,two),end:main_Position.create(three,four)};if(main_Position.is(one)&&main_Position.is(two))return{start:one,end:two};throw new Error("Range#create called with invalid arguments["+one+", "+two+", "+three+", "+four+"]")},Range.is=function is(value){var candidate=value;return Is.objectLiteral(candidate)&&main_Position.is(candidate.start)&&main_Position.is(candidate.end)},function(Location){Location.create=function create(uri,range){return{uri:uri,range:range}},Location.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri))}}(Location||(Location={})),function(LocationLink){LocationLink.create=function create(targetUri,targetRange,targetSelectionRange,originSelectionRange){return{targetUri:targetUri,targetRange:targetRange,targetSelectionRange:targetSelectionRange,originSelectionRange:originSelectionRange}},LocationLink.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.targetRange)&&Is.string(candidate.targetUri)&&(main_Range.is(candidate.targetSelectionRange)||Is.undefined(candidate.targetSelectionRange))&&(main_Range.is(candidate.originSelectionRange)||Is.undefined(candidate.originSelectionRange))}}(LocationLink||(LocationLink={})),function(Color){Color.create=function create(red,green,blue,alpha){return{red:red,green:green,blue:blue,alpha:alpha}},Color.is=function is(value){var candidate=value;return Is.number(candidate.red)&&Is.number(candidate.green)&&Is.number(candidate.blue)&&Is.number(candidate.alpha)}}(Color||(Color={})),function(ColorInformation){ColorInformation.create=function create(range,color){return{range:range,color:color}},ColorInformation.is=function is(value){var candidate=value;return main_Range.is(candidate.range)&&Color.is(candidate.color)}}(ColorInformation||(ColorInformation={})),function(ColorPresentation){ColorPresentation.create=function create(label,textEdit,additionalTextEdits){return{label:label,textEdit:textEdit,additionalTextEdits:additionalTextEdits}},ColorPresentation.is=function is(value){var candidate=value;return Is.string(candidate.label)&&(Is.undefined(candidate.textEdit)||TextEdit.is(candidate))&&(Is.undefined(candidate.additionalTextEdits)||Is.typedArray(candidate.additionalTextEdits,TextEdit.is))}}(ColorPresentation||(ColorPresentation={})),function(FoldingRangeKind){FoldingRangeKind.Comment="comment",FoldingRangeKind.Imports="imports",FoldingRangeKind.Region="region"}(FoldingRangeKind||(FoldingRangeKind={})),function(FoldingRange){FoldingRange.create=function create(startLine,endLine,startCharacter,endCharacter,kind){var result={startLine:startLine,endLine:endLine};return Is.defined(startCharacter)&&(result.startCharacter=startCharacter),Is.defined(endCharacter)&&(result.endCharacter=endCharacter),Is.defined(kind)&&(result.kind=kind),result},FoldingRange.is=function is(value){var candidate=value;return Is.number(candidate.startLine)&&Is.number(candidate.startLine)&&(Is.undefined(candidate.startCharacter)||Is.number(candidate.startCharacter))&&(Is.undefined(candidate.endCharacter)||Is.number(candidate.endCharacter))&&(Is.undefined(candidate.kind)||Is.string(candidate.kind))}}(FoldingRange||(FoldingRange={})),function(DiagnosticRelatedInformation){DiagnosticRelatedInformation.create=function create(location,message){return{location:location,message:message}},DiagnosticRelatedInformation.is=function is(value){var candidate=value;return Is.defined(candidate)&&Location.is(candidate.location)&&Is.string(candidate.message)}}(DiagnosticRelatedInformation||(DiagnosticRelatedInformation={})),function(DiagnosticSeverity){DiagnosticSeverity.Error=1,DiagnosticSeverity.Warning=2,DiagnosticSeverity.Information=3,DiagnosticSeverity.Hint=4}(DiagnosticSeverity||(DiagnosticSeverity={})),function(DiagnosticTag){DiagnosticTag.Unnecessary=1,DiagnosticTag.Deprecated=2}(DiagnosticTag||(DiagnosticTag={})),function(Diagnostic){Diagnostic.create=function create(range,message,severity,code,source,relatedInformation){var result={range:range,message:message};return Is.defined(severity)&&(result.severity=severity),Is.defined(code)&&(result.code=code),Is.defined(source)&&(result.source=source),Is.defined(relatedInformation)&&(result.relatedInformation=relatedInformation),result},Diagnostic.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.number(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.string(candidate.source)||Is.undefined(candidate.source))&&(Is.undefined(candidate.relatedInformation)||Is.typedArray(candidate.relatedInformation,DiagnosticRelatedInformation.is))}}(Diagnostic||(Diagnostic={})),function(Command){Command.create=function create(title,command){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var result={title:title,command:command};return Is.defined(args)&&args.length>0&&(result.arguments=args),result},Command.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.command)}}(Command||(Command={})),function(TextEdit){TextEdit.replace=function replace(range,newText){return{range:range,newText:newText}},TextEdit.insert=function insert(position,newText){return{range:{start:position,end:position},newText:newText}},TextEdit.del=function del(range){return{range:range,newText:""}},TextEdit.is=function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.newText)&&main_Range.is(candidate.range)}}(TextEdit||(TextEdit={})),function(TextDocumentEdit){TextDocumentEdit.create=function create(textDocument,edits){return{textDocument:textDocument,edits:edits}},TextDocumentEdit.is=function is(value){var candidate=value;return Is.defined(candidate)&&VersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits)}}(TextDocumentEdit||(TextDocumentEdit={})),function(CreateFile){CreateFile.create=function create(uri,options){var result={kind:"create",uri:uri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),result},CreateFile.is=function is(value){var candidate=value;return candidate&&"create"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))}}(CreateFile||(CreateFile={})),function(RenameFile){RenameFile.create=function create(oldUri,newUri,options){var result={kind:"rename",oldUri:oldUri,newUri:newUri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),result},RenameFile.is=function is(value){var candidate=value;return candidate&&"rename"===candidate.kind&&Is.string(candidate.oldUri)&&Is.string(candidate.newUri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))}}(RenameFile||(RenameFile={})),function(DeleteFile){DeleteFile.create=function create(uri,options){var result={kind:"delete",uri:uri};return void 0===options||void 0===options.recursive&&void 0===options.ignoreIfNotExists||(result.options=options),result},DeleteFile.is=function is(value){var candidate=value;return candidate&&"delete"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.recursive||Is.boolean(candidate.options.recursive))&&(void 0===candidate.options.ignoreIfNotExists||Is.boolean(candidate.options.ignoreIfNotExists)))}}(DeleteFile||(DeleteFile={})),function(WorkspaceEdit){WorkspaceEdit.is=function is(value){var candidate=value;return candidate&&(void 0!==candidate.changes||void 0!==candidate.documentChanges)&&(void 0===candidate.documentChanges||candidate.documentChanges.every((function(change){return Is.string(change.kind)?CreateFile.is(change)||RenameFile.is(change)||DeleteFile.is(change):TextDocumentEdit.is(change)})))}}(WorkspaceEdit||(WorkspaceEdit={}));var TextDocumentIdentifier,VersionedTextDocumentIdentifier,TextDocumentItem,MarkupKind,MarkupContent,main_CompletionItemKind,InsertTextFormat,main_CompletionItemTag,CompletionItem,CompletionList,MarkedString,Hover,ParameterInformation,SignatureInformation,main_DocumentHighlightKind,DocumentHighlight,main_SymbolKind,main_SymbolTag,SymbolInformation,DocumentSymbol,CodeActionKind,CodeActionContext,CodeAction,CodeLens,FormattingOptions,DocumentLink,SelectionRange,TextEditChangeImpl=function(){function TextEditChangeImpl(edits){this.edits=edits}return TextEditChangeImpl.prototype.insert=function(position,newText){this.edits.push(TextEdit.insert(position,newText))},TextEditChangeImpl.prototype.replace=function(range,newText){this.edits.push(TextEdit.replace(range,newText))},TextEditChangeImpl.prototype.delete=function(range){this.edits.push(TextEdit.del(range))},TextEditChangeImpl.prototype.add=function(edit){this.edits.push(edit)},TextEditChangeImpl.prototype.all=function(){return this.edits},TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)},TextEditChangeImpl}();!function(){function WorkspaceChange(workspaceEdit){var _this=this;this._textEditChanges=Object.create(null),workspaceEdit&&(this._workspaceEdit=workspaceEdit,workspaceEdit.documentChanges?workspaceEdit.documentChanges.forEach((function(change){if(TextDocumentEdit.is(change)){var textEditChange=new TextEditChangeImpl(change.edits);_this._textEditChanges[change.textDocument.uri]=textEditChange}})):workspaceEdit.changes&&Object.keys(workspaceEdit.changes).forEach((function(key){var textEditChange=new TextEditChangeImpl(workspaceEdit.changes[key]);_this._textEditChanges[key]=textEditChange})))}Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),WorkspaceChange.prototype.getTextEditChange=function(key){if(VersionedTextDocumentIdentifier.is(key)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var textDocument=key;if(!(result=this._textEditChanges[textDocument.uri])){var textDocumentEdit={textDocument:textDocument,edits:edits=[]};this._workspaceEdit.documentChanges.push(textDocumentEdit),result=new TextEditChangeImpl(edits),this._textEditChanges[textDocument.uri]=result}return result}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var result;if(!(result=this._textEditChanges[key])){var edits=[];this._workspaceEdit.changes[key]=edits,result=new TextEditChangeImpl(edits),this._textEditChanges[key]=result}return result},WorkspaceChange.prototype.createFile=function(uri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(CreateFile.create(uri,options))},WorkspaceChange.prototype.renameFile=function(oldUri,newUri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri,newUri,options))},WorkspaceChange.prototype.deleteFile=function(uri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(DeleteFile.create(uri,options))},WorkspaceChange.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")}}();!function(TextDocumentIdentifier){TextDocumentIdentifier.create=function create(uri){return{uri:uri}},TextDocumentIdentifier.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)}}(TextDocumentIdentifier||(TextDocumentIdentifier={})),function(VersionedTextDocumentIdentifier){VersionedTextDocumentIdentifier.create=function create(uri,version){return{uri:uri,version:version}},VersionedTextDocumentIdentifier.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&(null===candidate.version||Is.number(candidate.version))}}(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={})),function(TextDocumentItem){TextDocumentItem.create=function create(uri,languageId,version,text){return{uri:uri,languageId:languageId,version:version,text:text}},TextDocumentItem.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.number(candidate.version)&&Is.string(candidate.text)}}(TextDocumentItem||(TextDocumentItem={})),function(MarkupKind){MarkupKind.PlainText="plaintext",MarkupKind.Markdown="markdown"}(MarkupKind||(MarkupKind={})),function(MarkupKind){MarkupKind.is=function is(value){var candidate=value;return candidate===MarkupKind.PlainText||candidate===MarkupKind.Markdown}}(MarkupKind||(MarkupKind={})),function(MarkupContent){MarkupContent.is=function is(value){var candidate=value;return Is.objectLiteral(value)&&MarkupKind.is(candidate.kind)&&Is.string(candidate.value)}}(MarkupContent||(MarkupContent={})),function(CompletionItemKind){CompletionItemKind.Text=1,CompletionItemKind.Method=2,CompletionItemKind.Function=3,CompletionItemKind.Constructor=4,CompletionItemKind.Field=5,CompletionItemKind.Variable=6,CompletionItemKind.Class=7,CompletionItemKind.Interface=8,CompletionItemKind.Module=9,CompletionItemKind.Property=10,CompletionItemKind.Unit=11,CompletionItemKind.Value=12,CompletionItemKind.Enum=13,CompletionItemKind.Keyword=14,CompletionItemKind.Snippet=15,CompletionItemKind.Color=16,CompletionItemKind.File=17,CompletionItemKind.Reference=18,CompletionItemKind.Folder=19,CompletionItemKind.EnumMember=20,CompletionItemKind.Constant=21,CompletionItemKind.Struct=22,CompletionItemKind.Event=23,CompletionItemKind.Operator=24,CompletionItemKind.TypeParameter=25}(main_CompletionItemKind||(main_CompletionItemKind={})),function(InsertTextFormat){InsertTextFormat.PlainText=1,InsertTextFormat.Snippet=2}(InsertTextFormat||(InsertTextFormat={})),function(CompletionItemTag){CompletionItemTag.Deprecated=1}(main_CompletionItemTag||(main_CompletionItemTag={})),function(CompletionItem){CompletionItem.create=function create(label){return{label:label}}}(CompletionItem||(CompletionItem={})),function(CompletionList){CompletionList.create=function create(items,isIncomplete){return{items:items||[],isIncomplete:!!isIncomplete}}}(CompletionList||(CompletionList={})),function(MarkedString){MarkedString.fromPlainText=function fromPlainText(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},MarkedString.is=function is(value){var candidate=value;return Is.string(candidate)||Is.objectLiteral(candidate)&&Is.string(candidate.language)&&Is.string(candidate.value)}}(MarkedString||(MarkedString={})),function(Hover){Hover.is=function is(value){var candidate=value;return!!candidate&&Is.objectLiteral(candidate)&&(MarkupContent.is(candidate.contents)||MarkedString.is(candidate.contents)||Is.typedArray(candidate.contents,MarkedString.is))&&(void 0===value.range||main_Range.is(value.range))}}(Hover||(Hover={})),function(ParameterInformation){ParameterInformation.create=function create(label,documentation){return documentation?{label:label,documentation:documentation}:{label:label}}}(ParameterInformation||(ParameterInformation={})),function(SignatureInformation){SignatureInformation.create=function create(label,documentation){for(var parameters=[],_i=2;_i<arguments.length;_i++)parameters[_i-2]=arguments[_i];var result={label:label};return Is.defined(documentation)&&(result.documentation=documentation),Is.defined(parameters)?result.parameters=parameters:result.parameters=[],result}}(SignatureInformation||(SignatureInformation={})),function(DocumentHighlightKind){DocumentHighlightKind.Text=1,DocumentHighlightKind.Read=2,DocumentHighlightKind.Write=3}(main_DocumentHighlightKind||(main_DocumentHighlightKind={})),function(DocumentHighlight){DocumentHighlight.create=function create(range,kind){var result={range:range};return Is.number(kind)&&(result.kind=kind),result}}(DocumentHighlight||(DocumentHighlight={})),function(SymbolKind){SymbolKind.File=1,SymbolKind.Module=2,SymbolKind.Namespace=3,SymbolKind.Package=4,SymbolKind.Class=5,SymbolKind.Method=6,SymbolKind.Property=7,SymbolKind.Field=8,SymbolKind.Constructor=9,SymbolKind.Enum=10,SymbolKind.Interface=11,SymbolKind.Function=12,SymbolKind.Variable=13,SymbolKind.Constant=14,SymbolKind.String=15,SymbolKind.Number=16,SymbolKind.Boolean=17,SymbolKind.Array=18,SymbolKind.Object=19,SymbolKind.Key=20,SymbolKind.Null=21,SymbolKind.EnumMember=22,SymbolKind.Struct=23,SymbolKind.Event=24,SymbolKind.Operator=25,SymbolKind.TypeParameter=26}(main_SymbolKind||(main_SymbolKind={})),function(SymbolTag){SymbolTag.Deprecated=1}(main_SymbolTag||(main_SymbolTag={})),function(SymbolInformation){SymbolInformation.create=function create(name,kind,range,uri,containerName){var result={name:name,kind:kind,location:{uri:uri,range:range}};return containerName&&(result.containerName=containerName),result}}(SymbolInformation||(SymbolInformation={})),function(DocumentSymbol){DocumentSymbol.create=function create(name,detail,kind,range,selectionRange,children){var result={name:name,detail:detail,kind:kind,range:range,selectionRange:selectionRange};return void 0!==children&&(result.children=children),result},DocumentSymbol.is=function is(value){var candidate=value;return candidate&&Is.string(candidate.name)&&Is.number(candidate.kind)&&main_Range.is(candidate.range)&&main_Range.is(candidate.selectionRange)&&(void 0===candidate.detail||Is.string(candidate.detail))&&(void 0===candidate.deprecated||Is.boolean(candidate.deprecated))&&(void 0===candidate.children||Array.isArray(candidate.children))}}(DocumentSymbol||(DocumentSymbol={})),function(CodeActionKind){CodeActionKind.Empty="",CodeActionKind.QuickFix="quickfix",CodeActionKind.Refactor="refactor",CodeActionKind.RefactorExtract="refactor.extract",CodeActionKind.RefactorInline="refactor.inline",CodeActionKind.RefactorRewrite="refactor.rewrite",CodeActionKind.Source="source",CodeActionKind.SourceOrganizeImports="source.organizeImports",CodeActionKind.SourceFixAll="source.fixAll"}(CodeActionKind||(CodeActionKind={})),function(CodeActionContext){CodeActionContext.create=function create(diagnostics,only){var result={diagnostics:diagnostics};return null!=only&&(result.only=only),result},CodeActionContext.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)&&(void 0===candidate.only||Is.typedArray(candidate.only,Is.string))}}(CodeActionContext||(CodeActionContext={})),function(CodeAction){CodeAction.create=function create(title,commandOrEdit,kind){var result={title:title};return Command.is(commandOrEdit)?result.command=commandOrEdit:result.edit=commandOrEdit,void 0!==kind&&(result.kind=kind),result},CodeAction.is=function is(value){var candidate=value;return candidate&&Is.string(candidate.title)&&(void 0===candidate.diagnostics||Is.typedArray(candidate.diagnostics,Diagnostic.is))&&(void 0===candidate.kind||Is.string(candidate.kind))&&(void 0!==candidate.edit||void 0!==candidate.command)&&(void 0===candidate.command||Command.is(candidate.command))&&(void 0===candidate.isPreferred||Is.boolean(candidate.isPreferred))&&(void 0===candidate.edit||WorkspaceEdit.is(candidate.edit))}}(CodeAction||(CodeAction={})),function(CodeLens){CodeLens.create=function create(range,data){var result={range:range};return Is.defined(data)&&(result.data=data),result},CodeLens.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command))}}(CodeLens||(CodeLens={})),function(FormattingOptions){FormattingOptions.create=function create(tabSize,insertSpaces){return{tabSize:tabSize,insertSpaces:insertSpaces}},FormattingOptions.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.number(candidate.tabSize)&&Is.boolean(candidate.insertSpaces)}}(FormattingOptions||(FormattingOptions={})),function(DocumentLink){DocumentLink.create=function create(range,target,data){return{range:range,target:target,data:data}},DocumentLink.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target))}}(DocumentLink||(DocumentLink={})),function(SelectionRange){SelectionRange.create=function create(range,parent){return{range:range,parent:parent}},SelectionRange.is=function is(value){var candidate=value;return void 0!==candidate&&main_Range.is(candidate.range)&&(void 0===candidate.parent||SelectionRange.is(candidate.parent))}}(SelectionRange||(SelectionRange={}));var TextDocument;!function(TextDocument){TextDocument.create=function create(uri,languageId,version,content){return new FullTextDocument(uri,languageId,version,content)},TextDocument.is=function is(value){var candidate=value;return!!(Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.number(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt))},TextDocument.applyEdits=function applyEdits(document,edits){for(var text=document.getText(),sortedEdits=function mergeSort(data,compare){if(data.length<=1)return data;var p=data.length/2|0,left=data.slice(0,p),right=data.slice(p);mergeSort(left,compare),mergeSort(right,compare);var leftIdx=0,rightIdx=0,i=0;for(;leftIdx<left.length&&rightIdx<right.length;){var ret=compare(left[leftIdx],right[rightIdx]);data[i++]=ret<=0?left[leftIdx++]:right[rightIdx++]}for(;leftIdx<left.length;)data[i++]=left[leftIdx++];for(;rightIdx<right.length;)data[i++]=right[rightIdx++];return data}(edits,(function(a,b){var diff=a.range.start.line-b.range.start.line;return 0===diff?a.range.start.character-b.range.start.character:diff})),lastModifiedOffset=text.length,i=sortedEdits.length-1;i>=0;i--){var e=sortedEdits[i],startOffset=document.offsetAt(e.range.start),endOffset=document.offsetAt(e.range.end);if(!(endOffset<=lastModifiedOffset))throw new Error("Overlapping edit");text=text.substring(0,startOffset)+e.newText+text.substring(endOffset,text.length),lastModifiedOffset=startOffset}return text}}(TextDocument||(TextDocument={}));var Is,FullTextDocument=function(){function FullTextDocument(uri,languageId,version,content){this._uri=uri,this._languageId=languageId,this._version=version,this._content=content,this._lineOffsets=void 0}return Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),FullTextDocument.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start),end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content},FullTextDocument.prototype.update=function(event,version){this._content=event.text,this._version=version,this._lineOffsets=void 0},FullTextDocument.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var lineOffsets=[],text=this._content,isLineStart=!0,i=0;i<text.length;i++){isLineStart&&(lineOffsets.push(i),isLineStart=!1);var ch=text.charAt(i);isLineStart="\r"===ch||"\n"===ch,"\r"===ch&&i+1<text.length&&"\n"===text.charAt(i+1)&&i++}isLineStart&&text.length>0&&lineOffsets.push(text.length),this._lineOffsets=lineOffsets}return this._lineOffsets},FullTextDocument.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return main_Position.create(0,offset);for(;low<high;){var mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}var line=low-1;return main_Position.create(line,offset-lineOffsets[line])},FullTextDocument.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length)return this._content.length;if(position.line<0)return 0;var lineOffset=lineOffsets[position.line],nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)},Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),FullTextDocument}();!function(Is){var toString=Object.prototype.toString;Is.defined=function defined(value){return void 0!==value},Is.undefined=function undefined(value){return void 0===value},Is.boolean=function boolean(value){return!0===value||!1===value},Is.string=function string(value){return"[object String]"===toString.call(value)},Is.number=function number(value){return"[object Number]"===toString.call(value)},Is.func=function func(value){return"[object Function]"===toString.call(value)},Is.objectLiteral=function objectLiteral(value){return null!==value&&"object"==typeof value},Is.typedArray=function typedArray(value,check){return Array.isArray(value)&&value.every(check)}}(Is||(Is={}));var main_TextDocument,ErrorCode,jsonLanguageTypes_ClientCapabilities,main_FullTextDocument=function(){function FullTextDocument(uri,languageId,version,content){this._uri=uri,this._languageId=languageId,this._version=version,this._content=content,this._lineOffsets=void 0}return Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),FullTextDocument.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start),end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content},FullTextDocument.prototype.update=function(changes,version){for(var _i=0,changes_1=changes;_i<changes_1.length;_i++){var change=changes_1[_i];if(FullTextDocument.isIncremental(change)){var range=getWellformedRange(change.range),startOffset=this.offsetAt(range.start),endOffset=this.offsetAt(range.end);this._content=this._content.substring(0,startOffset)+change.text+this._content.substring(endOffset,this._content.length);var startLine=Math.max(range.start.line,0),endLine=Math.max(range.end.line,0),lineOffsets=this._lineOffsets,addedLineOffsets=computeLineOffsets(change.text,!1,startOffset);if(endLine-startLine===addedLineOffsets.length)for(var i=0,len=addedLineOffsets.length;i<len;i++)lineOffsets[i+startLine+1]=addedLineOffsets[i];else addedLineOffsets.length<1e4?lineOffsets.splice.apply(lineOffsets,[startLine+1,endLine-startLine].concat(addedLineOffsets)):this._lineOffsets=lineOffsets=lineOffsets.slice(0,startLine+1).concat(addedLineOffsets,lineOffsets.slice(endLine+1));var diff=change.text.length-(endOffset-startOffset);if(0!==diff)for(i=startLine+1+addedLineOffsets.length,len=lineOffsets.length;i<len;i++)lineOffsets[i]=lineOffsets[i]+diff}else{if(!FullTextDocument.isFull(change))throw new Error("Unknown change event received");this._content=change.text,this._lineOffsets=void 0}}this._version=version},FullTextDocument.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=computeLineOffsets(this._content,!0)),this._lineOffsets},FullTextDocument.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return{line:0,character:offset};for(;low<high;){var mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}var line=low-1;return{line:line,character:offset-lineOffsets[line]}},FullTextDocument.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length)return this._content.length;if(position.line<0)return 0;var lineOffset=lineOffsets[position.line],nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)},Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),FullTextDocument.isIncremental=function(event){var candidate=event;return null!=candidate&&"string"==typeof candidate.text&&void 0!==candidate.range&&(void 0===candidate.rangeLength||"number"==typeof candidate.rangeLength)},FullTextDocument.isFull=function(event){var candidate=event;return null!=candidate&&"string"==typeof candidate.text&&void 0===candidate.range&&void 0===candidate.rangeLength},FullTextDocument}();function computeLineOffsets(text,isAtLineStart,textOffset){void 0===textOffset&&(textOffset=0);for(var result=isAtLineStart?[textOffset]:[],i=0;i<text.length;i++){var ch=text.charCodeAt(i);13!==ch&&10!==ch||(13===ch&&i+1<text.length&&10===text.charCodeAt(i+1)&&i++,result.push(textOffset+i+1))}return result}function getWellformedRange(range){var start=range.start,end=range.end;return start.line>end.line||start.line===end.line&&start.character>end.character?{start:end,end:start}:range}function getWellformedEdit(textEdit){var range=getWellformedRange(textEdit.range);return range!==textEdit.range?{newText:textEdit.newText,range:range}:textEdit}function vscode_nls_format(message,args){return 0===args.length?message:message.replace(/\{(\d+)\}/g,(function(match,rest){var index=rest[0];return void 0!==args[index]?args[index]:match}))}function localize(key,message){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];return vscode_nls_format(message,args)}function loadMessageBundle(file){return localize}!function(TextDocument){TextDocument.create=function create(uri,languageId,version,content){return new main_FullTextDocument(uri,languageId,version,content)},TextDocument.update=function update(document,changes,version){if(document instanceof main_FullTextDocument)return document.update(changes,version),document;throw new Error("TextDocument.update: document must be created by TextDocument.create")},TextDocument.applyEdits=function applyEdits(document,edits){for(var text=document.getText(),lastModifiedOffset=0,spans=[],_i=0,sortedEdits_1=function main_mergeSort(data,compare){if(data.length<=1)return data;var p=data.length/2|0,left=data.slice(0,p),right=data.slice(p);main_mergeSort(left,compare),main_mergeSort(right,compare);var leftIdx=0,rightIdx=0,i=0;for(;leftIdx<left.length&&rightIdx<right.length;){var ret=compare(left[leftIdx],right[rightIdx]);data[i++]=ret<=0?left[leftIdx++]:right[rightIdx++]}for(;leftIdx<left.length;)data[i++]=left[leftIdx++];for(;rightIdx<right.length;)data[i++]=right[rightIdx++];return data}(edits.map(getWellformedEdit),(function(a,b){var diff=a.range.start.line-b.range.start.line;return 0===diff?a.range.start.character-b.range.start.character:diff}));_i<sortedEdits_1.length;_i++){var e=sortedEdits_1[_i],startOffset=document.offsetAt(e.range.start);if(startOffset<lastModifiedOffset)throw new Error("Overlapping edit");startOffset>lastModifiedOffset&&spans.push(text.substring(lastModifiedOffset,startOffset)),e.newText.length&&spans.push(e.newText),lastModifiedOffset=document.offsetAt(e.range.end)}return spans.push(text.substr(lastModifiedOffset)),spans.join("")}}(main_TextDocument||(main_TextDocument={})),function(ErrorCode){ErrorCode[ErrorCode.Undefined=0]="Undefined",ErrorCode[ErrorCode.EnumValueMismatch=1]="EnumValueMismatch",ErrorCode[ErrorCode.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",ErrorCode[ErrorCode.UnexpectedEndOfString=258]="UnexpectedEndOfString",ErrorCode[ErrorCode.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",ErrorCode[ErrorCode.InvalidUnicode=260]="InvalidUnicode",ErrorCode[ErrorCode.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",ErrorCode[ErrorCode.InvalidCharacter=262]="InvalidCharacter",ErrorCode[ErrorCode.PropertyExpected=513]="PropertyExpected",ErrorCode[ErrorCode.CommaExpected=514]="CommaExpected",ErrorCode[ErrorCode.ColonExpected=515]="ColonExpected",ErrorCode[ErrorCode.ValueExpected=516]="ValueExpected",ErrorCode[ErrorCode.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",ErrorCode[ErrorCode.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",ErrorCode[ErrorCode.TrailingComma=519]="TrailingComma",ErrorCode[ErrorCode.DuplicateKey=520]="DuplicateKey",ErrorCode[ErrorCode.CommentNotPermitted=521]="CommentNotPermitted",ErrorCode[ErrorCode.SchemaResolveError=768]="SchemaResolveError"}(ErrorCode||(ErrorCode={})),(jsonLanguageTypes_ClientCapabilities||(jsonLanguageTypes_ClientCapabilities={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[MarkupKind.Markdown,MarkupKind.PlainText],commitCharactersSupport:!0}}}};var extendStatics,EnumMatch,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),jsonParser_localize=loadMessageBundle(),formats={"color-hex":{errorMessage:jsonParser_localize("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:jsonParser_localize("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:jsonParser_localize("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:jsonParser_localize("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:jsonParser_localize("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},ASTNodeImpl=function(){function ASTNodeImpl(parent,offset,length){void 0===length&&(length=0),this.offset=offset,this.length=length,this.parent=parent}return Object.defineProperty(ASTNodeImpl.prototype,"children",{get:function(){return[]},enumerable:!1,configurable:!0}),ASTNodeImpl.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},ASTNodeImpl}(),NullASTNodeImpl=function(_super){function NullASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="null",_this.value=null,_this}return __extends(NullASTNodeImpl,_super),NullASTNodeImpl}(ASTNodeImpl),BooleanASTNodeImpl=function(_super){function BooleanASTNodeImpl(parent,boolValue,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="boolean",_this.value=boolValue,_this}return __extends(BooleanASTNodeImpl,_super),BooleanASTNodeImpl}(ASTNodeImpl),ArrayASTNodeImpl=function(_super){function ArrayASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="array",_this.items=[],_this}return __extends(ArrayASTNodeImpl,_super),Object.defineProperty(ArrayASTNodeImpl.prototype,"children",{get:function(){return this.items},enumerable:!1,configurable:!0}),ArrayASTNodeImpl}(ASTNodeImpl),NumberASTNodeImpl=function(_super){function NumberASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="number",_this.isInteger=!0,_this.value=Number.NaN,_this}return __extends(NumberASTNodeImpl,_super),NumberASTNodeImpl}(ASTNodeImpl),StringASTNodeImpl=function(_super){function StringASTNodeImpl(parent,offset,length){var _this=_super.call(this,parent,offset,length)||this;return _this.type="string",_this.value="",_this}return __extends(StringASTNodeImpl,_super),StringASTNodeImpl}(ASTNodeImpl),PropertyASTNodeImpl=function(_super){function PropertyASTNodeImpl(parent,offset,keyNode){var _this=_super.call(this,parent,offset)||this;return _this.type="property",_this.colonOffset=-1,_this.keyNode=keyNode,_this}return __extends(PropertyASTNodeImpl,_super),Object.defineProperty(PropertyASTNodeImpl.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!1,configurable:!0}),PropertyASTNodeImpl}(ASTNodeImpl),ObjectASTNodeImpl=function(_super){function ObjectASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="object",_this.properties=[],_this}return __extends(ObjectASTNodeImpl,_super),Object.defineProperty(ObjectASTNodeImpl.prototype,"children",{get:function(){return this.properties},enumerable:!1,configurable:!0}),ObjectASTNodeImpl}(ASTNodeImpl);function asSchema(schema){return objects_isBoolean(schema)?schema?{}:{not:{}}:schema}!function(EnumMatch){EnumMatch[EnumMatch.Key=0]="Key",EnumMatch[EnumMatch.Enum=1]="Enum"}(EnumMatch||(EnumMatch={}));var SchemaCollector=function(){function SchemaCollector(focusOffset,exclude){void 0===focusOffset&&(focusOffset=-1),this.focusOffset=focusOffset,this.exclude=exclude,this.schemas=[]}return SchemaCollector.prototype.add=function(schema){this.schemas.push(schema)},SchemaCollector.prototype.merge=function(other){Array.prototype.push.apply(this.schemas,other.schemas)},SchemaCollector.prototype.include=function(node){return(-1===this.focusOffset||jsonParser_contains(node,this.focusOffset))&&node!==this.exclude},SchemaCollector.prototype.newSub=function(){return new SchemaCollector(-1,this.exclude)},SchemaCollector}(),NoOpSchemaCollector=function(){function NoOpSchemaCollector(){}return Object.defineProperty(NoOpSchemaCollector.prototype,"schemas",{get:function(){return[]},enumerable:!1,configurable:!0}),NoOpSchemaCollector.prototype.add=function(schema){},NoOpSchemaCollector.prototype.merge=function(other){},NoOpSchemaCollector.prototype.include=function(node){return!0},NoOpSchemaCollector.prototype.newSub=function(){return this},NoOpSchemaCollector.instance=new NoOpSchemaCollector,NoOpSchemaCollector}(),jsonParser_ValidationResult=function(){function ValidationResult(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}return ValidationResult.prototype.hasProblems=function(){return!!this.problems.length},ValidationResult.prototype.mergeAll=function(validationResults){for(var _i=0,validationResults_1=validationResults;_i<validationResults_1.length;_i++){var validationResult=validationResults_1[_i];this.merge(validationResult)}},ValidationResult.prototype.merge=function(validationResult){this.problems=this.problems.concat(validationResult.problems)},ValidationResult.prototype.mergeEnumValues=function(validationResult){if(!this.enumValueMatch&&!validationResult.enumValueMatch&&this.enumValues&&validationResult.enumValues){this.enumValues=this.enumValues.concat(validationResult.enumValues);for(var _i=0,_a=this.problems;_i<_a.length;_i++){var error=_a[_i];error.code===ErrorCode.EnumValueMismatch&&(error.message=jsonParser_localize("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map((function(v){return JSON.stringify(v)})).join(", ")))}}},ValidationResult.prototype.mergePropertyMatch=function(propertyValidationResult){this.merge(propertyValidationResult),this.propertiesMatches++,(propertyValidationResult.enumValueMatch||!propertyValidationResult.hasProblems()&&propertyValidationResult.propertiesMatches)&&this.propertiesValueMatches++,propertyValidationResult.enumValueMatch&&propertyValidationResult.enumValues&&1===propertyValidationResult.enumValues.length&&this.primaryValueMatches++},ValidationResult.prototype.compare=function(other){var hasProblems=this.hasProblems();return hasProblems!==other.hasProblems()?hasProblems?-1:1:this.enumValueMatch!==other.enumValueMatch?other.enumValueMatch?-1:1:this.primaryValueMatches!==other.primaryValueMatches?this.primaryValueMatches-other.primaryValueMatches:this.propertiesValueMatches!==other.propertiesValueMatches?this.propertiesValueMatches-other.propertiesValueMatches:this.propertiesMatches-other.propertiesMatches},ValidationResult}();function jsonParser_getNodeValue(node){return main_getNodeValue(node)}function jsonParser_getNodePath(node){return main_getNodePath(node)}function jsonParser_contains(node,offset,includeRightBound){return void 0===includeRightBound&&(includeRightBound=!1),offset>=node.offset&&offset<node.offset+node.length||includeRightBound&&offset===node.offset+node.length}var jsonParser_JSONDocument=function(){function JSONDocument(root,syntaxErrors,comments){void 0===syntaxErrors&&(syntaxErrors=[]),void 0===comments&&(comments=[]),this.root=root,this.syntaxErrors=syntaxErrors,this.comments=comments}return JSONDocument.prototype.getNodeFromOffset=function(offset,includeRightBound){if(void 0===includeRightBound&&(includeRightBound=!1),this.root)return main_findNodeAtOffset(this.root,offset,includeRightBound)},JSONDocument.prototype.visit=function(visitor){if(this.root){var doVisit_1=function(node){var ctn=visitor(node),children=node.children;if(Array.isArray(children))for(var i=0;i<children.length&&ctn;i++)ctn=doVisit_1(children[i]);return ctn};doVisit_1(this.root)}},JSONDocument.prototype.validate=function(textDocument,schema){if(this.root&&schema){var validationResult=new jsonParser_ValidationResult;return validate(this.root,schema,validationResult,NoOpSchemaCollector.instance),validationResult.problems.map((function(p){var range=main_Range.create(textDocument.positionAt(p.location.offset),textDocument.positionAt(p.location.offset+p.location.length));return Diagnostic.create(range,p.message,p.severity,p.code)}))}},JSONDocument.prototype.getMatchingSchemas=function(schema,focusOffset,exclude){void 0===focusOffset&&(focusOffset=-1);var matchingSchemas=new SchemaCollector(focusOffset,exclude);return this.root&&schema&&validate(this.root,schema,new jsonParser_ValidationResult,matchingSchemas),matchingSchemas.schemas},JSONDocument}();function validate(n,schema,validationResult,matchingSchemas){if(n&&matchingSchemas.include(n)){var node=n;switch(node.type){case"object":!function _validateObjectNode(node,schema,validationResult,matchingSchemas){for(var seenKeys=Object.create(null),unprocessedProperties=[],_i=0,_a=node.properties;_i<_a.length;_i++){var key=(propertyNode=_a[_i]).keyNode.value;seenKeys[key]=propertyNode.valueNode,unprocessedProperties.push(key)}if(Array.isArray(schema.required))for(var _b=0,_c=schema.required;_b<_c.length;_b++){var propertyName=_c[_b];if(!seenKeys[propertyName]){var keyNode=node.parent&&"property"===node.parent.type&&node.parent.keyNode,location=keyNode?{offset:keyNode.offset,length:keyNode.length}:{offset:node.offset,length:1};validationResult.problems.push({location:location,severity:DiagnosticSeverity.Warning,message:jsonParser_localize("MissingRequiredPropWarning",'Missing property "{0}".',propertyName)})}}var propertyProcessed=function(prop){for(var index=unprocessedProperties.indexOf(prop);index>=0;)unprocessedProperties.splice(index,1),index=unprocessedProperties.indexOf(prop)};if(schema.properties)for(var _d=0,_e=Object.keys(schema.properties);_d<_e.length;_d++){propertyName=_e[_d];propertyProcessed(propertyName);var propertySchema=schema.properties[propertyName];if(child=seenKeys[propertyName])if(objects_isBoolean(propertySchema))if(propertySchema)validationResult.propertiesMatches++,validationResult.propertiesValueMatches++;else{var propertyNode=child.parent;validationResult.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},severity:DiagnosticSeverity.Warning,message:schema.errorMessage||jsonParser_localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else{var propertyValidationResult=new jsonParser_ValidationResult;validate(child,propertySchema,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}}if(schema.patternProperties)for(var _f=0,_g=Object.keys(schema.patternProperties);_f<_g.length;_f++)for(var propertyPattern=_g[_f],regex=new RegExp(propertyPattern),_h=0,_j=unprocessedProperties.slice(0);_h<_j.length;_h++){propertyName=_j[_h];if(regex.test(propertyName))if(propertyProcessed(propertyName),child=seenKeys[propertyName])if(objects_isBoolean(propertySchema=schema.patternProperties[propertyPattern]))if(propertySchema)validationResult.propertiesMatches++,validationResult.propertiesValueMatches++;else{propertyNode=child.parent;validationResult.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},severity:DiagnosticSeverity.Warning,message:schema.errorMessage||jsonParser_localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else{propertyValidationResult=new jsonParser_ValidationResult;validate(child,propertySchema,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}}if("object"==typeof schema.additionalProperties)for(var _k=0,unprocessedProperties_1=unprocessedProperties;_k<unprocessedProperties_1.length;_k++){propertyName=unprocessedProperties_1[_k];if(child=seenKeys[propertyName]){propertyValidationResult=new jsonParser_ValidationResult;validate(child,schema.additionalProperties,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}}else if(!1===schema.additionalProperties&&unprocessedProperties.length>0)for(var _l=0,unprocessedProperties_2=unprocessedProperties;_l<unprocessedProperties_2.length;_l++){var child;propertyName=unprocessedProperties_2[_l];if(child=seenKeys[propertyName]){propertyNode=child.parent;validationResult.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},severity:DiagnosticSeverity.Warning,message:schema.errorMessage||jsonParser_localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}}objects_isNumber(schema.maxProperties)&&node.properties.length>schema.maxProperties&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("MaxPropWarning","Object has more properties than limit of {0}.",schema.maxProperties)});objects_isNumber(schema.minProperties)&&node.properties.length<schema.minProperties&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("MinPropWarning","Object has fewer properties than the required number of {0}",schema.minProperties)});if(schema.dependencies)for(var _m=0,_o=Object.keys(schema.dependencies);_m<_o.length;_m++){key=_o[_m];if(seenKeys[key]){var propertyDep=schema.dependencies[key];if(Array.isArray(propertyDep))for(var _p=0,propertyDep_1=propertyDep;_p<propertyDep_1.length;_p++){var requiredProp=propertyDep_1[_p];seenKeys[requiredProp]?validationResult.propertiesValueMatches++:validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",requiredProp,key)})}else if(propertySchema=asSchema(propertyDep)){propertyValidationResult=new jsonParser_ValidationResult;validate(node,propertySchema,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}}}var propertyNames=asSchema(schema.propertyNames);if(propertyNames)for(var _q=0,_r=node.properties;_q<_r.length;_q++){var f=_r[_q];(key=f.keyNode)&&validate(key,propertyNames,validationResult,NoOpSchemaCollector.instance)}}(node,schema,validationResult,matchingSchemas);break;case"array":!function _validateArrayNode(node,schema,validationResult,matchingSchemas){if(Array.isArray(schema.items)){for(var subSchemas=schema.items,index=0;index<subSchemas.length;index++){var subSchema=asSchema(subSchemas[index]),itemValidationResult=new jsonParser_ValidationResult;(item=node.items[index])?(validate(item,subSchema,itemValidationResult,matchingSchemas),validationResult.mergePropertyMatch(itemValidationResult)):node.items.length>=subSchemas.length&&validationResult.propertiesValueMatches++}if(node.items.length>subSchemas.length)if("object"==typeof schema.additionalItems)for(var i=subSchemas.length;i<node.items.length;i++){itemValidationResult=new jsonParser_ValidationResult;validate(node.items[i],schema.additionalItems,itemValidationResult,matchingSchemas),validationResult.mergePropertyMatch(itemValidationResult)}else!1===schema.additionalItems&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",subSchemas.length)})}else{var itemSchema=asSchema(schema.items);if(itemSchema)for(var _i=0,_a=node.items;_i<_a.length;_i++){var item=_a[_i];itemValidationResult=new jsonParser_ValidationResult;validate(item,itemSchema,itemValidationResult,matchingSchemas),validationResult.mergePropertyMatch(itemValidationResult)}}var containsSchema=asSchema(schema.contains);if(containsSchema){node.items.some((function(item){var itemValidationResult=new jsonParser_ValidationResult;return validate(item,containsSchema,itemValidationResult,NoOpSchemaCollector.instance),!itemValidationResult.hasProblems()}))||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:schema.errorMessage||jsonParser_localize("requiredItemMissingWarning","Array does not contain required item.")})}objects_isNumber(schema.minItems)&&node.items.length<schema.minItems&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("minItemsWarning","Array has too few items. Expected {0} or more.",schema.minItems)});objects_isNumber(schema.maxItems)&&node.items.length>schema.maxItems&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("maxItemsWarning","Array has too many items. Expected {0} or fewer.",schema.maxItems)});if(!0===schema.uniqueItems){var values_1=jsonParser_getNodeValue(node);values_1.some((function(value,index){return index!==values_1.lastIndexOf(value)}))&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("uniqueItemsWarning","Array has duplicate items.")})}}(node,schema,validationResult,matchingSchemas);break;case"string":!function _validateStringNode(node,schema,validationResult,matchingSchemas){objects_isNumber(schema.minLength)&&node.value.length<schema.minLength&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("minLengthWarning","String is shorter than the minimum length of {0}.",schema.minLength)});objects_isNumber(schema.maxLength)&&node.value.length>schema.maxLength&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("maxLengthWarning","String is longer than the maximum length of {0}.",schema.maxLength)});if(function objects_isString(val){return"string"==typeof val}(schema.pattern)){new RegExp(schema.pattern).test(node.value)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||jsonParser_localize("patternWarning",'String does not match the pattern of "{0}".',schema.pattern)})}if(schema.format)switch(schema.format){case"uri":case"uri-reference":var errorMessage=void 0;if(node.value){var match=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(node.value);match?match[2]||"uri"!==schema.format||(errorMessage=jsonParser_localize("uriSchemeMissing","URI with a scheme is expected.")):errorMessage=jsonParser_localize("uriMissing","URI is expected.")}else errorMessage=jsonParser_localize("uriEmpty","URI expected.");errorMessage&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||jsonParser_localize("uriFormatWarning","String is not a URI: {0}",errorMessage)});break;case"color-hex":case"date-time":case"date":case"time":case"email":var format=formats[schema.format];node.value&&format.pattern.exec(node.value)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||format.errorMessage})}}(node,schema,validationResult);break;case"number":!function _validateNumberNode(node,schema,validationResult,matchingSchemas){var val=node.value;function normalizeFloats(float){var _a,parts=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(float.toString());return parts&&{value:Number(parts[1]+(parts[2]||"")),multiplier:((null===(_a=parts[2])||void 0===_a?void 0:_a.length)||0)-(parseInt(parts[3])||0)}}if(objects_isNumber(schema.multipleOf)){var remainder=-1;if(Number.isInteger(schema.multipleOf))remainder=val%schema.multipleOf;else{var normMultipleOf=normalizeFloats(schema.multipleOf),normValue=normalizeFloats(val);if(normMultipleOf&&normValue){var multiplier=Math.pow(10,Math.abs(normValue.multiplier-normMultipleOf.multiplier));normValue.multiplier<normMultipleOf.multiplier?normValue.value*=multiplier:normMultipleOf.value*=multiplier,remainder=normValue.value%normMultipleOf.value}}0!==remainder&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("multipleOfWarning","Value is not divisible by {0}.",schema.multipleOf)})}function getExclusiveLimit(limit,exclusive){return objects_isNumber(exclusive)?exclusive:objects_isBoolean(exclusive)&&exclusive?limit:void 0}function getLimit(limit,exclusive){if(!objects_isBoolean(exclusive)||!exclusive)return limit}var exclusiveMinimum=getExclusiveLimit(schema.minimum,schema.exclusiveMinimum);objects_isNumber(exclusiveMinimum)&&val<=exclusiveMinimum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",exclusiveMinimum)});var exclusiveMaximum=getExclusiveLimit(schema.maximum,schema.exclusiveMaximum);objects_isNumber(exclusiveMaximum)&&val>=exclusiveMaximum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",exclusiveMaximum)});var minimum=getLimit(schema.minimum,schema.exclusiveMinimum);objects_isNumber(minimum)&&val<minimum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("minimumWarning","Value is below the minimum of {0}.",minimum)});var maximum=getLimit(schema.maximum,schema.exclusiveMaximum);objects_isNumber(maximum)&&val>maximum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("maximumWarning","Value is above the maximum of {0}.",maximum)})}(node,schema,validationResult);break;case"property":return validate(node.valueNode,schema,validationResult,matchingSchemas)}!function _validateNode(){function matchesType(type){return node.type===type||"integer"===type&&"number"===node.type&&node.isInteger}Array.isArray(schema.type)?schema.type.some(matchesType)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:schema.errorMessage||jsonParser_localize("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",schema.type.join(", "))}):schema.type&&(matchesType(schema.type)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:schema.errorMessage||jsonParser_localize("typeMismatchWarning",'Incorrect type. Expected "{0}".',schema.type)}));if(Array.isArray(schema.allOf))for(var _i=0,_a=schema.allOf;_i<_a.length;_i++){var subSchemaRef=_a[_i];validate(node,asSchema(subSchemaRef),validationResult,matchingSchemas)}var notSchema=asSchema(schema.not);if(notSchema){var subValidationResult=new jsonParser_ValidationResult,subMatchingSchemas=matchingSchemas.newSub();validate(node,notSchema,subValidationResult,subMatchingSchemas),subValidationResult.hasProblems()||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("notSchemaWarning","Matches a schema that is not allowed.")});for(var _b=0,_c=subMatchingSchemas.schemas;_b<_c.length;_b++){var ms=_c[_b];ms.inverted=!ms.inverted,matchingSchemas.add(ms)}}var testAlternatives=function(alternatives,maxOneMatch){for(var matches=[],bestMatch=void 0,_i=0,alternatives_1=alternatives;_i<alternatives_1.length;_i++){var subSchema=asSchema(alternatives_1[_i]),subValidationResult=new jsonParser_ValidationResult,subMatchingSchemas=matchingSchemas.newSub();if(validate(node,subSchema,subValidationResult,subMatchingSchemas),subValidationResult.hasProblems()||matches.push(subSchema),bestMatch)if(maxOneMatch||subValidationResult.hasProblems()||bestMatch.validationResult.hasProblems()){var compareResult=subValidationResult.compare(bestMatch.validationResult);compareResult>0?bestMatch={schema:subSchema,validationResult:subValidationResult,matchingSchemas:subMatchingSchemas}:0===compareResult&&(bestMatch.matchingSchemas.merge(subMatchingSchemas),bestMatch.validationResult.mergeEnumValues(subValidationResult))}else bestMatch.matchingSchemas.merge(subMatchingSchemas),bestMatch.validationResult.propertiesMatches+=subValidationResult.propertiesMatches,bestMatch.validationResult.propertiesValueMatches+=subValidationResult.propertiesValueMatches;else bestMatch={schema:subSchema,validationResult:subValidationResult,matchingSchemas:subMatchingSchemas}}return matches.length>1&&maxOneMatch&&validationResult.problems.push({location:{offset:node.offset,length:1},severity:DiagnosticSeverity.Warning,message:jsonParser_localize("oneOfWarning","Matches multiple schemas when only one must validate.")}),bestMatch&&(validationResult.merge(bestMatch.validationResult),validationResult.propertiesMatches+=bestMatch.validationResult.propertiesMatches,validationResult.propertiesValueMatches+=bestMatch.validationResult.propertiesValueMatches,matchingSchemas.merge(bestMatch.matchingSchemas)),matches.length};Array.isArray(schema.anyOf)&&testAlternatives(schema.anyOf,!1);Array.isArray(schema.oneOf)&&testAlternatives(schema.oneOf,!0);var testBranch=function(schema){var subValidationResult=new jsonParser_ValidationResult,subMatchingSchemas=matchingSchemas.newSub();validate(node,asSchema(schema),subValidationResult,subMatchingSchemas),validationResult.merge(subValidationResult),validationResult.propertiesMatches+=subValidationResult.propertiesMatches,validationResult.propertiesValueMatches+=subValidationResult.propertiesValueMatches,matchingSchemas.merge(subMatchingSchemas)},ifSchema=asSchema(schema.if);ifSchema&&function(ifSchema,thenSchema,elseSchema){var subSchema=asSchema(ifSchema),subValidationResult=new jsonParser_ValidationResult,subMatchingSchemas=matchingSchemas.newSub();validate(node,subSchema,subValidationResult,subMatchingSchemas),matchingSchemas.merge(subMatchingSchemas),subValidationResult.hasProblems()?elseSchema&&testBranch(elseSchema):thenSchema&&testBranch(thenSchema)}(ifSchema,asSchema(schema.then),asSchema(schema.else));if(Array.isArray(schema.enum)){for(var val=jsonParser_getNodeValue(node),enumValueMatch=!1,_d=0,_e=schema.enum;_d<_e.length;_d++){var e=_e[_d];if(objects_equals(val,e)){enumValueMatch=!0;break}}validationResult.enumValues=schema.enum,validationResult.enumValueMatch=enumValueMatch,enumValueMatch||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||jsonParser_localize("enumWarning","Value is not accepted. Valid values: {0}.",schema.enum.map((function(v){return JSON.stringify(v)})).join(", "))})}if(isDefined(schema.const)){objects_equals(val=jsonParser_getNodeValue(node),schema.const)?validationResult.enumValueMatch=!0:(validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:DiagnosticSeverity.Warning,code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||jsonParser_localize("constWarning","Value must be {0}.",JSON.stringify(schema.const))}),validationResult.enumValueMatch=!1),validationResult.enumValues=[schema.const]}schema.deprecationMessage&&node.parent&&validationResult.problems.push({location:{offset:node.parent.offset,length:node.parent.length},severity:DiagnosticSeverity.Warning,message:schema.deprecationMessage})}(),matchingSchemas.add({node:node,schema:schema})}}function jsonParser_parse(textDocument,config){var problems=[],lastProblemOffset=-1,text=textDocument.getText(),scanner=main_createScanner(text,!1),commentRanges=config&&config.collectComments?[]:void 0;function _scanNext(){for(;;){var token_1=scanner.scan();switch(_checkScanError(),token_1){case 12:case 13:Array.isArray(commentRanges)&&commentRanges.push(main_Range.create(textDocument.positionAt(scanner.getTokenOffset()),textDocument.positionAt(scanner.getTokenOffset()+scanner.getTokenLength())));break;case 15:case 14:break;default:return token_1}}}function _errorAtRange(message,code,startOffset,endOffset,severity){if(void 0===severity&&(severity=DiagnosticSeverity.Error),0===problems.length||startOffset!==lastProblemOffset){var range=main_Range.create(textDocument.positionAt(startOffset),textDocument.positionAt(endOffset));problems.push(Diagnostic.create(range,message,severity,code,textDocument.languageId)),lastProblemOffset=startOffset}}function _error(message,code,node,skipUntilAfter,skipUntil){void 0===node&&(node=void 0),void 0===skipUntilAfter&&(skipUntilAfter=[]),void 0===skipUntil&&(skipUntil=[]);var start=scanner.getTokenOffset(),end=scanner.getTokenOffset()+scanner.getTokenLength();if(start===end&&start>0){for(start--;start>0&&/\s/.test(text.charAt(start));)start--;end=start+1}if(_errorAtRange(message,code,start,end),node&&_finalize(node,!1),skipUntilAfter.length+skipUntil.length>0)for(var token_2=scanner.getToken();17!==token_2;){if(-1!==skipUntilAfter.indexOf(token_2)){_scanNext();break}if(-1!==skipUntil.indexOf(token_2))break;token_2=_scanNext()}return node}function _checkScanError(){switch(scanner.getTokenError()){case 4:return _error(jsonParser_localize("InvalidUnicode","Invalid unicode sequence in string."),ErrorCode.InvalidUnicode),!0;case 5:return _error(jsonParser_localize("InvalidEscapeCharacter","Invalid escape character in string."),ErrorCode.InvalidEscapeCharacter),!0;case 3:return _error(jsonParser_localize("UnexpectedEndOfNumber","Unexpected end of number."),ErrorCode.UnexpectedEndOfNumber),!0;case 1:return _error(jsonParser_localize("UnexpectedEndOfComment","Unexpected end of comment."),ErrorCode.UnexpectedEndOfComment),!0;case 2:return _error(jsonParser_localize("UnexpectedEndOfString","Unexpected end of string."),ErrorCode.UnexpectedEndOfString),!0;case 6:return _error(jsonParser_localize("InvalidCharacter","Invalid characters in string. Control characters must be escaped."),ErrorCode.InvalidCharacter),!0}return!1}function _finalize(node,scanNext){return node.length=scanner.getTokenOffset()+scanner.getTokenLength()-node.offset,scanNext&&_scanNext(),node}var keyPlaceholder=new StringASTNodeImpl(void 0,0,0);function _parseProperty(parent,keysSeen){var node=new PropertyASTNodeImpl(parent,scanner.getTokenOffset(),keyPlaceholder),key=_parseString(node);if(!key){if(16!==scanner.getToken())return;_error(jsonParser_localize("DoubleQuotesExpected","Property keys must be doublequoted"),ErrorCode.Undefined);var keyNode=new StringASTNodeImpl(node,scanner.getTokenOffset(),scanner.getTokenLength());keyNode.value=scanner.getTokenValue(),key=keyNode,_scanNext()}node.keyNode=key;var seen=keysSeen[key.value];if(seen?(_errorAtRange(jsonParser_localize("DuplicateKeyWarning","Duplicate object key"),ErrorCode.DuplicateKey,node.keyNode.offset,node.keyNode.offset+node.keyNode.length,DiagnosticSeverity.Warning),"object"==typeof seen&&_errorAtRange(jsonParser_localize("DuplicateKeyWarning","Duplicate object key"),ErrorCode.DuplicateKey,seen.keyNode.offset,seen.keyNode.offset+seen.keyNode.length,DiagnosticSeverity.Warning),keysSeen[key.value]=!0):keysSeen[key.value]=node,6===scanner.getToken())node.colonOffset=scanner.getTokenOffset(),_scanNext();else if(_error(jsonParser_localize("ColonExpected","Colon expected"),ErrorCode.ColonExpected),10===scanner.getToken()&&textDocument.positionAt(key.offset+key.length).line<textDocument.positionAt(scanner.getTokenOffset()).line)return node.length=key.length,node;var value=_parseValue(node);return value?(node.valueNode=value,node.length=value.offset+value.length-node.offset,node):_error(jsonParser_localize("ValueExpected","Value expected"),ErrorCode.ValueExpected,node,[],[2,5])}function _parseString(parent){if(10===scanner.getToken()){var node=new StringASTNodeImpl(parent,scanner.getTokenOffset());return node.value=scanner.getTokenValue(),_finalize(node,!0)}}function _parseValue(parent){return function _parseArray(parent){if(3===scanner.getToken()){var node=new ArrayASTNodeImpl(parent,scanner.getTokenOffset());_scanNext();for(var needsComma=!1;4!==scanner.getToken()&&17!==scanner.getToken();){if(5===scanner.getToken()){needsComma||_error(jsonParser_localize("ValueExpected","Value expected"),ErrorCode.ValueExpected);var commaOffset=scanner.getTokenOffset();if(_scanNext(),4===scanner.getToken()){needsComma&&_errorAtRange(jsonParser_localize("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,commaOffset,commaOffset+1);continue}}else needsComma&&_error(jsonParser_localize("ExpectedComma","Expected comma"),ErrorCode.CommaExpected);var item=_parseValue(node);item?node.items.push(item):_error(jsonParser_localize("PropertyExpected","Value expected"),ErrorCode.ValueExpected,void 0,[],[4,5]),needsComma=!0}return 4!==scanner.getToken()?_error(jsonParser_localize("ExpectedCloseBracket","Expected comma or closing bracket"),ErrorCode.CommaOrCloseBacketExpected,node):_finalize(node,!0)}}(parent)||function _parseObject(parent){if(1===scanner.getToken()){var node=new ObjectASTNodeImpl(parent,scanner.getTokenOffset()),keysSeen=Object.create(null);_scanNext();for(var needsComma=!1;2!==scanner.getToken()&&17!==scanner.getToken();){if(5===scanner.getToken()){needsComma||_error(jsonParser_localize("PropertyExpected","Property expected"),ErrorCode.PropertyExpected);var commaOffset=scanner.getTokenOffset();if(_scanNext(),2===scanner.getToken()){needsComma&&_errorAtRange(jsonParser_localize("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,commaOffset,commaOffset+1);continue}}else needsComma&&_error(jsonParser_localize("ExpectedComma","Expected comma"),ErrorCode.CommaExpected);var property=_parseProperty(node,keysSeen);property?node.properties.push(property):_error(jsonParser_localize("PropertyExpected","Property expected"),ErrorCode.PropertyExpected,void 0,[],[2,5]),needsComma=!0}return 2!==scanner.getToken()?_error(jsonParser_localize("ExpectedCloseBrace","Expected comma or closing brace"),ErrorCode.CommaOrCloseBraceExpected,node):_finalize(node,!0)}}(parent)||_parseString(parent)||function _parseNumber(parent){if(11===scanner.getToken()){var node=new NumberASTNodeImpl(parent,scanner.getTokenOffset());if(0===scanner.getTokenError()){var tokenValue=scanner.getTokenValue();try{var numberValue=JSON.parse(tokenValue);if(!objects_isNumber(numberValue))return _error(jsonParser_localize("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node);node.value=numberValue}catch(e){return _error(jsonParser_localize("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node)}node.isInteger=-1===tokenValue.indexOf(".")}return _finalize(node,!0)}}(parent)||function _parseLiteral(parent){switch(scanner.getToken()){case 7:return _finalize(new NullASTNodeImpl(parent,scanner.getTokenOffset()),!0);case 8:return _finalize(new BooleanASTNodeImpl(parent,!0,scanner.getTokenOffset()),!0);case 9:return _finalize(new BooleanASTNodeImpl(parent,!1,scanner.getTokenOffset()),!0);default:return}}(parent)}var _root=void 0;return 17!==_scanNext()&&((_root=_parseValue(_root))?17!==scanner.getToken()&&_error(jsonParser_localize("End of file expected","End of file expected."),ErrorCode.Undefined):_error(jsonParser_localize("Invalid symbol","Expected a JSON object, array or literal."),ErrorCode.Undefined)),new jsonParser_JSONDocument(_root,problems,commentRanges)}function strings_endsWith(haystack,needle){var diff=haystack.length-needle.length;return diff>0?haystack.lastIndexOf(needle)===diff:0===diff&&haystack===needle}function strings_convertSimple2RegExpPattern(pattern){return pattern.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}var jsonCompletion_localize=loadMessageBundle(),jsonCompletion_JSONCompletion=function(){function JSONCompletion(schemaService,contributions,promiseConstructor,clientCapabilities){void 0===contributions&&(contributions=[]),void 0===promiseConstructor&&(promiseConstructor=Promise),void 0===clientCapabilities&&(clientCapabilities={}),this.schemaService=schemaService,this.contributions=contributions,this.promiseConstructor=promiseConstructor,this.clientCapabilities=clientCapabilities}return JSONCompletion.prototype.doResolve=function(item){for(var i=this.contributions.length-1;i>=0;i--){var resolveCompletion=this.contributions[i].resolveCompletion;if(resolveCompletion){var resolver=resolveCompletion(item);if(resolver)return resolver}}return this.promiseConstructor.resolve(item)},JSONCompletion.prototype.doComplete=function(document,position,doc){var _this=this,result={items:[],isIncomplete:!1},text=document.getText(),offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset,!0);if(this.isInComment(document,node?node.offset:0,offset))return Promise.resolve(result);if(node&&offset===node.offset+node.length&&offset>0){var ch=text[offset-1];("object"===node.type&&"}"===ch||"array"===node.type&&"]"===ch)&&(node=node.parent)}var overwriteRange,currentWord=this.getCurrentWord(document,offset);if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type){var overwriteStart=offset-currentWord.length;overwriteStart>0&&'"'===text[overwriteStart-1]&&overwriteStart--,overwriteRange=main_Range.create(document.positionAt(overwriteStart),position)}else overwriteRange=main_Range.create(document.positionAt(node.offset),document.positionAt(node.offset+node.length));var proposed={},collector={add:function(suggestion){var label=suggestion.label,existing=proposed[label];if(existing)existing.documentation||(existing.documentation=suggestion.documentation);else{if((label=label.replace(/[\n]/g,"")).length>60){var shortendedLabel=label.substr(0,57).trim()+"...";proposed[shortendedLabel]||(label=shortendedLabel)}overwriteRange&&void 0!==suggestion.insertText&&(suggestion.textEdit=TextEdit.replace(overwriteRange,suggestion.insertText)),suggestion.label=label,proposed[label]=suggestion,result.items.push(suggestion)}},setAsIncomplete:function(){result.isIncomplete=!0},error:function(message){console.error(message)},log:function(message){console.log(message)},getNumberOfProposals:function(){return result.items.length}};return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){var collectionPromises=[],addValue=!0,currentKey="",currentProperty=void 0;if(node&&"string"===node.type){var parent=node.parent;parent&&"property"===parent.type&&parent.keyNode===node&&(addValue=!parent.valueNode,currentProperty=parent,currentKey=text.substr(node.offset+1,node.length-2),parent&&(node=parent.parent))}if(node&&"object"===node.type){if(node.offset===offset)return result;node.properties.forEach((function(p){currentProperty&&currentProperty===p||(proposed[p.keyNode.value]=CompletionItem.create("__"))}));var separatorAfter_1="";addValue&&(separatorAfter_1=_this.evaluateSeparatorAfter(document,document.offsetAt(overwriteRange.end))),schema?_this.getPropertyCompletions(schema,doc,node,addValue,separatorAfter_1,collector):_this.getSchemaLessPropertyCompletions(doc,node,currentKey,collector);var location_1=jsonParser_getNodePath(node);_this.contributions.forEach((function(contribution){var collectPromise=contribution.collectPropertyCompletions(document.uri,location_1,currentWord,addValue,""===separatorAfter_1,collector);collectPromise&&collectionPromises.push(collectPromise)})),!schema&&currentWord.length>0&&'"'!==text.charAt(offset-currentWord.length-1)&&(collector.add({kind:main_CompletionItemKind.Property,label:_this.getLabelForValue(currentWord),insertText:_this.getInsertTextForProperty(currentWord,void 0,!1,separatorAfter_1),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),collector.setAsIncomplete())}var types={};return schema?_this.getValueCompletions(schema,doc,node,offset,document,collector,types):_this.getSchemaLessValueCompletions(doc,node,offset,document,collector),_this.contributions.length>0&&_this.getContributedValueCompletions(doc,node,offset,document,collector,collectionPromises),_this.promiseConstructor.all(collectionPromises).then((function(){if(0===collector.getNumberOfProposals()){var offsetForSeparator=offset;!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length);var separatorAfter=_this.evaluateSeparatorAfter(document,offsetForSeparator);_this.addFillerValueCompletions(types,separatorAfter,collector)}return result}))}))},JSONCompletion.prototype.getPropertyCompletions=function(schema,doc,node,addValue,separatorAfter,collector){var _this=this;doc.getMatchingSchemas(schema.schema,node.offset).forEach((function(s){if(s.node===node&&!s.inverted){var schemaProperties_1=s.schema.properties;schemaProperties_1&&Object.keys(schemaProperties_1).forEach((function(key){var propertySchema=schemaProperties_1[key];if("object"==typeof propertySchema&&!propertySchema.deprecationMessage&&!propertySchema.doNotSuggest){var proposal={kind:main_CompletionItemKind.Property,label:key,insertText:_this.getInsertTextForProperty(key,propertySchema,addValue,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(key),documentation:_this.fromMarkup(propertySchema.markdownDescription)||propertySchema.description||""};void 0!==propertySchema.suggestSortText&&(proposal.sortText=propertySchema.suggestSortText),proposal.insertText&&strings_endsWith(proposal.insertText,"$1"+separatorAfter)&&(proposal.command={title:"Suggest",command:"editor.action.triggerSuggest"}),collector.add(proposal)}}));var schemaPropertyNames_1=s.schema.propertyNames;if("object"==typeof schemaPropertyNames_1&&!schemaPropertyNames_1.deprecationMessage&&!schemaPropertyNames_1.doNotSuggest){var propertyNameCompletionItem=function(name,enumDescription){void 0===enumDescription&&(enumDescription=void 0);var proposal={kind:main_CompletionItemKind.Property,label:name,insertText:_this.getInsertTextForProperty(name,void 0,addValue,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(name),documentation:enumDescription||_this.fromMarkup(schemaPropertyNames_1.markdownDescription)||schemaPropertyNames_1.description||""};void 0!==schemaPropertyNames_1.suggestSortText&&(proposal.sortText=schemaPropertyNames_1.suggestSortText),proposal.insertText&&strings_endsWith(proposal.insertText,"$1"+separatorAfter)&&(proposal.command={title:"Suggest",command:"editor.action.triggerSuggest"}),collector.add(proposal)};if(schemaPropertyNames_1.enum)for(var i=0;i<schemaPropertyNames_1.enum.length;i++){var enumDescription=void 0;schemaPropertyNames_1.markdownEnumDescriptions&&i<schemaPropertyNames_1.markdownEnumDescriptions.length?enumDescription=_this.fromMarkup(schemaPropertyNames_1.markdownEnumDescriptions[i]):schemaPropertyNames_1.enumDescriptions&&i<schemaPropertyNames_1.enumDescriptions.length&&(enumDescription=schemaPropertyNames_1.enumDescriptions[i]),propertyNameCompletionItem(schemaPropertyNames_1.enum[i],enumDescription)}schemaPropertyNames_1.const&&propertyNameCompletionItem(schemaPropertyNames_1.const)}}}))},JSONCompletion.prototype.getSchemaLessPropertyCompletions=function(doc,node,currentKey,collector){var _this=this,collectCompletionsForSimilarObject=function(obj){obj.properties.forEach((function(p){var key=p.keyNode.value;collector.add({kind:main_CompletionItemKind.Property,label:key,insertText:_this.getInsertTextForValue(key,""),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(key),documentation:""})}))};if(node.parent)if("property"===node.parent.type){var parentKey_1=node.parent.keyNode.value;doc.visit((function(n){return"property"===n.type&&n!==node.parent&&n.keyNode.value===parentKey_1&&n.valueNode&&"object"===n.valueNode.type&&collectCompletionsForSimilarObject(n.valueNode),!0}))}else"array"===node.parent.type&&node.parent.items.forEach((function(n){"object"===n.type&&n!==node&&collectCompletionsForSimilarObject(n)}));else"object"===node.type&&collector.add({kind:main_CompletionItemKind.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",void 0,!0,""),insertTextFormat:InsertTextFormat.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})},JSONCompletion.prototype.getSchemaLessValueCompletions=function(doc,node,offset,document,collector){var _this=this,offsetForSeparator=offset;if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length,node=node.parent),!node)return collector.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),void collector.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:InsertTextFormat.Snippet,documentation:""});var separatorAfter=this.evaluateSeparatorAfter(document,offsetForSeparator),collectSuggestionsForValues=function(value){value.parent&&!jsonParser_contains(value.parent,offset,!0)&&collector.add({kind:_this.getSuggestionKind(value.type),label:_this.getLabelTextForMatchingNode(value,document),insertText:_this.getInsertTextForMatchingNode(value,document,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),"boolean"===value.type&&_this.addBooleanValueCompletion(!value.value,separatorAfter,collector)};if("property"===node.type&&offset>(node.colonOffset||0)){var valueNode=node.valueNode;if(valueNode&&(offset>valueNode.offset+valueNode.length||"object"===valueNode.type||"array"===valueNode.type))return;var parentKey_2=node.keyNode.value;doc.visit((function(n){return"property"===n.type&&n.keyNode.value===parentKey_2&&n.valueNode&&collectSuggestionsForValues(n.valueNode),!0})),"$schema"===parentKey_2&&node.parent&&!node.parent.parent&&this.addDollarSchemaCompletions(separatorAfter,collector)}if("array"===node.type)if(node.parent&&"property"===node.parent.type){var parentKey_3=node.parent.keyNode.value;doc.visit((function(n){return"property"===n.type&&n.keyNode.value===parentKey_3&&n.valueNode&&"array"===n.valueNode.type&&n.valueNode.items.forEach(collectSuggestionsForValues),!0}))}else node.items.forEach(collectSuggestionsForValues)},JSONCompletion.prototype.getValueCompletions=function(schema,doc,node,offset,document,collector,types){var offsetForSeparator=offset,parentKey=void 0,valueNode=void 0;if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length,valueNode=node,node=node.parent),node){if("property"===node.type&&offset>(node.colonOffset||0)){var valueNode_1=node.valueNode;if(valueNode_1&&offset>valueNode_1.offset+valueNode_1.length)return;parentKey=node.keyNode.value,node=node.parent}if(node&&(void 0!==parentKey||"array"===node.type)){for(var separatorAfter=this.evaluateSeparatorAfter(document,offsetForSeparator),_i=0,matchingSchemas_1=doc.getMatchingSchemas(schema.schema,node.offset,valueNode);_i<matchingSchemas_1.length;_i++){var s=matchingSchemas_1[_i];if(s.node===node&&!s.inverted&&s.schema){if("array"===node.type&&s.schema.items)if(Array.isArray(s.schema.items)){var index=this.findItemAtOffset(node,document,offset);index<s.schema.items.length&&this.addSchemaValueCompletions(s.schema.items[index],separatorAfter,collector,types)}else this.addSchemaValueCompletions(s.schema.items,separatorAfter,collector,types);if(void 0!==parentKey){var propertyMatched=!1;if(s.schema.properties)(propertySchema=s.schema.properties[parentKey])&&(propertyMatched=!0,this.addSchemaValueCompletions(propertySchema,separatorAfter,collector,types));if(s.schema.patternProperties&&!propertyMatched)for(var _a=0,_b=Object.keys(s.schema.patternProperties);_a<_b.length;_a++){var pattern=_b[_a];if(new RegExp(pattern).test(parentKey)){propertyMatched=!0;var propertySchema=s.schema.patternProperties[pattern];this.addSchemaValueCompletions(propertySchema,separatorAfter,collector,types)}}if(s.schema.additionalProperties&&!propertyMatched){propertySchema=s.schema.additionalProperties;this.addSchemaValueCompletions(propertySchema,separatorAfter,collector,types)}}}}"$schema"!==parentKey||node.parent||this.addDollarSchemaCompletions(separatorAfter,collector),types.boolean&&(this.addBooleanValueCompletion(!0,separatorAfter,collector),this.addBooleanValueCompletion(!1,separatorAfter,collector)),types.null&&this.addNullValueCompletion(separatorAfter,collector)}}else this.addSchemaValueCompletions(schema.schema,"",collector,types)},JSONCompletion.prototype.getContributedValueCompletions=function(doc,node,offset,document,collector,collectionPromises){if(node){if("string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(node=node.parent),node&&"property"===node.type&&offset>(node.colonOffset||0)){var parentKey_4=node.keyNode.value,valueNode=node.valueNode;if((!valueNode||offset<=valueNode.offset+valueNode.length)&&node.parent){var location_2=jsonParser_getNodePath(node.parent);this.contributions.forEach((function(contribution){var collectPromise=contribution.collectValueCompletions(document.uri,location_2,parentKey_4,collector);collectPromise&&collectionPromises.push(collectPromise)}))}}}else this.contributions.forEach((function(contribution){var collectPromise=contribution.collectDefaultCompletions(document.uri,collector);collectPromise&&collectionPromises.push(collectPromise)}))},JSONCompletion.prototype.addSchemaValueCompletions=function(schema,separatorAfter,collector,types){var _this=this;"object"==typeof schema&&(this.addEnumValueCompletions(schema,separatorAfter,collector),this.addDefaultValueCompletions(schema,separatorAfter,collector),this.collectTypes(schema,types),Array.isArray(schema.allOf)&&schema.allOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})),Array.isArray(schema.anyOf)&&schema.anyOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})),Array.isArray(schema.oneOf)&&schema.oneOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})))},JSONCompletion.prototype.addDefaultValueCompletions=function(schema,separatorAfter,collector,arrayDepth){var _this=this;void 0===arrayDepth&&(arrayDepth=0);var hasProposals=!1;if(isDefined(schema.default)){for(var type=schema.type,value=schema.default,i=arrayDepth;i>0;i--)value=[value],type="array";collector.add({kind:this.getSuggestionKind(type),label:this.getLabelForValue(value),insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:jsonCompletion_localize("json.suggest.default","Default value")}),hasProposals=!0}Array.isArray(schema.examples)&&schema.examples.forEach((function(example){for(var type=schema.type,value=example,i=arrayDepth;i>0;i--)value=[value],type="array";collector.add({kind:_this.getSuggestionKind(type),label:_this.getLabelForValue(value),insertText:_this.getInsertTextForValue(value,separatorAfter),insertTextFormat:InsertTextFormat.Snippet}),hasProposals=!0})),Array.isArray(schema.defaultSnippets)&&schema.defaultSnippets.forEach((function(s){var insertText,filterText,type=schema.type,value=s.body,label=s.label;if(isDefined(value)){schema.type;for(var i=arrayDepth;i>0;i--)value=[value],"array";insertText=_this.getInsertTextForSnippetValue(value,separatorAfter),filterText=_this.getFilterTextForSnippetValue(value),label=label||_this.getLabelForSnippetValue(value)}else{if("string"!=typeof s.bodyText)return;var prefix="",suffix="",indent="";for(i=arrayDepth;i>0;i--)prefix=prefix+indent+"[\n",suffix=suffix+"\n"+indent+"]",indent+="\t",type="array";insertText=prefix+indent+s.bodyText.split("\n").join("\n"+indent)+suffix+separatorAfter,label=label||insertText,filterText=insertText.replace(/[\n]/g,"")}collector.add({kind:_this.getSuggestionKind(type),label:label,documentation:_this.fromMarkup(s.markdownDescription)||s.description,insertText:insertText,insertTextFormat:InsertTextFormat.Snippet,filterText:filterText}),hasProposals=!0})),!hasProposals&&"object"==typeof schema.items&&!Array.isArray(schema.items)&&arrayDepth<5&&this.addDefaultValueCompletions(schema.items,separatorAfter,collector,arrayDepth+1)},JSONCompletion.prototype.addEnumValueCompletions=function(schema,separatorAfter,collector){if(isDefined(schema.const)&&collector.add({kind:this.getSuggestionKind(schema.type),label:this.getLabelForValue(schema.const),insertText:this.getInsertTextForValue(schema.const,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:this.fromMarkup(schema.markdownDescription)||schema.description}),Array.isArray(schema.enum))for(var i=0,length=schema.enum.length;i<length;i++){var enm=schema.enum[i],documentation=this.fromMarkup(schema.markdownDescription)||schema.description;schema.markdownEnumDescriptions&&i<schema.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?documentation=this.fromMarkup(schema.markdownEnumDescriptions[i]):schema.enumDescriptions&&i<schema.enumDescriptions.length&&(documentation=schema.enumDescriptions[i]),collector.add({kind:this.getSuggestionKind(schema.type),label:this.getLabelForValue(enm),insertText:this.getInsertTextForValue(enm,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:documentation})}},JSONCompletion.prototype.collectTypes=function(schema,types){if(!Array.isArray(schema.enum)&&!isDefined(schema.const)){var type=schema.type;Array.isArray(type)?type.forEach((function(t){return types[t]=!0})):type&&(types[type]=!0)}},JSONCompletion.prototype.addFillerValueCompletions=function(types,separatorAfter,collector){types.object&&collector.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:jsonCompletion_localize("defaults.object","New object"),documentation:""}),types.array&&collector.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:jsonCompletion_localize("defaults.array","New array"),documentation:""})},JSONCompletion.prototype.addBooleanValueCompletion=function(value,separatorAfter,collector){collector.add({kind:this.getSuggestionKind("boolean"),label:value?"true":"false",insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""})},JSONCompletion.prototype.addNullValueCompletion=function(separatorAfter,collector){collector.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+separatorAfter,insertTextFormat:InsertTextFormat.Snippet,documentation:""})},JSONCompletion.prototype.addDollarSchemaCompletions=function(separatorAfter,collector){var _this=this;this.schemaService.getRegisteredSchemaIds((function(schema){return"http"===schema||"https"===schema})).forEach((function(schemaId){return collector.add({kind:main_CompletionItemKind.Module,label:_this.getLabelForValue(schemaId),filterText:_this.getFilterTextForValue(schemaId),insertText:_this.getInsertTextForValue(schemaId,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""})}))},JSONCompletion.prototype.getLabelForValue=function(value){return JSON.stringify(value)},JSONCompletion.prototype.getFilterTextForValue=function(value){return JSON.stringify(value)},JSONCompletion.prototype.getFilterTextForSnippetValue=function(value){return JSON.stringify(value).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},JSONCompletion.prototype.getLabelForSnippetValue=function(value){return JSON.stringify(value).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},JSONCompletion.prototype.getInsertTextForPlainText=function(text){return text.replace(/[\\\$\}]/g,"\\$&")},JSONCompletion.prototype.getInsertTextForValue=function(value,separatorAfter){var text=JSON.stringify(value,null,"\t");return"{}"===text?"{$1}"+separatorAfter:"[]"===text?"[$1]"+separatorAfter:this.getInsertTextForPlainText(text+separatorAfter)},JSONCompletion.prototype.getInsertTextForSnippetValue=function(value,separatorAfter){return function stringifyObject(obj,indent,stringifyLiteral){if(null!==obj&&"object"==typeof obj){var newIndent=indent+"\t";if(Array.isArray(obj)){if(0===obj.length)return"[]";for(var result="[\n",i=0;i<obj.length;i++)result+=newIndent+stringifyObject(obj[i],newIndent,stringifyLiteral),i<obj.length-1&&(result+=","),result+="\n";return result+=indent+"]"}var keys=Object.keys(obj);if(0===keys.length)return"{}";for(result="{\n",i=0;i<keys.length;i++){var key=keys[i];result+=newIndent+JSON.stringify(key)+": "+stringifyObject(obj[key],newIndent,stringifyLiteral),i<keys.length-1&&(result+=","),result+="\n"}return result+=indent+"}"}return stringifyLiteral(obj)}(value,"",(function(value){return"string"==typeof value&&"^"===value[0]?value.substr(1):JSON.stringify(value)}))+separatorAfter},JSONCompletion.prototype.getInsertTextForGuessedValue=function(value,separatorAfter){switch(typeof value){case"object":return null===value?"${1:null}"+separatorAfter:this.getInsertTextForValue(value,separatorAfter);case"string":var snippetValue=JSON.stringify(value);return snippetValue=snippetValue.substr(1,snippetValue.length-2),'"${1:'+(snippetValue=this.getInsertTextForPlainText(snippetValue))+'}"'+separatorAfter;case"number":case"boolean":return"${1:"+JSON.stringify(value)+"}"+separatorAfter}return this.getInsertTextForValue(value,separatorAfter)},JSONCompletion.prototype.getSuggestionKind=function(type){if(Array.isArray(type)){var array=type;type=array.length>0?array[0]:void 0}if(!type)return main_CompletionItemKind.Value;switch(type){case"string":return main_CompletionItemKind.Value;case"object":return main_CompletionItemKind.Module;case"property":return main_CompletionItemKind.Property;default:return main_CompletionItemKind.Value}},JSONCompletion.prototype.getLabelTextForMatchingNode=function(node,document){switch(node.type){case"array":return"[]";case"object":return"{}";default:return document.getText().substr(node.offset,node.length)}},JSONCompletion.prototype.getInsertTextForMatchingNode=function(node,document,separatorAfter){switch(node.type){case"array":return this.getInsertTextForValue([],separatorAfter);case"object":return this.getInsertTextForValue({},separatorAfter);default:var content=document.getText().substr(node.offset,node.length)+separatorAfter;return this.getInsertTextForPlainText(content)}},JSONCompletion.prototype.getInsertTextForProperty=function(key,propertySchema,addValue,separatorAfter){var propertyText=this.getInsertTextForValue(key,"");if(!addValue)return propertyText;var value,resultText=propertyText+": ",nValueProposals=0;if(propertySchema){if(Array.isArray(propertySchema.defaultSnippets)){if(1===propertySchema.defaultSnippets.length){var body=propertySchema.defaultSnippets[0].body;isDefined(body)&&(value=this.getInsertTextForSnippetValue(body,""))}nValueProposals+=propertySchema.defaultSnippets.length}if(propertySchema.enum&&(value||1!==propertySchema.enum.length||(value=this.getInsertTextForGuessedValue(propertySchema.enum[0],"")),nValueProposals+=propertySchema.enum.length),isDefined(propertySchema.default)&&(value||(value=this.getInsertTextForGuessedValue(propertySchema.default,"")),nValueProposals++),Array.isArray(propertySchema.examples)&&propertySchema.examples.length&&(value||(value=this.getInsertTextForGuessedValue(propertySchema.examples[0],"")),nValueProposals+=propertySchema.examples.length),0===nValueProposals){var type=Array.isArray(propertySchema.type)?propertySchema.type[0]:propertySchema.type;switch(type||(propertySchema.properties?type="object":propertySchema.items&&(type="array")),type){case"boolean":value="$1";break;case"string":value='"$1"';break;case"object":value="{$1}";break;case"array":value="[$1]";break;case"number":case"integer":value="${1:0}";break;case"null":value="${1:null}";break;default:return propertyText}}}return(!value||nValueProposals>1)&&(value="$1"),resultText+value+separatorAfter},JSONCompletion.prototype.getCurrentWord=function(document,offset){for(var i=offset-1,text=document.getText();i>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(text.charAt(i));)i--;return text.substring(i+1,offset)},JSONCompletion.prototype.evaluateSeparatorAfter=function(document,offset){var scanner=main_createScanner(document.getText(),!0);switch(scanner.setPosition(offset),scanner.scan()){case 5:case 2:case 4:case 17:return"";default:return","}},JSONCompletion.prototype.findItemAtOffset=function(node,document,offset){for(var scanner=main_createScanner(document.getText(),!0),children=node.items,i=children.length-1;i>=0;i--){var child=children[i];if(offset>child.offset+child.length)return scanner.setPosition(child.offset+child.length),5===scanner.scan()&&offset>=scanner.getTokenOffset()+scanner.getTokenLength()?i+1:i;if(offset>=child.offset)return i}return 0},JSONCompletion.prototype.isInComment=function(document,start,offset){var scanner=main_createScanner(document.getText(),!1);scanner.setPosition(start);for(var token=scanner.scan();17!==token&&scanner.getTokenOffset()+scanner.getTokenLength()<offset;)token=scanner.scan();return(12===token||13===token)&&scanner.getTokenOffset()<=offset},JSONCompletion.prototype.fromMarkup=function(markupString){if(markupString&&this.doesSupportMarkdown())return{kind:MarkupKind.Markdown,value:markupString}},JSONCompletion.prototype.doesSupportMarkdown=function(){if(!isDefined(this.supportsMarkdown)){var completion=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=completion&&completion.completionItem&&Array.isArray(completion.completionItem.documentationFormat)&&-1!==completion.completionItem.documentationFormat.indexOf(MarkupKind.Markdown)}return this.supportsMarkdown},JSONCompletion.prototype.doesSupportsCommitCharacters=function(){if(!isDefined(this.supportsCommitCharacters)){var completion=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsCommitCharacters=completion&&completion.completionItem&&!!completion.completionItem.commitCharactersSupport}return this.supportsCommitCharacters},JSONCompletion}(),jsonHover_JSONHover=function(){function JSONHover(schemaService,contributions,promiseConstructor){void 0===contributions&&(contributions=[]),this.schemaService=schemaService,this.contributions=contributions,this.promise=promiseConstructor||Promise}return JSONHover.prototype.doHover=function(document,position,doc){var offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset);if(!node||("object"===node.type||"array"===node.type)&&offset>node.offset+1&&offset<node.offset+node.length-1)return this.promise.resolve(null);var hoverRangeNode=node;if("string"===node.type){var parent=node.parent;if(parent&&"property"===parent.type&&parent.keyNode===node&&!(node=parent.valueNode))return this.promise.resolve(null)}for(var hoverRange=main_Range.create(document.positionAt(hoverRangeNode.offset),document.positionAt(hoverRangeNode.offset+hoverRangeNode.length)),createHover=function(contents){return{contents:contents,range:hoverRange}},location=jsonParser_getNodePath(node),i=this.contributions.length-1;i>=0;i--){var promise=this.contributions[i].getInfoContribution(document.uri,location);if(promise)return promise.then((function(htmlContent){return createHover(htmlContent)}))}return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){if(schema&&node){var matchingSchemas=doc.getMatchingSchemas(schema.schema,node.offset),title_1=void 0,markdownDescription_1=void 0,markdownEnumValueDescription_1=void 0,enumValue_1=void 0;matchingSchemas.every((function(s){if(s.node===node&&!s.inverted&&s.schema&&(title_1=title_1||s.schema.title,markdownDescription_1=markdownDescription_1||s.schema.markdownDescription||toMarkdown(s.schema.description),s.schema.enum)){var idx=s.schema.enum.indexOf(jsonParser_getNodeValue(node));s.schema.markdownEnumDescriptions?markdownEnumValueDescription_1=s.schema.markdownEnumDescriptions[idx]:s.schema.enumDescriptions&&(markdownEnumValueDescription_1=toMarkdown(s.schema.enumDescriptions[idx])),markdownEnumValueDescription_1&&"string"!=typeof(enumValue_1=s.schema.enum[idx])&&(enumValue_1=JSON.stringify(enumValue_1))}return!0}));var result="";return title_1&&(result=toMarkdown(title_1)),markdownDescription_1&&(result.length>0&&(result+="\n\n"),result+=markdownDescription_1),markdownEnumValueDescription_1&&(result.length>0&&(result+="\n\n"),result+="`"+function toMarkdownCodeBlock(content){if(-1!==content.indexOf("`"))return"`` "+content+" ``";return content}(enumValue_1)+"`: "+markdownEnumValueDescription_1),createHover([result])}return null}))},JSONHover}();function toMarkdown(plain){if(plain)return plain.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}var vscode_uri=__webpack_require__(2),jsonSchemaService_localize=loadMessageBundle(),jsonSchemaService_FilePatternAssociation=function(){function FilePatternAssociation(pattern,uris){this.patternRegExps=[],this.isInclude=[];try{for(var _i=0,pattern_1=pattern;_i<pattern_1.length;_i++){var p=pattern_1[_i],include="!"!==p[0];include||(p=p.substring(1)),this.patternRegExps.push(new RegExp(strings_convertSimple2RegExpPattern(p)+"$")),this.isInclude.push(include)}this.uris=uris}catch(e){this.patternRegExps.length=0,this.isInclude.length=0,this.uris=[]}}return FilePatternAssociation.prototype.matchesPattern=function(fileName){for(var match=!1,i=0;i<this.patternRegExps.length;i++){this.patternRegExps[i].test(fileName)&&(match=this.isInclude[i])}return match},FilePatternAssociation.prototype.getURIs=function(){return this.uris},FilePatternAssociation}(),SchemaHandle=function(){function SchemaHandle(service,url,unresolvedSchemaContent){this.service=service,this.url=url,this.dependencies={},unresolvedSchemaContent&&(this.unresolvedSchema=this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent)))}return SchemaHandle.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},SchemaHandle.prototype.getResolvedSchema=function(){var _this=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then((function(unresolved){return _this.service.resolveSchemaContent(unresolved,_this.url,_this.dependencies)}))),this.resolvedSchema},SchemaHandle.prototype.clearSchema=function(){this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies={}},SchemaHandle}(),UnresolvedSchema=function UnresolvedSchema(schema,errors){void 0===errors&&(errors=[]),this.schema=schema,this.errors=errors},jsonSchemaService_ResolvedSchema=function(){function ResolvedSchema(schema,errors){void 0===errors&&(errors=[]),this.schema=schema,this.errors=errors}return ResolvedSchema.prototype.getSection=function(path){var schemaRef=this.getSectionRecursive(path,this.schema);if(schemaRef)return asSchema(schemaRef)},ResolvedSchema.prototype.getSectionRecursive=function(path,schema){if(!schema||"boolean"==typeof schema||0===path.length)return schema;var next=path.shift();if(schema.properties&&(schema.properties[next],1))return this.getSectionRecursive(path,schema.properties[next]);if(schema.patternProperties)for(var _i=0,_a=Object.keys(schema.patternProperties);_i<_a.length;_i++){var pattern=_a[_i];if(new RegExp(pattern).test(next))return this.getSectionRecursive(path,schema.patternProperties[pattern])}else{if("object"==typeof schema.additionalProperties)return this.getSectionRecursive(path,schema.additionalProperties);if(next.match("[0-9]+"))if(Array.isArray(schema.items)){var index=parseInt(next,10);if(!isNaN(index)&&schema.items[index])return this.getSectionRecursive(path,schema.items[index])}else if(schema.items)return this.getSectionRecursive(path,schema.items)}},ResolvedSchema}(),jsonSchemaService_JSONSchemaService=function(){function JSONSchemaService(requestService,contextService,promiseConstructor){this.contextService=contextService,this.requestService=requestService,this.promiseConstructor=promiseConstructor||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}return JSONSchemaService.prototype.getRegisteredSchemaIds=function(filter){return Object.keys(this.registeredSchemasIds).filter((function(id){var scheme=vscode_uri.a.parse(id).scheme;return"schemaservice"!==scheme&&(!filter||filter(scheme))}))},Object.defineProperty(JSONSchemaService.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!1,configurable:!0}),JSONSchemaService.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},JSONSchemaService.prototype.onResourceChange=function(uri){for(var _this=this,hasChanges=!1,toWalk=[uri=normalizeId(uri)],all=Object.keys(this.schemasById).map((function(key){return _this.schemasById[key]}));toWalk.length;)for(var curr=toWalk.pop(),i=0;i<all.length;i++){var handle=all[i];handle&&(handle.url===curr||handle.dependencies[curr])&&(handle.url!==curr&&toWalk.push(handle.url),handle.clearSchema(),all[i]=void 0,hasChanges=!0)}return hasChanges},JSONSchemaService.prototype.setSchemaContributions=function(schemaContributions){if(schemaContributions.schemas){var schemas=schemaContributions.schemas;for(var id in schemas){var normalizedId=normalizeId(id);this.contributionSchemas[normalizedId]=this.addSchemaHandle(normalizedId,schemas[id])}}if(Array.isArray(schemaContributions.schemaAssociations))for(var _i=0,schemaAssociations_1=schemaContributions.schemaAssociations;_i<schemaAssociations_1.length;_i++){var schemaAssociation=schemaAssociations_1[_i],uris=schemaAssociation.uris.map(normalizeId),association=this.addFilePatternAssociation(schemaAssociation.pattern,uris);this.contributionAssociations.push(association)}},JSONSchemaService.prototype.addSchemaHandle=function(id,unresolvedSchemaContent){var schemaHandle=new SchemaHandle(this,id,unresolvedSchemaContent);return this.schemasById[id]=schemaHandle,schemaHandle},JSONSchemaService.prototype.getOrAddSchemaHandle=function(id,unresolvedSchemaContent){return this.schemasById[id]||this.addSchemaHandle(id,unresolvedSchemaContent)},JSONSchemaService.prototype.addFilePatternAssociation=function(pattern,uris){var fpa=new jsonSchemaService_FilePatternAssociation(pattern,uris);return this.filePatternAssociations.push(fpa),fpa},JSONSchemaService.prototype.registerExternalSchema=function(uri,filePatterns,unresolvedSchemaContent){var id=normalizeId(uri);return this.registeredSchemasIds[id]=!0,this.cachedSchemaForResource=void 0,filePatterns&&this.addFilePatternAssociation(filePatterns,[uri]),unresolvedSchemaContent?this.addSchemaHandle(id,unresolvedSchemaContent):this.getOrAddSchemaHandle(id)},JSONSchemaService.prototype.clearExternalSchemas=function(){for(var id in this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0,this.contributionSchemas)this.schemasById[id]=this.contributionSchemas[id],this.registeredSchemasIds[id]=!0;for(var _i=0,_a=this.contributionAssociations;_i<_a.length;_i++){var contributionAssociation=_a[_i];this.filePatternAssociations.push(contributionAssociation)}},JSONSchemaService.prototype.getResolvedSchema=function(schemaId){var id=normalizeId(schemaId),schemaHandle=this.schemasById[id];return schemaHandle?schemaHandle.getResolvedSchema():this.promise.resolve(void 0)},JSONSchemaService.prototype.loadSchema=function(url){if(!this.requestService){var errorMessage=jsonSchemaService_localize("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",toDisplayString(url));return this.promise.resolve(new UnresolvedSchema({},[errorMessage]))}return this.requestService(url).then((function(content){if(!content){var errorMessage=jsonSchemaService_localize("json.schema.nocontent","Unable to load schema from '{0}': No content.",toDisplayString(url));return new UnresolvedSchema({},[errorMessage])}var schemaContent,jsonErrors=[];schemaContent=main_parse(content,jsonErrors);var errors=jsonErrors.length?[jsonSchemaService_localize("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",toDisplayString(url),jsonErrors[0].offset)]:[];return new UnresolvedSchema(schemaContent,errors)}),(function(error){var errorMessage=error.toString(),errorSplit=error.toString().split("Error: ");return errorSplit.length>1&&(errorMessage=errorSplit[1]),strings_endsWith(errorMessage,".")&&(errorMessage=errorMessage.substr(0,errorMessage.length-1)),new UnresolvedSchema({},[jsonSchemaService_localize("json.schema.nocontent","Unable to load schema from '{0}': {1}.",toDisplayString(url),errorMessage)])}))},JSONSchemaService.prototype.resolveSchemaContent=function(schemaToResolve,schemaURL,dependencies){var _this=this,resolveErrors=schemaToResolve.errors.slice(0),schema=schemaToResolve.schema;if(schema.$schema){var id=normalizeId(schema.$schema);if("http://json-schema.org/draft-03/schema"===id)return this.promise.resolve(new jsonSchemaService_ResolvedSchema({},[jsonSchemaService_localize("json.schema.draft03.notsupported","Draft-03 schemas are not supported.")]));"https://json-schema.org/draft/2019-09/schema"===id&&resolveErrors.push(jsonSchemaService_localize("json.schema.draft201909.notsupported","Draft 2019-09 schemas are not yet fully supported."))}var contextService=this.contextService,merge=function(target,sourceRoot,sourceURI,refSegment){var path=refSegment?decodeURIComponent(refSegment):void 0,section=function(schema,path){if(!path)return schema;var current=schema;return"/"===path[0]&&(path=path.substr(1)),path.split("/").some((function(part){return!(current=current[part])})),current}(sourceRoot,path);if(section)for(var key in section)section.hasOwnProperty(key)&&!target.hasOwnProperty(key)&&(target[key]=section[key]);else resolveErrors.push(jsonSchemaService_localize("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",path,sourceURI))},resolveExternalLink=function(node,uri,refSegment,parentSchemaURL,parentSchemaDependencies){contextService&&!/^\w+:\/\/.*/.test(uri)&&(uri=contextService.resolveRelativePath(uri,parentSchemaURL)),uri=normalizeId(uri);var referencedHandle=_this.getOrAddSchemaHandle(uri);return referencedHandle.getUnresolvedSchema().then((function(unresolvedSchema){if(parentSchemaDependencies[uri]=!0,unresolvedSchema.errors.length){var loc=refSegment?uri+"#"+refSegment:uri;resolveErrors.push(jsonSchemaService_localize("json.schema.problemloadingref","Problems loading reference '{0}': {1}",loc,unresolvedSchema.errors[0]))}return merge(node,unresolvedSchema.schema,uri,refSegment),resolveRefs(node,unresolvedSchema.schema,uri,referencedHandle.dependencies)}))},resolveRefs=function(node,parentSchema,parentSchemaURL,parentSchemaDependencies){if(!node||"object"!=typeof node)return Promise.resolve(null);for(var toWalk=[node],seen=[],openPromises=[],handleRef=function(next){for(var seenRefs=[];next.$ref;){var ref=next.$ref,segments=ref.split("#",2);if(delete next.$ref,segments[0].length>0)return void openPromises.push(resolveExternalLink(next,segments[0],segments[1],parentSchemaURL,parentSchemaDependencies));-1===seenRefs.indexOf(ref)&&(merge(next,parentSchema,parentSchemaURL,segments[1]),seenRefs.push(ref))}!function(){for(var entries=[],_i=0;_i<arguments.length;_i++)entries[_i]=arguments[_i];for(var _a=0,entries_1=entries;_a<entries_1.length;_a++){var entry=entries_1[_a];"object"==typeof entry&&toWalk.push(entry)}}(next.items,next.additionalItems,next.additionalProperties,next.not,next.contains,next.propertyNames,next.if,next.then,next.else),function(){for(var maps=[],_i=0;_i<arguments.length;_i++)maps[_i]=arguments[_i];for(var _a=0,maps_1=maps;_a<maps_1.length;_a++){var map=maps_1[_a];if("object"==typeof map)for(var k in map){var key=k,entry=map[key];"object"==typeof entry&&toWalk.push(entry)}}}(next.definitions,next.properties,next.patternProperties,next.dependencies),function(){for(var arrays=[],_i=0;_i<arguments.length;_i++)arrays[_i]=arguments[_i];for(var _a=0,arrays_1=arrays;_a<arrays_1.length;_a++){var array=arrays_1[_a];if(Array.isArray(array))for(var _b=0,array_1=array;_b<array_1.length;_b++){var entry=array_1[_b];"object"==typeof entry&&toWalk.push(entry)}}}(next.anyOf,next.allOf,next.oneOf,next.items)};toWalk.length;){var next=toWalk.pop();seen.indexOf(next)>=0||(seen.push(next),handleRef(next))}return _this.promise.all(openPromises)};return resolveRefs(schema,schema,schemaURL,dependencies).then((function(_){return new jsonSchemaService_ResolvedSchema(schema,resolveErrors)}))},JSONSchemaService.prototype.getSchemaForResource=function(resource,document){if(document&&document.root&&"object"===document.root.type){var schemaProperties=document.root.properties.filter((function(p){return"$schema"===p.keyNode.value&&p.valueNode&&"string"===p.valueNode.type}));if(schemaProperties.length>0){var valueNode=schemaProperties[0].valueNode;if(valueNode&&"string"===valueNode.type){var schemeId=jsonParser_getNodeValue(valueNode);if(schemeId&&function strings_startsWith(haystack,needle){if(haystack.length<needle.length)return!1;for(var i=0;i<needle.length;i++)if(haystack[i]!==needle[i])return!1;return!0}(schemeId,".")&&this.contextService&&(schemeId=this.contextService.resolveRelativePath(schemeId,resource)),schemeId){var id=normalizeId(schemeId);return this.getOrAddSchemaHandle(id).getResolvedSchema()}}}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===resource)return this.cachedSchemaForResource.resolvedSchema;for(var seen=Object.create(null),schemas=[],_i=0,_a=this.filePatternAssociations;_i<_a.length;_i++){var entry=_a[_i];if(entry.matchesPattern(resource))for(var _b=0,_c=entry.getURIs();_b<_c.length;_b++){var schemaId=_c[_b];seen[schemaId]||(schemas.push(schemaId),seen[schemaId]=!0)}}var resolvedSchema=schemas.length>0?this.createCombinedSchema(resource,schemas).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource:resource,resolvedSchema:resolvedSchema},resolvedSchema},JSONSchemaService.prototype.createCombinedSchema=function(resource,schemaIds){if(1===schemaIds.length)return this.getOrAddSchemaHandle(schemaIds[0]);var combinedSchemaId="schemaservice://combinedSchema/"+encodeURIComponent(resource),combinedSchema={allOf:schemaIds.map((function(schemaId){return{$ref:schemaId}}))};return this.addSchemaHandle(combinedSchemaId,combinedSchema)},JSONSchemaService.prototype.getMatchingSchemas=function(document,jsonDocument,schema){if(schema){var id=schema.id||"schemaservice://untitled/matchingSchemas/"+idCounter++;return this.resolveSchemaContent(new UnresolvedSchema(schema),id,{}).then((function(resolvedSchema){return jsonDocument.getMatchingSchemas(resolvedSchema.schema).filter((function(s){return!s.inverted}))}))}return this.getSchemaForResource(document.uri,jsonDocument).then((function(schema){return schema?jsonDocument.getMatchingSchemas(schema.schema).filter((function(s){return!s.inverted})):[]}))},JSONSchemaService}(),idCounter=0;function normalizeId(id){try{return vscode_uri.a.parse(id).toString()}catch(e){return id}}function toDisplayString(url){try{var uri=vscode_uri.a.parse(url);if("file"===uri.scheme)return uri.fsPath}catch(e){}return url}var jsonValidation_localize=loadMessageBundle(),jsonValidation_JSONValidation=function(){function JSONValidation(jsonSchemaService,promiseConstructor){this.jsonSchemaService=jsonSchemaService,this.promise=promiseConstructor,this.validationEnabled=!0}return JSONValidation.prototype.configure=function(raw){raw&&(this.validationEnabled=raw.validate,this.commentSeverity=raw.allowComments?void 0:DiagnosticSeverity.Error)},JSONValidation.prototype.doValidation=function(textDocument,jsonDocument,documentSettings,schema){var _this=this;if(!this.validationEnabled)return this.promise.resolve([]);var diagnostics=[],added={},addProblem=function(problem){var signature=problem.range.start.line+" "+problem.range.start.character+" "+problem.message;added[signature]||(added[signature]=!0,diagnostics.push(problem))},getDiagnostics=function(schema){var trailingCommaSeverity=documentSettings?toDiagnosticSeverity(documentSettings.trailingCommas):DiagnosticSeverity.Error,commentSeverity=documentSettings?toDiagnosticSeverity(documentSettings.comments):_this.commentSeverity;if(schema){if(schema.errors.length&&jsonDocument.root){var astRoot=jsonDocument.root,property="object"===astRoot.type?astRoot.properties[0]:void 0;if(property&&"$schema"===property.keyNode.value){var node=property.valueNode||property,range=main_Range.create(textDocument.positionAt(node.offset),textDocument.positionAt(node.offset+node.length));addProblem(Diagnostic.create(range,schema.errors[0],DiagnosticSeverity.Warning,ErrorCode.SchemaResolveError))}else{range=main_Range.create(textDocument.positionAt(astRoot.offset),textDocument.positionAt(astRoot.offset+1));addProblem(Diagnostic.create(range,schema.errors[0],DiagnosticSeverity.Warning,ErrorCode.SchemaResolveError))}}else{var semanticErrors=jsonDocument.validate(textDocument,schema.schema);semanticErrors&&semanticErrors.forEach(addProblem)}(function schemaAllowsComments(schemaRef){if(schemaRef&&"object"==typeof schemaRef){if(objects_isBoolean(schemaRef.allowComments))return schemaRef.allowComments;if(schemaRef.allOf)for(var _i=0,_a=schemaRef.allOf;_i<_a.length;_i++){var schema=_a[_i],allow=schemaAllowsComments(schema);if(objects_isBoolean(allow))return allow}}return})(schema.schema)&&(commentSeverity=void 0),function schemaAllowsTrailingCommas(schemaRef){if(schemaRef&&"object"==typeof schemaRef){if(objects_isBoolean(schemaRef.allowTrailingCommas))return schemaRef.allowTrailingCommas;var deprSchemaRef=schemaRef;if(objects_isBoolean(deprSchemaRef.allowsTrailingCommas))return deprSchemaRef.allowsTrailingCommas;if(schemaRef.allOf)for(var _i=0,_a=schemaRef.allOf;_i<_a.length;_i++){var schema=_a[_i],allow=schemaAllowsTrailingCommas(schema);if(objects_isBoolean(allow))return allow}}return}(schema.schema)&&(trailingCommaSeverity=void 0)}for(var _i=0,_a=jsonDocument.syntaxErrors;_i<_a.length;_i++){var p=_a[_i];if(p.code===ErrorCode.TrailingComma){if("number"!=typeof trailingCommaSeverity)continue;p.severity=trailingCommaSeverity}addProblem(p)}if("number"==typeof commentSeverity){var message_1=jsonValidation_localize("InvalidCommentToken","Comments are not permitted in JSON.");jsonDocument.comments.forEach((function(c){addProblem(Diagnostic.create(c,message_1,commentSeverity,ErrorCode.CommentNotPermitted))}))}return diagnostics};if(schema){var id=schema.id||"schemaservice://untitled/"+jsonValidation_idCounter++;return this.jsonSchemaService.resolveSchemaContent(new UnresolvedSchema(schema),id,{}).then((function(resolvedSchema){return getDiagnostics(resolvedSchema)}))}return this.jsonSchemaService.getSchemaForResource(textDocument.uri,jsonDocument).then((function(schema){return getDiagnostics(schema)}))},JSONValidation}(),jsonValidation_idCounter=0;function toDiagnosticSeverity(severityLevel){switch(severityLevel){case"error":return DiagnosticSeverity.Error;case"warning":return DiagnosticSeverity.Warning;case"ignore":return}}function hexDigit(charCode){return charCode<48?0:charCode<=57?charCode-48:(charCode<97&&(charCode+=32),charCode>=97&&charCode<=102?charCode-97+10:0)}function colorFromHex(text){if("#"===text[0])switch(text.length){case 4:return{red:17*hexDigit(text.charCodeAt(1))/255,green:17*hexDigit(text.charCodeAt(2))/255,blue:17*hexDigit(text.charCodeAt(3))/255,alpha:1};case 5:return{red:17*hexDigit(text.charCodeAt(1))/255,green:17*hexDigit(text.charCodeAt(2))/255,blue:17*hexDigit(text.charCodeAt(3))/255,alpha:17*hexDigit(text.charCodeAt(4))/255};case 7:return{red:(16*hexDigit(text.charCodeAt(1))+hexDigit(text.charCodeAt(2)))/255,green:(16*hexDigit(text.charCodeAt(3))+hexDigit(text.charCodeAt(4)))/255,blue:(16*hexDigit(text.charCodeAt(5))+hexDigit(text.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*hexDigit(text.charCodeAt(1))+hexDigit(text.charCodeAt(2)))/255,green:(16*hexDigit(text.charCodeAt(3))+hexDigit(text.charCodeAt(4)))/255,blue:(16*hexDigit(text.charCodeAt(5))+hexDigit(text.charCodeAt(6)))/255,alpha:(16*hexDigit(text.charCodeAt(7))+hexDigit(text.charCodeAt(8)))/255}}}var jsonDocumentSymbols_JSONDocumentSymbols=function(){function JSONDocumentSymbols(schemaService){this.schemaService=schemaService}return JSONDocumentSymbols.prototype.findDocumentSymbols=function(document,doc,context){var _this=this;void 0===context&&(context={resultLimit:Number.MAX_VALUE});var root=doc.root;if(!root)return[];var limit=context.resultLimit||Number.MAX_VALUE,resourceString=document.uri;if(("vscode://defaultsettings/keybindings.json"===resourceString||strings_endsWith(resourceString.toLowerCase(),"/user/keybindings.json"))&&"array"===root.type){for(var result_1=[],_i=0,_a=root.items;_i<_a.length;_i++){var item=_a[_i];if("object"===item.type)for(var _b=0,_c=item.properties;_b<_c.length;_b++){var property=_c[_b];if("key"===property.keyNode.value&&property.valueNode){var location=Location.create(document.uri,getRange(document,item));if(result_1.push({name:jsonParser_getNodeValue(property.valueNode),kind:main_SymbolKind.Function,location:location}),--limit<=0)return context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result_1}}}return result_1}for(var toVisit=[{node:root,containerName:""}],nextToVisit=0,limitExceeded=!1,result=[],collectOutlineEntries=function(node,containerName){"array"===node.type?node.items.forEach((function(node){node&&toVisit.push({node:node,containerName:containerName})})):"object"===node.type&&node.properties.forEach((function(property){var valueNode=property.valueNode;if(valueNode)if(limit>0){limit--;var location=Location.create(document.uri,getRange(document,property)),childContainerName=containerName?containerName+"."+property.keyNode.value:property.keyNode.value;result.push({name:_this.getKeyLabel(property),kind:_this.getSymbolKind(valueNode.type),location:location,containerName:containerName}),toVisit.push({node:valueNode,containerName:childContainerName})}else limitExceeded=!0}))};nextToVisit<toVisit.length;){var next=toVisit[nextToVisit++];collectOutlineEntries(next.node,next.containerName)}return limitExceeded&&context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result},JSONDocumentSymbols.prototype.findDocumentSymbols2=function(document,doc,context){var _this=this;void 0===context&&(context={resultLimit:Number.MAX_VALUE});var root=doc.root;if(!root)return[];var limit=context.resultLimit||Number.MAX_VALUE,resourceString=document.uri;if(("vscode://defaultsettings/keybindings.json"===resourceString||strings_endsWith(resourceString.toLowerCase(),"/user/keybindings.json"))&&"array"===root.type){for(var result_2=[],_i=0,_a=root.items;_i<_a.length;_i++){var item=_a[_i];if("object"===item.type)for(var _b=0,_c=item.properties;_b<_c.length;_b++){var property=_c[_b];if("key"===property.keyNode.value&&property.valueNode){var range=getRange(document,item),selectionRange=getRange(document,property.keyNode);if(result_2.push({name:jsonParser_getNodeValue(property.valueNode),kind:main_SymbolKind.Function,range:range,selectionRange:selectionRange}),--limit<=0)return context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result_2}}}return result_2}for(var result=[],toVisit=[{node:root,result:result}],nextToVisit=0,limitExceeded=!1,collectOutlineEntries=function(node,result){"array"===node.type?node.items.forEach((function(node,index){if(node)if(limit>0){limit--;var range=getRange(document,node),selectionRange=range,symbol={name:String(index),kind:_this.getSymbolKind(node.type),range:range,selectionRange:selectionRange,children:[]};result.push(symbol),toVisit.push({result:symbol.children,node:node})}else limitExceeded=!0})):"object"===node.type&&node.properties.forEach((function(property){var valueNode=property.valueNode;if(valueNode)if(limit>0){limit--;var range=getRange(document,property),selectionRange=getRange(document,property.keyNode),symbol={name:_this.getKeyLabel(property),kind:_this.getSymbolKind(valueNode.type),range:range,selectionRange:selectionRange,children:[]};result.push(symbol),toVisit.push({result:symbol.children,node:valueNode})}else limitExceeded=!0}))};nextToVisit<toVisit.length;){var next=toVisit[nextToVisit++];collectOutlineEntries(next.node,next.result)}return limitExceeded&&context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result},JSONDocumentSymbols.prototype.getSymbolKind=function(nodeType){switch(nodeType){case"object":return main_SymbolKind.Module;case"string":return main_SymbolKind.String;case"number":return main_SymbolKind.Number;case"array":return main_SymbolKind.Array;case"boolean":return main_SymbolKind.Boolean;default:return main_SymbolKind.Variable}},JSONDocumentSymbols.prototype.getKeyLabel=function(property){var name=property.keyNode.value;return name&&(name=name.replace(/[\n]/g,"")),name&&name.trim()?name:'"'+name+'"'},JSONDocumentSymbols.prototype.findDocumentColors=function(document,doc,context){return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){var result=[];if(schema)for(var limit=context&&"number"==typeof context.resultLimit?context.resultLimit:Number.MAX_VALUE,visitedNode={},_i=0,matchingSchemas_1=doc.getMatchingSchemas(schema.schema);_i<matchingSchemas_1.length;_i++){var s=matchingSchemas_1[_i];if(!s.inverted&&s.schema&&("color"===s.schema.format||"color-hex"===s.schema.format)&&s.node&&"string"===s.node.type){var nodeId=String(s.node.offset);if(!visitedNode[nodeId]){var color=colorFromHex(jsonParser_getNodeValue(s.node));if(color){var range=getRange(document,s.node);result.push({color:color,range:range})}if(visitedNode[nodeId]=!0,--limit<=0)return context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(document.uri),result}}}return result}))},JSONDocumentSymbols.prototype.getColorPresentations=function(document,doc,color,range){var label,result=[],red256=Math.round(255*color.red),green256=Math.round(255*color.green),blue256=Math.round(255*color.blue);function toTwoDigitHex(n){var r=n.toString(16);return 2!==r.length?"0"+r:r}return label=1===color.alpha?"#"+toTwoDigitHex(red256)+toTwoDigitHex(green256)+toTwoDigitHex(blue256):"#"+toTwoDigitHex(red256)+toTwoDigitHex(green256)+toTwoDigitHex(blue256)+toTwoDigitHex(Math.round(255*color.alpha)),result.push({label:label,textEdit:TextEdit.replace(range,JSON.stringify(label))}),result},JSONDocumentSymbols}();function getRange(document,node){return main_Range.create(document.positionAt(node.offset),document.positionAt(node.offset+node.length))}var configuration_localize=loadMessageBundle(),schemaContributions={schemaAssociations:[],schemas:{"http://json-schema.org/schema#":{$ref:"http://json-schema.org/draft-07/schema#"},"http://json-schema.org/draft-04/schema#":{title:configuration_localize("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"http://json-schema.org/draft-07/schema#":{title:configuration_localize("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},descriptions={id:configuration_localize("schema.json.id","A unique identifier for the schema."),$schema:configuration_localize("schema.json.$schema","The schema to verify this document against."),title:configuration_localize("schema.json.title","A descriptive title of the element."),description:configuration_localize("schema.json.description","A long description of the element. Used in hover menus and suggestions."),default:configuration_localize("schema.json.default","A default value. Used by suggestions."),multipleOf:configuration_localize("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:configuration_localize("schema.json.maximum","The maximum numerical value, inclusive by default."),exclusiveMaximum:configuration_localize("schema.json.exclusiveMaximum","Makes the maximum property exclusive."),minimum:configuration_localize("schema.json.minimum","The minimum numerical value, inclusive by default."),exclusiveMinimum:configuration_localize("schema.json.exclusiveMininum","Makes the minimum property exclusive."),maxLength:configuration_localize("schema.json.maxLength","The maximum length of a string."),minLength:configuration_localize("schema.json.minLength","The minimum length of a string."),pattern:configuration_localize("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored."),additionalItems:configuration_localize("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail."),items:configuration_localize("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:configuration_localize("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive."),minItems:configuration_localize("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive."),uniqueItems:configuration_localize("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false."),maxProperties:configuration_localize("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive."),minProperties:configuration_localize("schema.json.minProperties","The minimum number of properties an object can have. Inclusive."),required:configuration_localize("schema.json.required","An array of strings that lists the names of all properties required on this object."),additionalProperties:configuration_localize("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail."),definitions:configuration_localize("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:configuration_localize("schema.json.properties","A map of property names to schemas for each property."),patternProperties:configuration_localize("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties."),dependencies:configuration_localize("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:configuration_localize("schema.json.enum","The set of literal values that are valid."),type:configuration_localize("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:configuration_localize("schema.json.format","Describes the format expected for the value."),allOf:configuration_localize("schema.json.allOf","An array of schemas, all of which must match."),anyOf:configuration_localize("schema.json.anyOf","An array of schemas, where at least one must match."),oneOf:configuration_localize("schema.json.oneOf","An array of schemas, exactly one of which must match."),not:configuration_localize("schema.json.not","A schema which must not match."),$id:configuration_localize("schema.json.$id","A unique identifier for the schema."),$ref:configuration_localize("schema.json.$ref","Reference a definition hosted on any location."),$comment:configuration_localize("schema.json.$comment","Comments from schema authors to readers or maintainers of the schema."),readOnly:configuration_localize("schema.json.readOnly","Indicates that the value of the instance is managed exclusively by the owning authority."),examples:configuration_localize("schema.json.examples","Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:configuration_localize("schema.json.contains",'An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:configuration_localize("schema.json.propertyNames","If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:configuration_localize("schema.json.const","An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:configuration_localize("schema.json.contentMediaType","Describes the media type of a string property."),contentEncoding:configuration_localize("schema.json.contentEncoding","Describes the content encoding of a string property."),if:configuration_localize("schema.json.if",'The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:configuration_localize("schema.json.then",'The "if" subschema is used for validation when the "if" subschema succeeds.'),else:configuration_localize("schema.json.else",'The "else" subschema is used for validation when the "if" subschema fails.')};for(var schemaName in schemaContributions.schemas){var configuration_schema=schemaContributions.schemas[schemaName];for(var configuration_property in configuration_schema.properties){var propertyObject=configuration_schema.properties[configuration_property];"boolean"==typeof propertyObject&&(propertyObject=configuration_schema.properties[configuration_property]={});var description=descriptions[configuration_property];description?propertyObject.description=description:console.log(configuration_property+": localize('schema.json."+configuration_property+'\', "")')}}function getFoldingRanges(document,context){var ranges=[],nestingLevels=[],stack=[],prevStart=-1,scanner=main_createScanner(document.getText(),!1),token=scanner.scan();function addRange(range){ranges.push(range),nestingLevels.push(stack.length)}for(;17!==token;){switch(token){case 1:case 3:var range={startLine:startLine=document.positionAt(scanner.getTokenOffset()).line,endLine:startLine,kind:1===token?"object":"array"};stack.push(range);break;case 2:case 4:var kind=2===token?"object":"array";if(stack.length>0&&stack[stack.length-1].kind===kind){range=stack.pop();var line=document.positionAt(scanner.getTokenOffset()).line;range&&line>range.startLine+1&&prevStart!==range.startLine&&(range.endLine=line-1,addRange(range),prevStart=range.startLine)}break;case 13:var startLine=document.positionAt(scanner.getTokenOffset()).line,endLine=document.positionAt(scanner.getTokenOffset()+scanner.getTokenLength()).line;1===scanner.getTokenError()&&startLine+1<document.lineCount?scanner.setPosition(document.offsetAt(main_Position.create(startLine+1,0))):startLine<endLine&&(addRange({startLine:startLine,endLine:endLine,kind:FoldingRangeKind.Comment}),prevStart=startLine);break;case 12:var m=document.getText().substr(scanner.getTokenOffset(),scanner.getTokenLength()).match(/^\/\/\s*#(region\b)|(endregion\b)/);if(m){line=document.positionAt(scanner.getTokenOffset()).line;if(m[1]){range={startLine:line,endLine:line,kind:FoldingRangeKind.Region};stack.push(range)}else{for(var i=stack.length-1;i>=0&&stack[i].kind!==FoldingRangeKind.Region;)i--;if(i>=0){range=stack[i];stack.length=i,line>range.startLine&&prevStart!==range.startLine&&(range.endLine=line,addRange(range),prevStart=range.startLine)}}}}token=scanner.scan()}var rangeLimit=context&&context.rangeLimit;if("number"!=typeof rangeLimit||ranges.length<=rangeLimit)return ranges;context&&context.onRangeLimitExceeded&&context.onRangeLimitExceeded(document.uri);for(var counts=[],_i=0,nestingLevels_1=nestingLevels;_i<nestingLevels_1.length;_i++){(level=nestingLevels_1[_i])<30&&(counts[level]=(counts[level]||0)+1)}var entries=0,maxLevel=0;for(i=0;i<counts.length;i++){var n=counts[i];if(n){if(n+entries>rangeLimit){maxLevel=i;break}entries+=n}}var result=[];for(i=0;i<ranges.length;i++){var level;"number"==typeof(level=nestingLevels[i])&&(level<maxLevel||level===maxLevel&&entries++<rangeLimit)&&result.push(ranges[i])}return result}function getSelectionRanges(document,positions,doc){function newRange(start,end){return main_Range.create(document.positionAt(start),document.positionAt(end))}var scanner=main_createScanner(document.getText(),!0);function getOffsetAfterNextToken(offset,expectedToken){return scanner.setPosition(offset),scanner.scan()===expectedToken?scanner.getTokenOffset()+scanner.getTokenLength():-1}return positions.map((function getSelectionRange(position){for(var offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset,!0),result=[];node;){switch(node.type){case"string":case"object":case"array":var cStart=node.offset+1,cEnd=node.offset+node.length-1;cStart<cEnd&&offset>=cStart&&offset<=cEnd&&result.push(newRange(cStart,cEnd)),result.push(newRange(node.offset,node.offset+node.length));break;case"number":case"boolean":case"null":case"property":result.push(newRange(node.offset,node.offset+node.length))}if("property"===node.type||node.parent&&"array"===node.parent.type){var afterCommaOffset=getOffsetAfterNextToken(node.offset+node.length,5);-1!==afterCommaOffset&&result.push(newRange(node.offset,afterCommaOffset))}node=node.parent}for(var current=void 0,index=result.length-1;index>=0;index--)current=SelectionRange.create(result[index],current);return current||(current=SelectionRange.create(main_Range.create(position,position))),current}))}function findDefinition(document,position,doc){var offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset,!0);if(!node||!function isRef(node){return"string"===node.type&&node.parent&&"property"===node.parent.type&&node.parent.valueNode===node&&"$ref"===node.parent.keyNode.value||!1}(node))return Promise.resolve([]);var valueNode=node.parent.valueNode,targetNode=function findTargetNode(doc,path){var tokens=function parseJSONPointer(path){if("#"===path)return[];if("#"!==path[0]||"/"!==path[1])return null;return path.substring(2).split(/\//).map(jsonDefinition_unescape)}(path);if(!tokens)return null;return function findNode(pointer,node){if(!node)return null;if(0===pointer.length)return node;var token=pointer.shift();if(node&&"object"===node.type){var propertyNode=node.properties.find((function(propertyNode){return propertyNode.keyNode.value===token}));return propertyNode?findNode(pointer,propertyNode.valueNode):null}if(node&&"array"===node.type&&token.match(/^(0|[1-9][0-9]*)$/)){var index=Number.parseInt(token),arrayItem=node.items[index];return arrayItem?findNode(pointer,arrayItem):null}return null}(tokens,doc.root)}(doc,valueNode.value);if(!targetNode)return Promise.resolve([]);var definition={targetUri:document.uri,originSelectionRange:createRange(document,valueNode),targetRange:createRange(document,targetNode),targetSelectionRange:createRange(document,targetNode)};return Promise.resolve([definition])}function createRange(document,node){return main_Range.create(document.positionAt(node.offset),document.positionAt(node.offset+node.length))}function jsonDefinition_unescape(str){return str.replace(/~1/g,"/").replace(/~0/g,"~")}function getLanguageService(params){var promise=params.promiseConstructor||Promise,jsonSchemaService=new jsonSchemaService_JSONSchemaService(params.schemaRequestService,params.workspaceContext,promise);jsonSchemaService.setSchemaContributions(schemaContributions);var jsonCompletion=new jsonCompletion_JSONCompletion(jsonSchemaService,params.contributions,promise,params.clientCapabilities),jsonHover=new jsonHover_JSONHover(jsonSchemaService,params.contributions,promise),jsonDocumentSymbols=new jsonDocumentSymbols_JSONDocumentSymbols(jsonSchemaService),jsonValidation=new jsonValidation_JSONValidation(jsonSchemaService,promise);return{configure:function(settings){jsonSchemaService.clearExternalSchemas(),settings.schemas&&settings.schemas.forEach((function(settings){jsonSchemaService.registerExternalSchema(settings.uri,settings.fileMatch,settings.schema)})),jsonValidation.configure(settings)},resetSchema:function(uri){return jsonSchemaService.onResourceChange(uri)},doValidation:jsonValidation.doValidation.bind(jsonValidation),parseJSONDocument:function(document){return jsonParser_parse(document,{collectComments:!0})},newJSONDocument:function(root,diagnostics){return function newJSONDocument(root,diagnostics){return void 0===diagnostics&&(diagnostics=[]),new jsonParser_JSONDocument(root,diagnostics,[])}(root,diagnostics)},getMatchingSchemas:jsonSchemaService.getMatchingSchemas.bind(jsonSchemaService),doResolve:jsonCompletion.doResolve.bind(jsonCompletion),doComplete:jsonCompletion.doComplete.bind(jsonCompletion),findDocumentSymbols:jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),findDocumentSymbols2:jsonDocumentSymbols.findDocumentSymbols2.bind(jsonDocumentSymbols),findColorSymbols:function(d,s){return jsonDocumentSymbols.findDocumentColors(d,s).then((function(s){return s.map((function(s){return s.range}))}))},findDocumentColors:jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),getColorPresentations:jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),doHover:jsonHover.doHover.bind(jsonHover),getFoldingRanges:getFoldingRanges,getSelectionRanges:getSelectionRanges,findDefinition:findDefinition,format:function(d,r,o){var range=void 0;if(r){var offset=d.offsetAt(r.start);range={offset:offset,length:d.offsetAt(r.end)-offset}}var options={tabSize:o?o.tabSize:4,insertSpaces:!o||o.insertSpaces,eol:"\n"};return function main_format(documentText,range,options){return format_format(documentText,range,options)}(d.getText(),range,options).map((function(e){return TextEdit.replace(main_Range.create(d.positionAt(e.offset),d.positionAt(e.offset+e.length)),e.content)}))}}}var defaultSchemaRequestService,jsonWorker_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};"undefined"!=typeof fetch&&(defaultSchemaRequestService=function(url){return fetch(url).then((function(response){return response.text()}))});var jsonWorker_JSONWorker=function(){function JSONWorker(ctx,createData){this._ctx=ctx,this._languageSettings=createData.languageSettings,this._languageId=createData.languageId,this._languageService=getLanguageService({workspaceContext:{resolveRelativePath:function(relativePath,resource){return function resolvePath(uriString,path){if(function isAbsolutePath(path){return path.charCodeAt(0)===Slash}(path)){var uri=vscode_uri.a.parse(uriString),parts=path.split("/");return uri.with({path:normalizePath(parts)}).toString()}return function joinPath(uriString){for(var paths=[],_i=1;_i<arguments.length;_i++)paths[_i-1]=arguments[_i];for(var uri=vscode_uri.a.parse(uriString),parts=uri.path.split("/"),_a=0,paths_1=paths;_a<paths_1.length;_a++){var path=paths_1[_a];parts.push.apply(parts,path.split("/"))}return uri.with({path:normalizePath(parts)}).toString()}(uriString,path)}(resource.substr(0,resource.lastIndexOf("/")+1),relativePath)}},schemaRequestService:createData.enableSchemaRequest&&defaultSchemaRequestService}),this._languageService.configure(this._languageSettings)}return JSONWorker.prototype.doValidation=function(uri){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,jsonDocument;return __generator(this,(function(_a){return(document=this._getTextDocument(uri))?(jsonDocument=this._languageService.parseJSONDocument(document),[2,this._languageService.doValidation(document,jsonDocument)]):[2,Promise.resolve([])]}))}))},JSONWorker.prototype.doComplete=function(uri,position){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,jsonDocument;return __generator(this,(function(_a){return document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document),[2,this._languageService.doComplete(document,position,jsonDocument)]}))}))},JSONWorker.prototype.doResolve=function(item){return jsonWorker_awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this._languageService.doResolve(item)]}))}))},JSONWorker.prototype.doHover=function(uri,position){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,jsonDocument;return __generator(this,(function(_a){return document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document),[2,this._languageService.doHover(document,position,jsonDocument)]}))}))},JSONWorker.prototype.format=function(uri,range,options){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,textEdits;return __generator(this,(function(_a){return document=this._getTextDocument(uri),textEdits=this._languageService.format(document,range,options),[2,Promise.resolve(textEdits)]}))}))},JSONWorker.prototype.resetSchema=function(uri){return jsonWorker_awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,Promise.resolve(this._languageService.resetSchema(uri))]}))}))},JSONWorker.prototype.findDocumentSymbols=function(uri){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,jsonDocument,symbols;return __generator(this,(function(_a){return document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document),symbols=this._languageService.findDocumentSymbols(document,jsonDocument),[2,Promise.resolve(symbols)]}))}))},JSONWorker.prototype.findDocumentColors=function(uri){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,jsonDocument,colorSymbols;return __generator(this,(function(_a){return document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document),colorSymbols=this._languageService.findDocumentColors(document,jsonDocument),[2,Promise.resolve(colorSymbols)]}))}))},JSONWorker.prototype.getColorPresentations=function(uri,color,range){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,jsonDocument,colorPresentations;return __generator(this,(function(_a){return document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document),colorPresentations=this._languageService.getColorPresentations(document,jsonDocument,color,range),[2,Promise.resolve(colorPresentations)]}))}))},JSONWorker.prototype.getFoldingRanges=function(uri,context){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,ranges;return __generator(this,(function(_a){return document=this._getTextDocument(uri),ranges=this._languageService.getFoldingRanges(document,context),[2,Promise.resolve(ranges)]}))}))},JSONWorker.prototype.getSelectionRanges=function(uri,positions){return jsonWorker_awaiter(this,void 0,void 0,(function(){var document,jsonDocument,ranges;return __generator(this,(function(_a){return document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document),ranges=this._languageService.getSelectionRanges(document,positions,jsonDocument),[2,Promise.resolve(ranges)]}))}))},JSONWorker.prototype._getTextDocument=function(uri){for(var _i=0,models_1=this._ctx.getMirrorModels();_i<models_1.length;_i++){var model=models_1[_i];if(model.uri.toString()===uri)return main_TextDocument.create(uri,this._languageId,model.version,model.getValue())}return null},JSONWorker}(),Slash="/".charCodeAt(0),Dot=".".charCodeAt(0);function normalizePath(parts){for(var newParts=[],_i=0,parts_1=parts;_i<parts_1.length;_i++){var part=parts_1[_i];0===part.length||1===part.length&&part.charCodeAt(0)===Dot||(2===part.length&&part.charCodeAt(0)===Dot&&part.charCodeAt(1)===Dot?newParts.pop():newParts.push(part))}parts.length>1&&0===parts[parts.length-1].length&&newParts.push("");var res=newParts.join("/");return 0===parts[0].length&&(res="/"+res),res}self.onmessage=function(){initialize((function(ctx,createData){return new jsonWorker_JSONWorker(ctx,createData)}))}}]);
//# sourceMappingURL=json.worker.js.map